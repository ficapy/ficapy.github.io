<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é‚¹é›·</title>
  <subtitle>åˆ¨è¿‡çš„å‘,è‡ªå·±æ…¢æ…¢æ¥å¡«</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ficapy.com/"/>
  <updated>2016-07-31T00:58:37.000Z</updated>
  <id>http://ficapy.com/</id>
  
  <author>
    <name>Ficapy</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>listå’Œdictçš„çº¿ç¨‹å®‰å…¨</title>
    <link href="http://ficapy.com/2016/07/31/list_dict_threading_safe/"/>
    <id>http://ficapy.com/2016/07/31/list_dict_threading_safe/</id>
    <published>2016-07-30T23:47:09.000Z</published>
    <updated>2016-07-31T00:58:37.000Z</updated>
    
    <content type="html">&lt;p&gt;åˆšè½¬è¡Œç¬¬ä¸€æ¬¡ITé¢è¯•çš„æ—¶å€™é¢è¯•å®˜é—®æˆ‘ï¼Œlistå’Œdictæ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å½“æ—¶æˆ‘å°±æƒ³ï¼Œæ“¦å˜,ä½œä¸ºä¸€ä¸ªåˆå­¦è€…listå’Œdictä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„éƒ½çœ‹äº†Néå•¦ã€‚è¿™è¿˜æœ‰ç–‘é—®ä¹ˆ~~~ï¼Œç°åœ¨æƒ³æƒ³å¹¶æ²¡æœ‰æŠ“ä½é‡ç‚¹ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;å®˜æ–¹æ–‡æ¡£&quot;&gt;&lt;a href=&quot;#å®˜æ–¹æ–‡æ¡£&quot; class=&quot;headerlink&quot; title=&quot;å®˜æ–¹æ–‡æ¡£&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://docs.python.org/2/faq/library.html#what-kinds-of-global-value-mutation-are-thread-safe&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°å¤§æ¦‚æœ‰è¿™ä¹ˆä¸ªæ¦‚å¿µ&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;L,L1,L2-&amp;#62;list&amp;#10;D,D1,D2-&amp;#62;dict&amp;#10;x,y-&amp;#62;object&amp;#10;i,j-&amp;#62;int&amp;#10;&amp;#10;&amp;#32447;&amp;#31243;&amp;#23433;&amp;#20840;&amp;#10;L.append(x)&amp;#10;L1.append(L2)&amp;#10;x=L[i]&amp;#10;y=L.pop()&amp;#10;L1[i,j]=L2&amp;#10;L.sort()&amp;#10;x=y&amp;#10;x.field=y&amp;#10;D[x]=y&amp;#10;D1.update(D2)&amp;#10;D.keys()&amp;#10;&amp;#10;&amp;#10;&amp;#20197;&amp;#19979;&amp;#26159;&amp;#38750;&amp;#32447;&amp;#31243;&amp;#23433;&amp;#20840;&amp;#10;i=i+1&amp;#10;L.append(L[-1])&amp;#10;L[i]=L[j]&amp;#10;D[x]=D[x]+1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å¯ä»¥çœ‹åˆ°listçš„appendå•¥çš„å…¶å®æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æˆ‘ä»¬çœ‹åˆ°çš„ä¸¾éçº¿ç¨‹å®‰å…¨çš„ä¾‹å­åŸºæœ¬éƒ½æ˜¯i+=1è¿™ç§ï¼Œæœ€åå¾—åˆ°çš„ç»“æœå°äºç›¸åŠ æ¬¡æ•°ã€‚ç„¶åæœ€åè¯´ä¸€å¥å¤šçº¿ç¨‹å¯¹åŒä¸€èµ„æºè¿›è¡Œæ“ä½œçš„æ—¶å€™è¦åŠ é”å“‡ã€‚ã€‚ã€‚ã€‚ã€‚è¿™è¯ç›´æ¥è¯´çš„å¥½åƒæ¯”è¾ƒä¸è´Ÿè´£ä»»ã€‚è®©æˆ‘è¿™æ ·çš„åˆå­¦è€…é£å£°é¹¤å”³è‰æœ¨çš†å…µ&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ç‚¹å°è§£é‡Š&quot;&gt;&lt;a href=&quot;#ä¸€ç‚¹å°è§£é‡Š&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ç‚¹å°è§£é‡Š&quot;&gt;&lt;/a&gt;ä¸€ç‚¹å°è§£é‡Š&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; threading&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; dis&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;global&lt;/span&gt; i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; range(&lt;span class=&quot;number&quot;&gt;3000000&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i += &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;th = [threading.Thread(target=main), threading.Thread(target=main)]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; t &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; th:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    t.start()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; t &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; th:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    t.join()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(i)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dis.dis(main)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; threading&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; dis&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;global&lt;/span&gt; i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; range(&lt;span class=&quot;number&quot;&gt;3000000&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i += &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;th = [threading.Thread(target=main), threading.Thread(target=main)]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; t &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; th:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    t.start()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; t &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; th:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    t.join()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(i)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dis.dis(main)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 4372439&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#   8           0 SETUP_LOOP              30 (to 33)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#               3 LOAD_GLOBAL              0 (range)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#               6 LOAD_CONST               1 (3000000)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#               9 CALL_FUNCTION            1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#              12 GET_ITER            &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#         &amp;gt;&amp;gt;   13 FOR_ITER                16 (to 32)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#              16 STORE_FAST               0 (_)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#   9          19 LOAD_GLOBAL              1 (i)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#              22 LOAD_CONST               2 (1)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#              25 INPLACE_ADD         &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#              26 STORE_GLOBAL             1 (i)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#              29 JUMP_ABSOLUTE           13&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#         &amp;gt;&amp;gt;   32 POP_BLOCK           &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#         &amp;gt;&amp;gt;   33 LOAD_CONST               0 (None)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#              36 RETURN_VALUE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“pythonä»£ç ç»è¿‡ç¼–è¯‘æˆå­—èŠ‚ç æŒ‡ä»¤ï¼Œç„¶åpythonè™šæ‹ŸæœºæŒ‰ç…§æŒ‡ä»¤è¿›è¡Œæ‰§è¡Œï¼Œè¿™é‡Œæ¯ä¸€æ¡æŒ‡ä»¤éƒ½æ˜¯åŸå­æ“ä½œä¸ä¼šè¢«ä¸­æ–­ï¼Œå¯ä»¥çœ‹åˆ°&lt;code&gt;i+=1&lt;/code&gt;è¿™æ¡è¯­å¥è¢«åˆ’åˆ†ä¸º4æ¡æŒ‡ä»¤è¢«æ‰§è¡Œã€‚å–å‡ºiå˜é‡çš„å€¼å…¥æ ˆâ†’â†’å°†è¢«åŠ æ•°1å…¥æ ˆâ†’â†’å–å‡º2ä¸ªæ•°ç›¸åŠ ç»“æœå†å…¥æ ˆâ†’â†’ç»“æœå‡ºæ ˆã€‚å› ä¸ºæ˜¯è¦ç´¯åŠ ã€‚æˆ‘ä»¬å½“ç„¶éœ€è¦ç´¯åŠ çš„ç¬¬ä¸€æ­¥åŠ å…¥çš„å€¼æ˜¯ä¸Šä¸€ä¸ªç´¯åŠ çš„ç»“æœã€‚å¯æ˜¯åœ¨å¤šçº¿ç¨‹ä¸åŠ é”çš„æƒ…å†µä¸‹æ¯ä¸€æ¡æŒ‡ä»¤è¢«æ‰§è¡Œå®Œæ¯•åéƒ½æœ‰å¯èƒ½å»æ‰§è¡Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„æŒ‡ä»¤ã€‚è¿™å°±ä¼šé€ æˆç¬¬ä¸€æ­¥åŠ å…¥çš„å€¼æœ‰å¯èƒ½å’Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸€æ ·çš„ï¼Œäºæ˜¯æ‚²å‰§å‘ç”Ÿäº†O_o&lt;/p&gt;
&lt;p&gt;å†æƒ³ä¸€æƒ³append&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;8          19 LOAD_GLOBAL              1 (i)&amp;#10;           22 LOAD_ATTR                2 (append)&amp;#10;           25 LOAD_CONST               2 (1)&amp;#10;           28 CALL_FUNCTION            1&amp;#10;           31 POP_TOP&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt; &lt;a href=&quot;http://jakevdp.github.io/images/array_vs_list.png&quot;&gt;å›¾ç‰‡å¼•ç”¨è‡ª&lt;/a&gt;&lt;br&gt; &lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/array_vs_list.png&quot; alt=&quot;array_vs_list&quot;&gt;&lt;br&gt;å¯ä»¥çœ‹å‡ºlistå°±æ˜¯ä¸€ä¸ªå®¹å™¨.appendå°±ç›¸å½“ä¸åœ¨æœ€åé¢åŠ äº†ä¸€ä¸ªå¼•ç”¨ã€‚è™½ç„¶å®ƒä¹Ÿæ˜¯ç”±å‡ æ¡æŒ‡å®šç»„æˆã€‚ä¹Ÿä¼šå‘ç”Ÿäº¤é”™æ‰§è¡Œçš„æƒ…å†µã€‚è¿™ç§äº¤é”™é€ æˆçš„ç»“æœæ— éå°±æ˜¯æˆ‘æœ¬æ¥æ˜¯å…ˆæ‰§è¡Œçš„å´åœ¨äº†ä¸€ä¸ªçš„åé¢æ‰§è¡Œäº†æ’å…¥ï¼Œé€ æˆçš„ç»“æœå°±æ˜¯&lt;code&gt;é¡ºåºé”™ä¹±äº†&lt;/code&gt;ã€‚ğŸ˜„å¯æ˜¯ç‰¹å–µæœ¬æ¥å°±æ˜¯å¤šçº¿ç¨‹ç¨‹åºï¼Œè°ç‰¹å–µä¼šå»å…³å¿ƒé¡ºåºå‘¢ã€‚æ‰€ä»¥å°±è¯´çº¿ç¨‹å®‰å…¨äº†ã€‚&lt;br&gt;å¯ä»¥çœ‹å‡ºï¼Œappendå’Œ&lt;code&gt;i+=1&lt;/code&gt;æœ€å¤§çš„åŒºåˆ«å°±æ˜¯æ˜¯å¦å¯¹è‡ªèº«è¿›è¡Œäº†ä¿®æ”¹ã€‚dictåŒç†~~&lt;/p&gt;
&lt;p&gt;å¦å¤–åŠ é”çš„æ—¶é—´å¼€é”€å…¶å®è¿˜æ˜¯æŒºå¤§çš„ã€‚ä¸Šä¾‹ï¼Œæˆ‘ç”¨3ä¸ªçº¿ç¨‹(ç»“æœæ˜¯9000000)ï¼Œä¸åŠ é”1.38ç§’ï¼ŒåŠ é”æ‰§è¡Œ39.16ç§’(python2.7.11)ã€‚ä¸åŠ é”1.06ç§’ï¼ŒåŠ é”3.94ç§’(python3.5.1)ã€‚â†’_â†’å½“ç„¶ä½ å¯ä»¥æŠŠi+=1æ”¹æˆi.apped(1)è¿™æ ·ä¸ç”¨é”ç»“æœä¹Ÿèƒ½å¯¹äº†ï¼Œåªä¸è¿‡å†…å­˜æ¶ˆè€—æ„Ÿäºº&lt;/p&gt;
&lt;h3 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;a href=&quot;#å‚è€ƒèµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;/a&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://qingyunha.github.io/taotao/&quot;&gt;A Python Interpreter Written in Python&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;åˆšè½¬è¡Œç¬¬ä¸€æ¬¡ITé¢è¯•çš„æ—¶å€™é¢è¯•å®˜é—®æˆ‘ï¼Œlistå’Œdictæ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å½“æ—¶æˆ‘å°±æƒ³ï¼Œæ“¦å˜,ä½œä¸ºä¸€ä¸ªåˆå­¦è€…listå’Œdictä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„éƒ½çœ‹äº†Néå•¦ã€‚è¿™è¿˜æœ‰ç–‘é—®ä¹ˆ~~~ï¼Œç°åœ¨æƒ³æƒ³å¹¶æ²¡æœ‰æŠ“ä½é‡ç‚¹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://ficapy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>werkzeugæºç åˆ†æ(Request/Responseå’Œçƒ­é‡å¯)</title>
    <link href="http://ficapy.com/2016/07/25/werkzeug_note_requests_response_auto_realod/"/>
    <id>http://ficapy.com/2016/07/25/werkzeug_note_requests_response_auto_realod/</id>
    <published>2016-07-25T13:48:17.000Z</published>
    <updated>2016-07-25T14:42:34.000Z</updated>
    
    <content type="html">&lt;p&gt;Flaskè¿™ä¸ªäººäººç§°èµçš„å¾®æ¡†æ¶å°±æ˜¯æ„å»ºåœ¨werkzeugä¹‹ä¸Šï¼Œwerkzeugç»™è‡ªå·±çš„å®šä½å°±æ˜¯å·¥å…·é›†åˆã€‚å®ƒå®ç°äº†wsgi serverã€Requests/Responseå°è£…ã€DEBUGã€çƒ­é‡å¯ã€è·¯ç”±æ§åˆ¶ä»¥åŠå…¶ä»–çš„ä¸€äº›è¾…åŠ©åŠŸèƒ½ã€‚æ¥ä¸‹æ¥çš„å‡ ç¯‡æ–‡ç« ä¼šä»ä¸€äº›å¤§çš„æ–¹é¢å»åˆ†æå®ƒã€‚æœ¬ç¯‡å¦‚æ ‡é¢˜:D&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;WSGI-Server&quot;&gt;&lt;a href=&quot;#WSGI-Server&quot; class=&quot;headerlink&quot; title=&quot;WSGI Server&quot;&gt;&lt;/a&gt;WSGI Server&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªåˆç•¥è¯´ä¸€ä¸‹ã€‚å’Œå®ƒç›¸å…³çš„ä»£ç ä¸å¤šã€‚å’Œwsgirefä¸€æ ·å®ƒæ„å»ºåœ¨pythonè‡ªå¸¦æ¨¡å—SocketServerå’ŒBaseHTTPRequestHandlerä¹‹ä¸Šã€‚ç”šè‡³æ¯”è‡ªå¸¦çš„wsgirefä»£ç è¦å°‘ã€‚å®ƒä¸»è¦å¢åŠ äº†SSLå’Œsocket.fromfdæ”¯æŒã€‚å¹¶ä¸”å°†debugã€é™æ€æ–‡ä»¶åˆ†å‘ã€çƒ­é‡å¯ç»„åˆå†äº†ä¸€èµ·&lt;/p&gt;
&lt;h3 id=&quot;Requestã€Responseå°è£…&quot;&gt;&lt;a href=&quot;#Requestã€Responseå°è£…&quot; class=&quot;headerlink&quot; title=&quot;Requestã€Responseå°è£…&quot;&gt;&lt;/a&gt;Requestã€Responseå°è£…&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªå¯èƒ½ç®—æ˜¯é‡ç‚¹äº†ã€‚æœ‰ä¸ªåº“webobå°±æ˜¯ä¸“é—¨åšè¿™ä¸ªçš„ã€‚å å¾—ä»£ç é‡ä¹Ÿå¾ˆå¤§ã€‚å¯æƒœæˆ‘å¹¶ä¸æƒ³è¯¦ç»†å†™æ¯ä¸€ä¸ªçš„è¿‡ç¨‹ï¼Œå¤ªéº»çƒ¦äº†ï¼Œäº†è§£äº†å¤§æ¦‚å°±å¥½å•¦ã€‚ä»¥åä¼šä¸»è¦åˆ†æä¸‹datastructures.pyè¿™ä¸ªæ–‡ä»¶ã€‚ä¸‹é¢æ˜¯è¶…ç®€æ´çš„åŸç†ä»£ç &lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, env)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;pass&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;decorator&quot;&gt;    @classmethod&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(cls, f)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;decorator&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(env, start_response)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            request = cls(env)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; f(request)(env, start_response)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; decorator&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, str)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.body = str&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__call__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, env, start_response)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        start_response(&lt;span class=&quot;string&quot;&gt;&#39;200 OK&#39;&lt;/span&gt;, [])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [self.body]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;decorator&quot;&gt;@Request.application&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(req)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; Response(&lt;span class=&quot;string&quot;&gt;b&#39;Hello&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; wsgiref.simple_server &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; make_server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make_server(&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;8000&lt;/span&gt;, app).serve_forever()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å¯ä»¥å¤§æ¦‚äº†è§£æ˜¯è¿™ä¹ˆå›äº‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Requestå®ƒä¸»è¦å°è£…çš„æ˜¯headersï¼Œç„¶åå˜ï¼Œå„ç§å±æ€§éƒ½ç”¨propertyå°±å¥½äº†ï¼Œå‰©ä¸‹çš„bodyå’Œå…¶ä»–çš„ä¹Ÿå·®ä¸å¤šå•¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Responseå®ƒå°±æ˜¯ä¸€ä¸ªwsgiappå¯¹è±¡&lt;/code&gt;&lt;br&gt;çœ‹ä¸‹å®ƒä»¬2ä¸ªçš„ç»§æ‰¿å›¾&lt;br&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/werkzerg_wrappers_inherit.png&quot; alt=&quot;werkzeug.wrappers.inherit&quot;&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PlainRequest&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(StreamOnlyMixin, Request)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(BaseResponse, ETagResponseMixin, ResponseStreamMixin,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               CommonResponseDescriptorsMixin,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               WWWAuthenticateMixin)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
ç¿»æºç å¯ä»¥çœ‹åˆ°å®ƒä»¬çš„ç»§æ‰¿å¤§éƒ¨åˆ†éƒ½æ˜¯å¯¹headersçš„æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;çƒ­é‡å¯å®ç°åŸç†&quot;&gt;&lt;a href=&quot;#çƒ­é‡å¯å®ç°åŸç†&quot; class=&quot;headerlink&quot; title=&quot;çƒ­é‡å¯å®ç°åŸç†&quot;&gt;&lt;/a&gt;çƒ­é‡å¯å®ç°åŸç†&lt;/h3&gt;&lt;p&gt;ä¸Šç®€å›¾ï¼š&lt;br&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/werkzeug_autoreload.png&quot; alt=&quot;werkzeug_autoreload&quot;&gt;&lt;br&gt;ä¸ŠåŸç†ä»£ç :&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; os&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; subprocess&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; threading&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(&lt;span class=&quot;string&quot;&gt;&#39;Hello&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;file_change&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mtimes = &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        filename = __file__&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mtime = os.stat(filename).st_mtime&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        old_time = mtimes.get(filename)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; old_time &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mtimes[filename] = mtime&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;elif&lt;/span&gt; mtime &amp;gt; old_time:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            print(&lt;span class=&quot;string&quot;&gt;&#39; * Detected change in &amp;#123;&amp;#125;, reloading&#39;&lt;/span&gt;.format(filename))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sys.exit(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        time.sleep(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; os.environ.get(&lt;span class=&quot;string&quot;&gt;&#39;secord_process&#39;&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    threading.Thread(target=main, args=()).start()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    file_change()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        env = os.environ.copy()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        env[&lt;span class=&quot;string&quot;&gt;&#39;secord_process&#39;&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&#39;true&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        exit_code = subprocess.call([sys.executable] + sys.argv, env=env)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; exit_code != &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;åšæ³•å°±æ˜¯ä¸»çº¿ç¨‹å•¥äº‹æ²¡åšï¼Œè·‘ä¸€ä¸ªæ­»å¾ªç¯ï¼Œç”Ÿæˆå­è¿›ç¨‹(å°±ç›¸å½“è¿è¡Œè‡ªèº«,åŒºåˆ«å°±æ˜¯os.environ)ã€‚è¿™ä¸ªè¿›ç¨‹å†…ä½¿ç”¨å•ç‹¬çš„çº¿ç¨‹è·‘éœ€è¦è¿è¡Œçš„å‡½æ•°ï¼Œå¦å¤–å°±æ˜¯æ£€æŸ¥ç›¸å…³æ–‡ä»¶æ˜¯å¦è¢«æ”¹å˜ã€‚æ”¹å˜å°±æ‰§è¡Œsys.exitã€‚ç„¶åå°±åˆè¢«ä¸»çº¿ç¨‹çš„æ­»å¾ªç¯ç”Ÿæˆäº†æ–°çš„å­è¿›ç¨‹&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Flaskè¿™ä¸ªäººäººç§°èµçš„å¾®æ¡†æ¶å°±æ˜¯æ„å»ºåœ¨werkzeugä¹‹ä¸Šï¼Œwerkzeugç»™è‡ªå·±çš„å®šä½å°±æ˜¯å·¥å…·é›†åˆã€‚å®ƒå®ç°äº†wsgi serverã€Requests/Responseå°è£…ã€DEBUGã€çƒ­é‡å¯ã€è·¯ç”±æ§åˆ¶ä»¥åŠå…¶ä»–çš„ä¸€äº›è¾…åŠ©åŠŸèƒ½ã€‚æ¥ä¸‹æ¥çš„å‡ ç¯‡æ–‡ç« ä¼šä»ä¸€äº›å¤§çš„æ–¹é¢å»åˆ†æå®ƒã€‚æœ¬ç¯‡å¦‚æ ‡é¢˜:D&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://ficapy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>osx airdropæ— æ³•ä½¿ç”¨ä¿®å¤</title>
    <link href="http://ficapy.com/2016/07/23/fix_osx_airdrop_not_working/"/>
    <id>http://ficapy.com/2016/07/23/fix_osx_airdrop_not_working/</id>
    <published>2016-07-23T02:53:25.000Z</published>
    <updated>2016-07-24T08:27:21.000Z</updated>
    
    <content type="html">&lt;p&gt;å‰äº›å¤©ç”¨çš„å¥½å¥½çš„airdropå±…ç„¶æ— æ³•ä½¿ç”¨äº†ã€‚å…·ä½“æƒ…å†µæ˜¯ï¼šæˆ‘æœ‰iphoneã€ipadã€macã€‚iphoneå’Œipadèƒ½å¤Ÿäº’ç›¸å‘ç°ã€‚macå¯¹å®ƒä»¬2ä¸ªå‘ç°ä¸äº†ã€‚å¦ˆè›‹æ­£è¦ä¼ èµ„æ–™å¯æ€¥æ­»æˆ‘äº†ã€‚ç½‘ä¸Šä¸€æœè¿™ç§æƒ…å†µè¿˜ä¸åœ¨å°‘æ•°ã€‚&lt;/p&gt;
&lt;p&gt;é‡åˆ°è¿™ç§æƒ…å†µã€‚å¯ä»¥æ‰“å¼€about this macâ†’â†’system reportæŸ¥çœ‹Network(wifi)å¯ä»¥çœ‹åˆ°Country Code:æ˜¯ä¸æ˜¯CN(æˆ‘ç”µè„‘æœ‰é—®é¢˜çš„æ—¶å€™æ˜¯X3)ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆæ— æ³•ä½¿ç”¨airdropå°±å’Œå®ƒæœ‰å…³ã€‚è‡³äºå¦‚ä½•ä¿®å¤è¿™ä¸ªé—®é¢˜æˆ‘æ²¡æœ‰æ‰¾åˆ°ç¡®åˆ‡çš„åŠæ³•.æœ‰ä¸€ä¸ªåŸå› å¯èƒ½æ˜¯ç”±äºè·¯ç”±å™¨é€ æˆçš„ã€‚è¿™ä¸ªå¯ä»¥æ‰“å¼€ç³»ç»Ÿè‡ªå¸¦çš„æ— çº¿æ£€æµ‹å·¥å…·Wireless Diagnostics(Windowsâ†’â†’scan)æŸ¥çœ‹æ˜¯ä¸æ˜¯ç”±äºå›½å®¶ç å†²çªé€ æˆçš„(è¯¦æƒ…çœ‹ç¬¬ä¸€ä¸ªå‚è€ƒèµ„æ–™)ã€‚å¦‚æœè¿™é‡Œæ²¡æœ‰é—®é¢˜(æˆ‘çš„ä¸æ˜¯è¿™ä¸ªé—®é¢˜)ã€‚ã€‚ã€‚ã€‚ã€‚é‚£ä¹ˆè¯·å°è¯•æ‰§è¡Œä»¥ä¸‹æ“ä½œ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°†æ“ä½œç³»ç»Ÿçš„è¯­è¨€æ”¹æˆä¸­æ–‡&lt;/li&gt;
&lt;li&gt;åœ¨ç³»ç»Ÿè®¾ç½®é¡µé€€å‡ºicloudè´¦å·&lt;/li&gt;
&lt;li&gt;é‡å¯ç³»ç»Ÿ&lt;br&gt;ï¼š&lt;br&gt;ï¼š&lt;br&gt;å°¼ç›ï¼Œæœ‰å¯èƒ½å°±æš‚æ—¶èƒ½æ­£å¸¸ä½¿ç”¨äº†ãƒ¾(ï½¡ï½€Ğ”Â´ï½¡)&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;a href=&quot;#å‚è€ƒèµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;/a&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://www.howtogeek.com/211993/how-to-fix-conflicting-country-codes-and-improve-your-macs-wi-fi/&quot;&gt;how-to-fix-conflicting-country-codes-and-improve-your-macs-wi-fi&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://km.nicetypo.com/doc/7090786787135be8d32fa6624b892309&quot;&gt;è§£æ±ºç„¡æ³•å¾ iPhone AirDrop åˆ° Mac çš„æ–¹æ³•&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å‰äº›å¤©ç”¨çš„å¥½å¥½çš„airdropå±…ç„¶æ— æ³•ä½¿ç”¨äº†ã€‚å…·ä½“æƒ…å†µæ˜¯ï¼šæˆ‘æœ‰iphoneã€ipadã€macã€‚iphoneå’Œipadèƒ½å¤Ÿäº’ç›¸å‘ç°ã€‚macå¯¹å®ƒä»¬2ä¸ªå‘ç°ä¸äº†ã€‚å¦ˆè›‹æ­£è¦ä¼ èµ„æ–™å¯æ€¥æ­»æˆ‘äº†ã€‚ç½‘ä¸Šä¸€æœè¿™ç§æƒ…å†µè¿˜ä¸åœ¨å°‘æ•°ã€‚&lt;/p&gt;
&lt;p&gt;é‡åˆ°è¿™ç§æƒ…å†µã€‚å¯ä»¥æ‰“å¼€about this ma
    
    </summary>
    
    
      <category term="éšç¬”" scheme="http://ficapy.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>pycallgraphæºç åˆ†æ</title>
    <link href="http://ficapy.com/2016/07/22/pycallgraph_note/"/>
    <id>http://ficapy.com/2016/07/22/pycallgraph_note/</id>
    <published>2016-07-22T07:13:05.000Z</published>
    <updated>2016-07-22T13:41:06.000Z</updated>
    
    <content type="html">&lt;p&gt;ç”¨æ¥ç”Ÿæˆå‡½æ•°è°ƒç”¨å›¾ï¼Œè¿™ä¸ªå·¥å…·å¯èƒ½åæ°”æ¯”è¾ƒå¤§ã€‚å› ä¸ºçœ‹ä»‹ç»å°±èƒ½çœ‹åˆ°å¥½åƒå¯ä»¥ç”Ÿæˆæ¯”è¾ƒå¸…æ°”çš„å›¾åƒã€‚ä»æºç å±‚é¢çœ‹ã€‚å…¶å®è¿™ä¸ªå·¥å…·æ˜¯ç›¸å½“ç®€å•çš„ï¼Œå°±æ˜¯ä½¿ç”¨äº†sys.settraceæ¥å£,è¯¥æ¥å£å¸¸ç”¨äºdebugã€profile(æœ¬æ–‡ç¯å¢ƒpython3.5.1)ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;pycallgraphæ–‡ä»¶ç»“æ„&quot;&gt;&lt;a href=&quot;#pycallgraphæ–‡ä»¶ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;pycallgraphæ–‡ä»¶ç»“æ„&quot;&gt;&lt;/a&gt;pycallgraphæ–‡ä»¶ç»“æ„&lt;/h3&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;.&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; __init__.py&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; color.py                &amp;#26174;&amp;#31034;&amp;#39068;&amp;#33394;&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; config.py               &amp;#20027;&amp;#35201;&amp;#29992;&amp;#26469;&amp;#30830;&amp;#23450;&amp;#20351;&amp;#29992;&amp;#21738;&amp;#20123;&amp;#36807;&amp;#28388;&amp;#26041;&amp;#27861;&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; exceptions.py           &amp;#27809;&amp;#21861;&amp;#29992;&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; globbing_filter.py      &amp;#23601;&amp;#19968;&amp;#20010;fnmatch&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; memory_profiler.py      &amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; metadata.py&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; output                  output.py&amp;#26159;&amp;#22522;&amp;#31867;&amp;#65292;&amp;#20854;&amp;#20182;&amp;#20960;&amp;#20010;&amp;#26159;&amp;#20855;&amp;#20307;&amp;#36755;&amp;#20986;&amp;#26041;&amp;#24335;&amp;#10;&amp;#9474;&amp;#160;&amp;#160; &amp;#9500;&amp;#9472;&amp;#9472; __init__.py&amp;#10;&amp;#9474;&amp;#160;&amp;#160; &amp;#9500;&amp;#9472;&amp;#9472; gephi.py&amp;#10;&amp;#9474;&amp;#160;&amp;#160; &amp;#9500;&amp;#9472;&amp;#9472; graphviz.py&amp;#10;&amp;#9474;&amp;#160;&amp;#160; &amp;#9500;&amp;#9472;&amp;#9472; output.py&amp;#10;&amp;#9474;&amp;#160;&amp;#160; &amp;#9500;&amp;#9472;&amp;#9472; pickle.py&amp;#10;&amp;#9474;&amp;#160;&amp;#160; &amp;#9492;&amp;#9472;&amp;#9472; ubigraph.py&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; pycallgraph.py          &amp;#25972;&amp;#21512;config&amp;#21644;output&amp;#10;&amp;#9500;&amp;#9472;&amp;#9472; tracer.py               &amp;#26680;&amp;#24515;&amp;#25991;&amp;#20214;(&amp;#35843;&amp;#29992;sys.settrace&amp;#30340;&amp;#22320;&amp;#26041;)&amp;#10;&amp;#9492;&amp;#9472;&amp;#9472; util.py&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;è·å–å‡½æ•°è¢«å“ªäº›å‡½æ•°è°ƒç”¨&quot;&gt;&lt;a href=&quot;#è·å–å‡½æ•°è¢«å“ªäº›å‡½æ•°è°ƒç”¨&quot; class=&quot;headerlink&quot; title=&quot;è·å–å‡½æ•°è¢«å“ªäº›å‡½æ•°è°ƒç”¨&quot;&gt;&lt;/a&gt;è·å–å‡½æ•°è¢«å“ªäº›å‡½æ•°è°ƒç”¨&lt;/h3&gt;&lt;p&gt;æŸ¥çœ‹ä¸‹é¢çš„ç›¸å…³èµ„æ–™ã€‚æœ‰è¿™æ ·ä¸€æ®µä»£ç &lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; traceback&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    g()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; line &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; traceback.format_stack():&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(line.strip())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Prints:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# File &quot;so-stack.py&quot;, line 10, in &amp;lt;module&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#     f()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# File &quot;so-stack.py&quot;, line 4, in f&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#     g()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# File &quot;so-stack.py&quot;, line 7, in g&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#     for line in traceback.format_stack():&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å½“fè°ƒç”¨gçš„æ—¶å€™ã€‚åœ¨gé‡Œé¢æœ‰è°ƒç”¨äº†traceback.format_stackï¼Œå®ƒæ˜¾ç¤ºäº†å½“è°ƒç”¨å‡½æ•°gçš„æ—¶å€™çš„è°ƒç”¨è·¯å¾„ã€‚å®ç°å…¶å®æ˜¯æ¯”è¾ƒç®€å•çš„å˜›ã€‚å½“è°ƒç”¨gçš„æ—¶å€™ï¼Œå®ƒåœ¨æ ˆé¡¶ã€‚é‚£ä¹ˆåªéœ€è¦ä¸æ–­çš„è°ƒç”¨frame.f_backå°±èƒ½å¾—åˆ°ä¸Šä¸€ä¸ªæ ˆï¼Œå°±å¯ä»¥å¾—åˆ°ä»¥ä¸Šä¿¡æ¯ã€‚å¯ä»¥çœ‹å‡ºå®ƒå¾—åˆ°çš„æ˜¯å‡½æ•°è¢«è°ƒç”¨çš„ä¿¡æ¯ã€‚å‡å¦‚å‡½æ•°gè°ƒç”¨äº†å¾ˆå¤šåº•å±‚å‡½æ•°ï¼Œæ­¤æ—¶æˆ‘éœ€è¦è¿›è¡Œä¸€äº›patch hookï¼Œé‚£ä¹ˆè¦å¾—åˆ°æ˜¯å‡½æ•°gè°ƒç”¨äº†å“ªäº›åº•å±‚å‡½æ•°ï¼è¿™ç§æ–¹æ³•å°±æ²¡ç”¨äº†ã€‚å¥½åœ¨pythonæä¾›äº†sys.settrace&lt;/p&gt;
&lt;h3 id=&quot;sys-settraceåŸºæœ¬ä»‹ç»&quot;&gt;&lt;a href=&quot;#sys-settraceåŸºæœ¬ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;sys.settraceåŸºæœ¬ä»‹ç»&quot;&gt;&lt;/a&gt;sys.settraceåŸºæœ¬ä»‹ç»&lt;/h3&gt;&lt;p&gt;é¦–å…ˆå¾—å¯¹pythonè¿è¡Œçš„åŸºæœ¬æ¦‚å¿µæœ‰ä¸ªäº†è§£ï¼Œå‡½æ•°çš„è°ƒç”¨æ˜¯ä¸€ç§æ ˆç»“æ„ã€‚å½“å‡½æ•°è¢«è°ƒç”¨(è§¦å‘calläº‹ä»¶)çš„æ—¶å€™å½“å‰å¸§å…¥æ ˆï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•è¿”å›(è§¦å‘returnäº‹ä»¶)çš„æ—¶å€™æ ˆé¡¶çš„å¸§å‡ºæ ˆã€‚sys.settraceå°±æ˜¯å¯¹è¿™äº›äº‹ä»¶çš„hookã€‚çœ‹ä¸‹é¢è¿™æ®µä»£ç &lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;trace&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(frame, event, args,record=[])&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(frame.f_lineno, frame.f_code.co_filename, event)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; event == &lt;span class=&quot;string&quot;&gt;&#39;call&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        record.append(frame)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;elif&lt;/span&gt; event == &lt;span class=&quot;string&quot;&gt;&#39;return&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pre_frame = record.pop()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(pre_frame &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; frame)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; trace&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sys.settrace(trace)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; range(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; / i - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;except&lt;/span&gt; ZeroDivisionError:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;pass&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;main()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 11 /Users/ficapy/Dropbox/source_read/py3/settrace.py call&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 12 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 13 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 14 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 14 /Users/ficapy/Dropbox/source_read/py3/settrace.py exception&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 15 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 16 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 12 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 13 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 14 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 12 /Users/ficapy/Dropbox/source_read/py3/settrace.py line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 12 /Users/ficapy/Dropbox/source_read/py3/settrace.py return&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# True&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„çš„:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;traceå‡½æ•°æœ€åè®°å¾—è¿”å›è‡ªèº«&lt;/li&gt;
&lt;li&gt;ä¸éœ€è¦è€ƒè™‘å¤šçº¿ç¨‹é—®é¢˜ï¼Œå› ä¸ºsys.settraceåªå¯¹ä¸»çº¿ç¨‹æœ‰æ•ˆ(å¤šçº¿ç¨‹æ˜¯threading.settraceï¼Œå¤šè¿›ç¨‹æ²¡è¯•è¿‡)&lt;/li&gt;
&lt;li&gt;è¿˜æ˜¯è¦åºŸè¯ä¸€å¥ï¼Œå‘ç”Ÿreturnçš„æ—¶å€™frameä¸€å®šæ˜¯æœ€åä¸€ä¸ªcallçš„frameã€‚è¿™ä¹Ÿæ˜¯pycallgraphçš„è¿è¡Œçš„åŸºæœ¬æ¡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;è™½ç„¶traceæœ‰7ä¸ªäº‹ä»¶ã€‚å¯æ˜¯å¯¹äºæˆ‘ä»¬ç»˜åˆ¶è°ƒç”¨å›¾callã€returnå°±å¤Ÿäº†.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;pycallgraphåŸç†ç‰ˆæœ¬&quot;&gt;&lt;a href=&quot;#pycallgraphåŸç†ç‰ˆæœ¬&quot; class=&quot;headerlink&quot; title=&quot;pycallgraphåŸç†ç‰ˆæœ¬&quot;&gt;&lt;/a&gt;pycallgraphåŸç†ç‰ˆæœ¬&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; collections &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; defaultdict&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; pprint &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; pprint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; requests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call_dict = defaultdict(&lt;span class=&quot;keyword&quot;&gt;lambda&lt;/span&gt;: defaultdict(int))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;frame_stack = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;trace&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(frame, event, args)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; event == &lt;span class=&quot;string&quot;&gt;&#39;call&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        frame_stack.append(frame)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        call_dict[frame.f_back][frame] += &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; event == &lt;span class=&quot;string&quot;&gt;&#39;return&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; frame &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; frame_stack[-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            frame_stack.pop()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; trace&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sys.settrace(trace)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;requests.get(&lt;span class=&quot;string&quot;&gt;&#39;http://www.z.cn&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sys.settrace(&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pprint(call_dict)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# defaultdict(&amp;lt;function &amp;lt;lambda&amp;gt; at 0x10f282950&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#             &amp;#123;&amp;lt;frame object at 0x10f199448&amp;gt;: defaultdict(&amp;lt;class &#39;int&#39;&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                         &amp;#123;&amp;lt;frame object at 0x10f303848&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                          &amp;lt;frame object at 0x10f4f93d8&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                          &amp;lt;frame object at 0x10f985980&amp;gt;: 1&amp;#125;),&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                         :&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                         :&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                         :&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#              &amp;lt;frame object at 0x7fa6630a2018&amp;gt;: defaultdict(&amp;lt;class &#39;int&#39;&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                            &amp;#123;&amp;lt;frame object at 0x10fd1b8b8&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                             &amp;lt;frame object at 0x10fd2a9d0&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                             &amp;lt;frame object at 0x10fd2f908&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                             &amp;lt;frame object at 0x10fd32570&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                             &amp;lt;frame object at 0x10fd3fac8&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                             &amp;lt;frame object at 0x7fa662093cc8&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                             &amp;lt;frame object at 0x7fa6621ddc98&amp;gt;: 1,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#                                                             &amp;lt;frame object at 0x7fa6621e0468&amp;gt;: 1&amp;#125;)&amp;#125;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨æ¯ä¸ªå‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œå°†å½“å‰æ ˆå’Œä¸Šä¸€ä¸ªæ ˆå…³è”èµ·æ¥ã€‚æ‰€æœ‰çš„æ•°æ®æ±‡æ€»å°±å¾—åˆ°äº†requests.getçš„è°ƒç”¨å…³ç³»å›¾ã€‚ç„¶åå°±å¯ä»¥å…´å¥‹çš„å»ç”¨graphvizç”Ÿæˆå›¾ç‰‡~(â‰§â–½â‰¦)/~å•¦å•¦å•¦ï¼Œç›´æ¥è¿™æ ·å¤§æ¦‚å°±ç”Ÿæˆäº†ç±»ä¼¼ä¸‹é¢çš„å›¾ç‰‡&lt;br&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/a25f7e36gw1f62u6liqvqj21kw0awdjr.jpg&quot; alt=&quot;confusion_requests&quot;&gt;&lt;br&gt;çœ‹èµ·æ¥å¾ˆç‚«é…·ï¼Œå…¶å®å˜›ç”¨æ²¡æœ‰ï¼Œå‡ ç™¾ä¸ªå…ƒç´ çº¿æ¡ä¸€å¤§å †ï¼Œæ ¹æœ¬çªå‡ºä¸äº†é‡ç‚¹ã€‚&lt;strong&gt;&lt;code&gt;æ‰€ä»¥æ”¶é›†æ•°æ®æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œæœ€é‡è¦çš„æ˜¯è¿‡æ»¤æ•°æ®ï¼Œé‡ç‚¹çªå‡ºè‡ªå·±éœ€è¦çš„æ•°æ®&lt;/code&gt;&lt;/strong&gt;è¿™éƒ¨åˆ†åº”è¯¥ä¹Ÿæ˜¯pycallgraphçš„é‡ç‚¹è¦å¤„ç†çš„éƒ¨åˆ†(å¤„ç†çš„å¹¶ä¸å¥½)ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è¿‡æ»¤ä¸éœ€è¦å…³æ³¨çš„å‡½æ•°&quot;&gt;&lt;a href=&quot;#è¿‡æ»¤ä¸éœ€è¦å…³æ³¨çš„å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;è¿‡æ»¤ä¸éœ€è¦å…³æ³¨çš„å‡½æ•°&quot;&gt;&lt;/a&gt;è¿‡æ»¤ä¸éœ€è¦å…³æ³¨çš„å‡½æ•°&lt;/h3&gt;&lt;p&gt;æ¯”å¦‚ä¸€ä¸ªå‡½æ•°æˆ‘ä»¬ä¸éœ€è¦å…³æ³¨ã€‚é‚£ä¹ˆå½“calläº‹ä»¶çš„æ—¶å€™æˆ‘ä»¬åªéœ€è¦ä¸æŠŠå®ƒåŠ å…¥åˆ°call_dictä¸­ã€‚åŒæ—¶å°†å½“å‰æ ˆé•¿åº¦è®¾ç½®ä¸ºæœ€å¤§é•¿åº¦ã€‚é‚£ä¹ˆè¯¥å‡½æ•°å’Œè¢«è¯¥å‡½æ•°è°ƒç”¨çš„å‡½æ•°éƒ½ä¸ä¼šè¢«æˆ‘ä»¬è®°å½•ã€‚pycallgraphçš„åšæ³•æ˜¯:ä¸åŠ å…¥åˆ°call_dictï¼Œåªæ˜¯å¯¹frame_stackåˆ—è¡¨åŠ å…¥ä¸€ä¸ªç©ºå€¼ã€‚returnäº‹ä»¶ä¹Ÿåªæ˜¯ç®€å•çš„popç§»å‡º(è¿™æ ·é€ æˆçš„ç»“æœå°±æ˜¯è¯¥å‡½æ•°ä¸è¢«è®°å½•ï¼Œå¯æ˜¯è¯¥è¢«è¯¥å‡½æ•°è°ƒç”¨çš„å…¶ä»–å‡½æ•°åªè¦ä¸è¢«è§„åˆ™è¿‡æ»¤å°±ä¼šè¢«è®°å½•)&lt;br&gt;é€šå¸¸è¿‡æ»¤çš„æ¡ä»¶ä¼šæœ‰:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†…ç½®æ¨¡å—&lt;/li&gt;
&lt;li&gt;ç§æœ‰å‡½æ•°&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚ä¸€äº›åº“æœ‰compat.pyã€datastructers.pyã€exceptions.pyã€utils.pyè¿™äº›æ¨¡å—å¸¸ä¼šè¢«å¼•ç”¨ã€‚å¯æ˜¯å¯¹äº†è§£æ•´ä¸ªè¿‡ç¨‹å¹¶æ²¡æœ‰ä»€ä¹ˆå¸®åŠ©ã€‚åè€Œä¼šå¯¼è‡´ç”Ÿæˆçš„å›¾å¾ˆæ··ä¹±&lt;/li&gt;
&lt;li&gt;æŸäº›åº“è™½ç„¶è¢«å¼•ç”¨å¤ªå¤šæ¬¡ä¹Ÿè¯¥è¢«åˆ é™¤&lt;br&gt;æ€»ä¹‹å°±æ˜¯æ ¹æ®éœ€è¦å…³æ³¨çš„åœ°æ–¹å†™è¿‡æ»¤è§„åˆ™ï¼Œç”Ÿæˆåˆé€‚çš„å›¾~~&lt;br&gt;æ¯”å¦‚è¿™æ ·ã€‚ã€‚ã€‚ã€‚requests.getçš„&lt;br&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/requests_get.png&quot; alt=&quot;requests_get&quot;&gt;&lt;br&gt;æ³¨æ„åˆ°è¿™é‡Œæœ‰ç»„(æ ¹æ®å•ä¸ªæ¨¡å—åˆ†)ï¼Œå®ç°çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ã€‚å¯ä»¥æŸ¥çœ‹æˆ‘å†™çš„ç²¾ç®€ç‰ˆçš„pycallgraph.&lt;a href=&quot;https://gist.github.com/Ficapy/a2601d44b1492c228732178e1bb3eb5e&quot;&gt;https://gist.github.com/Ficapy/a2601d44b1492c228732178e1bb3eb5e&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;å¤šçº¿ç¨‹ç‰ˆ&quot;&gt;&lt;a href=&quot;#å¤šçº¿ç¨‹ç‰ˆ&quot; class=&quot;headerlink&quot; title=&quot;å¤šçº¿ç¨‹ç‰ˆ&quot;&gt;&lt;/a&gt;å¤šçº¿ç¨‹ç‰ˆ&lt;/h3&gt;&lt;p&gt;å› ä¸ºç›®å‰æ²¡æœ‰ç”¨æ¥åˆ†æå¤šçº¿ç¨‹ç¨‹åºï¼Œæ‰€ä»¥åªæ˜¯å¤§æ¦‚äº†è§£äº†ä¸€ä¸‹ã€‚&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; threading&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; random&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;trace&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(frame, event, args,record=[])&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; event == &lt;span class=&quot;string&quot;&gt;&#39;call&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        record.append(frame)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;elif&lt;/span&gt; event == &lt;span class=&quot;string&quot;&gt;&#39;return&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pre_frame = record.pop()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(pre_frame &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; frame)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; trace&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;threading.settrace(trace)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    time.sleep(random.random())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; range(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    threading.Thread(target=main).start()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# True&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# True&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# True&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å¯ä»¥çœ‹åˆ°ç¨æœ‰åŒºåˆ«ï¼Œå› ä¸ºå®ƒæœ‰å¤šä¸ªæ ˆï¼Œæ‰€ä»¥æ— æ³•åƒå•ä¸ªé‚£æ ·ç”¨ä¸€ä¸ªåˆ—è¡¨å°±æ·»åŠ ã€å–å‡ºå°±èƒ½æå®šã€‚å¯èƒ½ä»¥åæœ‰éœ€è¦æˆ‘ä¼šæ·»åŠ ä¸Šçº¿ç¨‹æ”¯æŒ&lt;/p&gt;
&lt;h3 id=&quot;pycallgraphç¼ºé™·&quot;&gt;&lt;a href=&quot;#pycallgraphç¼ºé™·&quot; class=&quot;headerlink&quot; title=&quot;pycallgraphç¼ºé™·&quot;&gt;&lt;/a&gt;pycallgraphç¼ºé™·&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ›´æ–°ç¼“æ…¢ï¼Œmasterç‰ˆæœ¬æ˜¯3å¹´å‰çš„ï¼æ–‡æ¡£ä¹Ÿæ˜¯&lt;/li&gt;
&lt;li&gt;è®¾ç½®é¡¹æœ‰threaded.æçš„æ˜¯çº¿ç¨‹å®‰å…¨ï¼sys.settraceåœ¨ä¸»çº¿ç¨‹æ˜¯æ²¡æœ‰çº¿ç¨‹é—®é¢˜ã€‚æˆ‘éƒ½æ²¡æœ‰æƒ³æ˜ç™½å†™çº¿ç¨‹è¿™æ®µæ˜¯å¹²å•¥å­ç”¨çš„&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰çªå‡ºè¿‡æ»¤çš„é‡è¦æ€§&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://docs.python.org/3/library/sys.html#sys.settrace&quot;&gt;å®˜ç½‘sys.settrace&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://tech.uc.cn/?p=1932&quot;&gt;pythonç¨‹åºçš„æ‰§è¡ŒåŸç†&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=YIhGbFW985c&quot;&gt;PYCON-Dmitry Trofimov - Python Debugger Uncovered&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/1156023/print-current-call-stack-from-a-method-in-python-code&quot;&gt;Print current call stack from a method in Python code&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000000356018&quot;&gt;å¸¸ç”¨çš„pythonè°ƒè¯•å·¥å…·&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.jianshu.com/p/e44885a777f0&quot;&gt;graphviz dotè¯­è¨€å­¦ä¹ ç¬”è®°&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/ionelmc/python-hunter&quot;&gt;Github_python-hunter&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/alonho/pytrace&quot;&gt;Github_pytrace&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ç”¨æ¥ç”Ÿæˆå‡½æ•°è°ƒç”¨å›¾ï¼Œè¿™ä¸ªå·¥å…·å¯èƒ½åæ°”æ¯”è¾ƒå¤§ã€‚å› ä¸ºçœ‹ä»‹ç»å°±èƒ½çœ‹åˆ°å¥½åƒå¯ä»¥ç”Ÿæˆæ¯”è¾ƒå¸…æ°”çš„å›¾åƒã€‚ä»æºç å±‚é¢çœ‹ã€‚å…¶å®è¿™ä¸ªå·¥å…·æ˜¯ç›¸å½“ç®€å•çš„ï¼Œå°±æ˜¯ä½¿ç”¨äº†sys.settraceæ¥å£,è¯¥æ¥å£å¸¸ç”¨äºdebugã€profile(æœ¬æ–‡ç¯å¢ƒpython3.5.1)ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://ficapy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>pyenvä½¿ç”¨é•œåƒåŠ é€Ÿ</title>
    <link href="http://ficapy.com/2016/07/15/pyenv_use_mirror/"/>
    <id>http://ficapy.com/2016/07/15/pyenv_use_mirror/</id>
    <published>2016-07-15T00:57:02.000Z</published>
    <updated>2016-07-15T01:42:56.000Z</updated>
    
    <content type="html">&lt;p&gt;ä½¿ç”¨&lt;code&gt;pyenv install 3.5.0&lt;/code&gt;çš„æ—¶å€™ç›´æ¥å»python.orgå®˜ç½‘ä¸‹è½½æºç è¿›è¡Œç¼–è¯‘ã€‚é€Ÿåº¦å‡ kbæ¯ç§’æ…¢åˆ°æ— æ³•è‡ªç†ã€‚æ— å¥ˆç”¨ä»£ç†é€Ÿåº¦ä¹Ÿä¸æ€ä¹ˆæ ·ã€‚å†å…¶æ¬¡è¯¥é¡¹ç›®çš„ä½œè€…æ˜¯è‡ªå·±å†™äº†ä¸€ä¸ª&lt;a href=&quot;https://github.com/yyuu/yyuu.github.com&quot;&gt;pyenvé•œåƒé¡¹ç›®&lt;/a&gt;çš„ï¼Œåªå¯æƒœæ›´æ–°é¢‘ç‡è¿œä¸å¦‚pyenvã€‚å¯¼è‡´å®‰è£…ä¸€äº›æ–°çš„ç‰ˆæœ¬æ— æ³•ä½¿ç”¨å…¬å…±ä»£ç†&lt;/p&gt;
&lt;p&gt;å¦‚æœå®‰è£…2.7.6ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨å›½å†…ä¸ƒç‰›çš„é•œåƒã€‚é¡¹ç›®åœ°å€&lt;a href=&quot;http://pyenv.qiniudn.com/pythons/&quot;&gt;http://pyenv.qiniudn.com/pythons/&lt;/a&gt;ã€‚æ‰§è¡Œ&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export PYTHON_BUILD_MIRROR_URL=&amp;#34;http://pyenv.qiniudn.com/pythons/&amp;#34;&amp;#10;pyenv install 2.7.6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å°±ä¼šä½¿ç”¨ä¸ƒç‰›é•œåƒè¿›è¡Œä¸‹è½½é€Ÿåº¦éå¸¸å¿«ã€‚&lt;br&gt;ç¼ºç‚¹å°±æ˜¯é™¤äº†ç½‘é¡µä¸Šçš„ä¸€äº›ç‰ˆæœ¬ã€‚å…¶ä»–çš„éƒ½ä¸æ”¯æŒäº†ã€‚ä¸ƒç‰›æ²¡æœ‰å¯¹è¿™ä¸ªé¡¹ç›®è¿›è¡Œæ›´æ–°&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ç”¨è¿…é›·æˆ–è€…å…¶ä»–å¯ç”¨çš„å¿«é€Ÿçš„æ–¹æ³•æŠŠpythonæºç ä¸‹è½½åˆ°æœ¬åœ°ã€‚è‡ªå·±å¼€å¯ä¸€ä¸ªé•œåƒç»™è‡ªå·±ç”¨ã€‚è¿™æ ·å°±å¥½äº†ã€‚æ¯”å¦‚æ‰§è¡Œ&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ficapy@L ~&amp;#62; pyenv install 3.5.0                                                                                                                                                                           &amp;#10;Downloading Python-3.5.0.tgz...&amp;#10;-&amp;#62; https://www.python.org/ftp/python/3.5.0/Python-3.5.0.tgz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åæŠŠ&lt;code&gt;https://www.python.org/ftp/python/3.5.0/Python-3.5.0.tgz&lt;/code&gt;ä¸‹è½½åˆ°æœ¬åœ°ã€‚&lt;br&gt;å†è®¾ç½®é•œåƒåœ°å€&lt;code&gt;export PYTHON_BUILD_MIRROR_URL=&amp;quot;http://127.0.0.1:8000/&amp;quot;&lt;/code&gt;&lt;br&gt;åˆ°ä¸‹è½½åœ°å€æ‰§è¡Œ&lt;code&gt;python3 -m http.server&lt;/code&gt;&lt;br&gt;å†æ¬¡æ‰§è¡Œ&lt;code&gt;pyenv install 3.5.0&lt;/code&gt;å‘ç°è¿˜æ˜¯ä»å®˜ç½‘ä¸‹è½½ã€‚ä¸è¿‡æ­¤æ—¶æŸ¥çœ‹http.serverä¸Šæœ‰ä¸€æ¡HEADè¯·æ±‚æ—¥å¿—ã€‚-_-å‘ç°ä¸æ˜¯ç›´æ¥è¯·é—®çš„æ–‡ä»¶åï¼Œè€Œæ˜¯ä¸€ä¸ª64ä½çš„å­—ç¬¦ã€‚å°†ä¸‹è½½çš„æ–‡ä»¶åä¿®æ”¹æˆé‚£64ä½å­—ç¬¦ã€‚åœ¨æ‰§è¡Œå°±okäº†~~&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä½¿ç”¨&lt;code&gt;pyenv install 3.5.0&lt;/code&gt;çš„æ—¶å€™ç›´æ¥å»python.orgå®˜ç½‘ä¸‹è½½æºç è¿›è¡Œç¼–è¯‘ã€‚é€Ÿåº¦å‡ kbæ¯ç§’æ…¢åˆ°æ— æ³•è‡ªç†ã€‚æ— å¥ˆç”¨ä»£ç†é€Ÿåº¦ä¹Ÿä¸æ€ä¹ˆæ ·ã€‚å†å…¶æ¬¡è¯¥é¡¹ç›®çš„ä½œè€…æ˜¯è‡ªå·±å†™äº†ä¸€ä¸ª&lt;a href=&quot;https://github.com/yyuu/
    
    </summary>
    
    
      <category term="python" scheme="http://ficapy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>pythonæè¿°ç¬¦åº”ç”¨</title>
    <link href="http://ficapy.com/2016/07/10/python_descriptor/"/>
    <id>http://ficapy.com/2016/07/10/python_descriptor/</id>
    <published>2016-07-10T09:13:43.000Z</published>
    <updated>2016-07-27T01:34:35.000Z</updated>
    
    <content type="html">&lt;p&gt;ä¸ªäººè®¤ä¸ºpythonä¸­æè¿°ç¬¦åè®®æ˜¯ä¸€ä¸ªæ¯”è¾ƒç¥å¥‡çš„å­˜åœ¨ï¼Œæ˜¯å› ä¸ºå¦‚æœä½ ä¸å»äº†è§£propertyçš„å†…éƒ¨å®ç°ï¼Œæ²¡æœ‰æ·±ç©¶åˆ«äººå†™çš„__set__ã€__get__æ–¹æ³•ã€‚æˆ–è®¸å†™pythonå¾ˆå¤šå¹´éƒ½å¯¹è¿™ä¸ªä¸œè¥¿æ²¡ä»€ä¹ˆäº†è§£ã€‚ç„¶è€Œè¿™ç©æ„å„¿æœ‰æ—¶å€™çœŸçš„æŒºå¥½ç”¨çš„ã€‚æœ¬æ–‡ä¸ä¼šè¯¦è¿°æè¿°ç¬¦åè®®ã€‚ä¼šç€é‡è®²ä¸€ä¸ªå°ä¾‹å­ã€‚å¦‚æœä»¥å‰æ²¡æœ‰æ¥è§¦è¿‡æè¿°ç¬¦ï¼Œè¯·ä¾æ¬¡æŸ¥çœ‹æ–‡æœ«ç›¸å…³èµ„æ–™çš„ä¸¤ç¯‡æ–‡ç« &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;é€‚ç”¨èŒƒå›´&quot;&gt;&lt;a href=&quot;#é€‚ç”¨èŒƒå›´&quot; class=&quot;headerlink&quot; title=&quot;é€‚ç”¨èŒƒå›´&quot;&gt;&lt;/a&gt;é€‚ç”¨èŒƒå›´&lt;/h3&gt;&lt;p&gt;æè¿°ç¬¦åè®®éƒ½æ˜¯é’ˆå¯¹å¯¹è±¡å±æ€§çš„è®¿é—®ã€‚å…ˆè¦æ˜ç™½æˆ‘ä»¬ä¸ä¼šå»é’ˆå¯¹ä¸€ä¸ªå…¨å±€çš„defä½¿ç”¨propertyè¿›è¡Œè£…é¥°ã€‚æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯åœ¨ç±»é‡Œé¢ä½¿ç”¨ã€‚å¯ä»¥å¯¹ç±»çš„è®¿é—®ä½¿ç”¨æè¿°ç¬¦(æ¯”è¾ƒå°‘ç”¨)ï¼Œæ›´å¸¸ç”¨çš„æ˜¯é’ˆå¯¹ç±»å®ä¾‹çš„è®¿é—®ä½¿ç”¨æè¿°ç¬¦åè®®&lt;/p&gt;
&lt;h3 id=&quot;èµ„æ–™æè¿°ç¬¦å’Œéèµ„æ–™æè¿°ç¬¦çš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#èµ„æ–™æè¿°ç¬¦å’Œéèµ„æ–™æè¿°ç¬¦çš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;èµ„æ–™æè¿°ç¬¦å’Œéèµ„æ–™æè¿°ç¬¦çš„åŒºåˆ«&quot;&gt;&lt;/a&gt;èµ„æ–™æè¿°ç¬¦å’Œéèµ„æ–™æè¿°ç¬¦çš„åŒºåˆ«&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;RevealAccess&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(object)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__get__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, obj, objtype)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; self.val&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;except&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;error&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# def __set__(self, obj, val):&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#     self.val = val&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;MyClass&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(object)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    x = RevealAccess()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;m = MyClass()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(m.x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;m.x = &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(m.__dict__)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;m.__dict__[&lt;span class=&quot;string&quot;&gt;&#39;x&#39;&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(m.__dict__)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(m.x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(m.__class__ &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; type(m))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é¦–å…ˆï¼Œå½“å¯¹å±æ€§xè¿›è¡Œè®¿é—®çš„æ—¶å€™ä¸æ˜¯ç›´æ¥è¿”å›æè¿°ç¬¦å¯¹è±¡ï¼Œè€Œæ˜¯æŒ‰ç…§æè¿°ç¬¦è§„åˆ™æ‰§è¡Œäº†æè¿°ç¬¦å¯¹è±¡çš„__get__ç­‰æ–¹æ³•ï¼èµ„æ–™æè¿°ç¬¦å°±æ˜¯åŒæ—¶å®ç°äº†__get__å’Œ__set__ï¼ŒåŒºåˆ«å°±æ˜¯æ˜¯èµ„æ–™æè¿°ç¬¦çš„æ—¶å€™å°±æŒ‰ç…§èµ„æ–™æè¿°ç¬¦çš„__get__ã€__set__æ¥ã€‚éèµ„æ–™æè¿°ç¬¦çš„æ—¶å€™é‚£å°±å…ˆè®¿é—®&lt;code&gt;instance.__dict__[&amp;#39;x&amp;#39;]&lt;/code&gt;ï¼Œæ²¡æœ‰å°±åœ¨æŒ‰ç…§éèµ„æ–™æè¿°ç¬¦çš„__get__æ¥ã€‚ä¸Šé¢çš„ä¾‹å­å…ˆæ³¨é‡Šæ‰__set__å°±æ˜¯éèµ„æ–™æè¿°ç¬¦ï¼Œå¯¹å®ä¾‹å±æ€§è¿›è¡Œè®¿é—®çš„æ—¶å€™å…ˆè®¿é—®äº†instance.__dict__æ²¡æœ‰å°±ä½¿ç”¨äº†æè¿°ç¬¦å¯¹è±¡çš„__get__æ–¹æ³•ã€‚å½“ä¸ºèµ„æ–™æè¿°ç¬¦çš„æ—¶å€™çºµç„¶å¯¹instance.__dict__è®¾ç½®äº†ã€‚ä¾ç„¶ä¼šè°ƒç”¨æè¿°ç¬¦å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç¤ºä¾‹åº”ç”¨-propertyåŠ å¼ºç‰ˆï¼Œå¢åŠ ç¼“å­˜-æœ€ç®€ä»£ç &quot;&gt;&lt;a href=&quot;#ç¤ºä¾‹åº”ç”¨-propertyåŠ å¼ºç‰ˆï¼Œå¢åŠ ç¼“å­˜-æœ€ç®€ä»£ç &quot; class=&quot;headerlink&quot; title=&quot;ç¤ºä¾‹åº”ç”¨:propertyåŠ å¼ºç‰ˆï¼Œå¢åŠ ç¼“å­˜(æœ€ç®€ä»£ç )&quot;&gt;&lt;/a&gt;ç¤ºä¾‹åº”ç”¨:propertyåŠ å¼ºç‰ˆï¼Œå¢åŠ ç¼“å­˜(æœ€ç®€ä»£ç )&lt;/h3&gt;&lt;p&gt;é¦–å…ˆæ¥ä¸€ä¸ªä¾‹å­&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(object)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;decorator&quot;&gt;    @property&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;jammy&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self,_cache=&amp;#123;&amp;#125;)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;result&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; _cache:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; _cache[&lt;span class=&quot;string&quot;&gt;&#39;result&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(&lt;span class=&quot;string&quot;&gt;&#39;jammy called&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _cache.update(&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;result&#39;&lt;/span&gt;:result&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f = Foo()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(f.jammy)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(f.jammy)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;è¯¥æ–¹æ³•ä½¿ç”¨pythonå‡½æ•°çš„é»˜è®¤å‚æ•°åªåˆå§‹åŒ–ä¸€æ¬¡å¯¹ç»“æœè¿›è¡Œç¼“å­˜ã€‚ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ã€‚1.æ— æ³•å¤ç”¨ã€‚2.å¯¹åŸå‡½æ•°è¿›è¡Œäº†ä¿®æ”¹&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çœ‹pyramidçš„å®ç°&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;reify&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(object)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, func)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.func = func&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__get__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, obj, cls)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        value = obj.__dict__[self.func.__name__] = self.func(obj)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(object)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;decorator&quot;&gt;    @reify&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;jammy&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(&lt;span class=&quot;string&quot;&gt;&#39;jammy called&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f = Foo()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(f.jammy)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(f.jammy)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;ä½¿ç”¨çš„æ˜¯éèµ„æ–™æè¿°ç¬¦ï¼Œç¬¬ä¸€æ¬¡å¯¹å±æ€§è¿›è¡Œè®¿é—®çš„æ—¶å€™ï¼Œå› ä¸ºf.__dict__æ˜¯æ²¡æœ‰jammyçš„ã€‚æ•…è€Œè®¿é—®äº†æè¿°ç¬¦ï¼Œåœ¨æè¿°ç¬¦__get__é‡Œé¢å°†ç»“æœåŠ å…¥åˆ°äº†f.__dict__é‡Œé¢ã€‚åé¢è®¿é—®å°±æ²¡__get__ä»€ä¹ˆäº‹å„¿äº†ã€‚å®ç°äº†å¯¹ç»“æœçš„ç¼“å­˜&lt;/p&gt;
&lt;p&gt;å†çœ‹werkzeugçš„å®ç°&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;cached_property&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(property)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, func, name=None, doc=None)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.__name__ = func.__name__&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.func = func&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__set__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, obj, value)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        obj.__dict__[self.__name__] = value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__get__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, obj, type=None)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        value = obj.__dict__.get(self.__name__)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; value &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            value = self.func(obj)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            obj.__dict__[self.__name__] = value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(object)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;decorator&quot;&gt;    @cached_property&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;jammy&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(&lt;span class=&quot;string&quot;&gt;&#39;jammy called&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f = Foo()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(f.jammy)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(f.jammy)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å¯ä»¥çœ‹åˆ°å’Œèµ„æ–™æè¿°ç¬¦çš„åŸºæœ¬ä¸€æ ·ã€‚å¯ä»¥çœ‹åˆ°__set__åŸºæœ¬æ²¡ä»€ä¹ˆç”¨ï¼Œä»…ä»…åªæ˜¯è¡¨é¢äº†è¿™æ˜¯ä¸€ä¸ªèµ„æ–™æè¿°ç¬¦ã€‚è€Œä¸”åŒæ ·çš„ï¼Œä¸ºäº†æ–¹ä¾¿ä¹Ÿä¸€æ ·æŠŠç»“æœå­˜å‚¨åˆ°äº†f.__dict__é‡Œé¢&lt;/p&gt;
&lt;p&gt;å†åŠ ä¸€ä¸ªç±»ä¼¼çš„ä¾‹å­å§O_o(&lt;a href=&quot;https://github.com/faif/python-patterns/blob/master/lazy_evaluation.py&quot;&gt;https://github.com/faif/python-patterns/blob/master/lazy_evaluation.py&lt;/a&gt;)&lt;/p&gt;
&lt;h3 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://harveyqing.gitbooks.io/python-read-and-write/content/python_advance/python_descriptor.html&quot;&gt;pythonå®˜æ–¹æ–‡æ¡£æè¿°ç¬¦æŒ‡å—(è¯‘)&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.geekfan.net/7862/&quot;&gt;pythonæè¿°ç¬¦è§£å¯†&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ªäººè®¤ä¸ºpythonä¸­æè¿°ç¬¦åè®®æ˜¯ä¸€ä¸ªæ¯”è¾ƒç¥å¥‡çš„å­˜åœ¨ï¼Œæ˜¯å› ä¸ºå¦‚æœä½ ä¸å»äº†è§£propertyçš„å†…éƒ¨å®ç°ï¼Œæ²¡æœ‰æ·±ç©¶åˆ«äººå†™çš„__set__ã€__get__æ–¹æ³•ã€‚æˆ–è®¸å†™pythonå¾ˆå¤šå¹´éƒ½å¯¹è¿™ä¸ªä¸œè¥¿æ²¡ä»€ä¹ˆäº†è§£ã€‚ç„¶è€Œè¿™ç©æ„å„¿æœ‰æ—¶å€™çœŸçš„æŒºå¥½ç”¨çš„ã€‚æœ¬æ–‡ä¸ä¼šè¯¦è¿°æè¿°ç¬¦åè®®ã€‚ä¼šç€é‡è®²ä¸€ä¸ªå°ä¾‹å­ã€‚å¦‚æœä»¥å‰æ²¡æœ‰æ¥è§¦è¿‡æè¿°ç¬¦ï¼Œè¯·ä¾æ¬¡æŸ¥çœ‹æ–‡æœ«ç›¸å…³èµ„æ–™çš„ä¸¤ç¯‡æ–‡ç« &lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://ficapy.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>wsgirefæºç é˜…è¯»</title>
    <link href="http://ficapy.com/2016/07/04/2016-07-04/"/>
    <id>http://ficapy.com/2016/07/04/2016-07-04/</id>
    <published>2016-07-04T09:32:07.000Z</published>
    <updated>2016-07-04T09:38:55.000Z</updated>
    
    <content type="html">&lt;pre&gt;&lt;code&gt; _ _ _ ____ ____ _ ____ ____ ____    _ _  _ _  _ ____ ____ _ ___
 | | | [__  | __ | |__/ |___ |___    | |\ | |__| |___ |__/ |  |
 |_|_| ___] |__] | |  \ |___ |       | | \| |  | |___ |  \ |  |
+--------------------------+     +---------------------------------+
|    wsgiref.WSGIServer    |     |   wsgiref.WSGIRequestHandler    |
+--------------------------+     +---------------------------------+
              |
+-------------v------------+    +------------------------------------+
|  http.server.HTTPServer  |    | http.server.BaseHTTPRequestHandler |
+--------------------------+    +------------------------------------+

+--------------------------+    +------------------------------------+
|  socketserver.TCPServer  |    | socketserver.StreamRequestHandler  |
+--------------------------+    +------------------------------------+
                                        overload handle logic

Created with Monodraw
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;dd&quot;&gt;&lt;a href=&quot;#dd&quot; class=&quot;headerlink&quot; title=&quot;dd&quot;&gt;&lt;/a&gt;dd&lt;/h2&gt;</content>
    
    <summary type="html">
    
      &lt;pre&gt;&lt;code&gt; _ _ _ ____ ____ _ ____ ____ ____    _ _  _ _  _ ____ ____ _ ___
 | | | [__  | __ | |__/ |___ |___    | |\ | |__| |___ |__/ |  |

    
    </summary>
    
      <category term="æºç è§£æ" scheme="http://ficapy.com/categories/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>http.serveræºç é˜…è¯»</title>
    <link href="http://ficapy.com/2016/07/02/http_server_note/"/>
    <id>http://ficapy.com/2016/07/02/http_server_note/</id>
    <published>2016-07-02T09:07:20.000Z</published>
    <updated>2016-07-02T10:19:40.000Z</updated>
    
    <content type="html">&lt;p&gt;ä¸Šä¸€ç« è®²SocketServeræ¨¡å—ï¼Œå®ƒå°†æœåŠ¡ç«¯æ ¹æ®ç›‘å¬å¥—æ¥å­—å’Œè¿æ¥å¥—æ¥å­—åˆ†ä¸ºäº†2ä¸ªéƒ¨åˆ†(BaseServer/BaseRequestHandler)ï¼Œè€Œè¿æ¥å¥—æ¥å­—ç±»çš„å¤„ç†æ–¹æ³•ç›¸å½“ç®€å•ï¼Œæœ€ç»ˆæ˜¯ä¸€ä¸ªhandleå‡½æ•°å°±æå®šäº†ã€‚http.serverè¿™ä¸ªæ¨¡å—ä¸»è¦ç±»BaseHTTPRequestHandleç»§æ‰¿è‡ªBaseRequestHandle,å¯¹handleè¿›è¡Œäº†ä¸€ç‚¹ç‚¹çš„åŠ å¼ºï¼Œä¸»è¦å°±æ˜¯å¯¹httpåè®®è¿›è¡Œäº†ç®€å•çš„è§£æå·¥ä½œ(æºç ç‰ˆæœ¬Python3.5)&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;å…ˆä¸Šå›¾ä¸ºæ•¬:D&lt;br&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/httpserver_note.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;è¿™ä¸ªæ¨¡å—åªéœ€è¦å…³å¿ƒBaseHTTPRequestHandlerç±»ï¼Œå…¶å®é‡Œé¢è¿˜æœ‰ä¸ªCGIå¤„ç†ç±»ï¼Œä¸è¿‡è¿™ç©æ„å„¿ä¼°è®¡ä¹Ÿæ˜¯ä¸Šå¤ç¥å…½äº†ã€‚æ²¡å…³æ³¨çš„å¿…è¦ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä»£ç è§£è¯»&quot;&gt;&lt;a href=&quot;#ä»£ç è§£è¯»&quot; class=&quot;headerlink&quot; title=&quot;ä»£ç è§£è¯»&quot;&gt;&lt;/a&gt;ä»£ç è§£è¯»&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ”¯æŒhttpç‰ˆæœ¬0.9ã€1.0ã€1.1ï¼ŒåŒºåˆ«å°±æ˜¯0.9ç‰ˆæœ¬åªæœ‰bodyã€‚1.1ç‰ˆæœ¬æ˜¾å¼æ”¯æŒkeep-aliveã€‚ä¸ºäº†æ”¯æŒkeep-aliveï¼Œä»£ç ä¸­æœ‰å¤šå¤„å¤„ç†é€»è¾‘&lt;/li&gt;
&lt;li&gt;å¯¹äºå†…å®¹çš„è§£æä¸»è¦æ˜¯ä½¿ç”¨parse_requestæ–¹æ³•ã€‚è¯¥æ–¹æ³•é€»è¾‘ä¸»è¦è§£æç¬¬ä¸€è¡Œrequest lineã€‚å¦‚æœå‡ºé”™å°±ç›´æ¥è°ƒç”¨send_errorè¿”å›é”™è¯¯å†…å®¹ã€‚headeréƒ¨åˆ†ä¸»è¦å¼•å…¥äº†email.parser.Parserè¿›è¡Œè§£æ&lt;/li&gt;
&lt;li&gt;parser_requestå¯¹&lt;code&gt;Except:100-continue&lt;/code&gt;è¿›è¡Œäº†ç‰¹æ®Šå¤„ç†ï¼Œè§é™„å½•&lt;/li&gt;
&lt;li&gt;è¿”å›status lineå’Œheaderæ˜¯å…ˆä½¿ç”¨send_response_onlyåˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åè°ƒç”¨send_headerä¾æ¬¡åœ¨åˆ—è¡¨ä¸­æ·»åŠ æ•°æ®ï¼Œæœ€åè°ƒç”¨end_headerså‘é€æ•°æ®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;send_errorå‡½æ•°å°±æ˜¯ä¸€ä¸ªå›å¤çš„å…¸èŒƒ&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å‰©ä¸‹å°±æ˜¯æ—¥å¿—å‡½æ•°å’Œå‡ ä¸ªè¾…åŠ©å‡½æ•°äº†&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;ç¤ºä¾‹&quot;&gt;&lt;a href=&quot;#ç¤ºä¾‹&quot; class=&quot;headerlink&quot; title=&quot;ç¤ºä¾‹&quot;&gt;&lt;/a&gt;ç¤ºä¾‹&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; http.server &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; BaseHTTPRequestHandler&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; socketserver &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; ThreadingTCPServer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Handle&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(BaseHTTPRequestHandler)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protocol_version = &lt;span class=&quot;string&quot;&gt;&quot;HTTP/1.1&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;do_GET&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.send_error(&lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;do_POST&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        len = self.headers.get(&lt;span class=&quot;string&quot;&gt;&#39;Content-Length&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        data = self.rfile.read(int(len))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.send_response(&lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.send_header(&lt;span class=&quot;string&quot;&gt;&#39;Content-Length&#39;&lt;/span&gt;, len)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.end_headers()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.wfile.write(data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ThreadingTCPServer((&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;9999&lt;/span&gt;), Handle).serve_forever()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæœ€ç®€çš„http serverã€‚do_GETå‡½æ•°è¡¨é¢send_errorå°±èƒ½å¤Ÿå“åº”ä¸€ä¸ªè¯·æ±‚ã€‚do_POSTå‡½æ•°å‚ç…§send_errorçš„é€»è¾‘åªä¸è¿‡è¯»å–äº†å®¢æˆ·ç«¯å‘é€çš„bodyå­—æ®µ&lt;/p&gt;
&lt;h3 id=&quot;å°çŸ¥è¯†&quot;&gt;&lt;a href=&quot;#å°çŸ¥è¯†&quot; class=&quot;headerlink&quot; title=&quot;å°çŸ¥è¯†&quot;&gt;&lt;/a&gt;å°çŸ¥è¯†&lt;/h3&gt;&lt;h6 id=&quot;ç±»å˜é‡å’Œå®ä¾‹å˜é‡&quot;&gt;&lt;a href=&quot;#ç±»å˜é‡å’Œå®ä¾‹å˜é‡&quot; class=&quot;headerlink&quot; title=&quot;ç±»å˜é‡å’Œå®ä¾‹å˜é‡&quot;&gt;&lt;/a&gt;ç±»å˜é‡å’Œå®ä¾‹å˜é‡&lt;/h6&gt;&lt;p&gt;è¿™2ä¸ªéå¸¸ç›¸è¿‘ï¼Œå…·ä½“åŒºåˆ«æˆ‘å°±ä¸æ¦‚è¿°äº†ã€‚åœ¨å†™ä»£ç çš„æ—¶å€™å¾ˆå¤šäººæ— è„‘self.xxx = xxxå°±æäº†ä¸€ä¸ªå®ä¾‹å˜é‡ã€‚å¤§å¤šæ•°æ—¶å€™ç”¨å®ä¾‹å˜é‡éƒ½èƒ½å¤Ÿæ›¿ä»£ç±»å˜é‡çš„åŠŸèƒ½ã€‚è¿™å¾ˆå®¹æ˜“è®©äººå¿½ç•¥ç±»å˜é‡çš„ä¼˜ç‚¹ã€‚â‘ å«ä¹‰æ˜ç¡®ï¼šè¿™æ˜¯è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹å…±ç”¨çš„ã€‚â‘¡ä¸éœ€è¦é‡è½½&lt;strong&gt;init&lt;/strong&gt;ï¼Œè¿™åœ¨ç»§æ‰¿çš„æ—¶å€™æ˜¯å¾ˆæœ‰ç”¨å“’~~~ï¼Œsoï¼Œä¸è¦æœ‰äº‹æ²¡äº‹æ— è„‘åœ¨&lt;strong&gt;init&lt;/strong&gt;é‡Œé¢self.xxx = xxxå•¦&lt;/p&gt;
&lt;h3 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://www.laruence.com/2011/01/20/1840.html&quot;&gt;Expect:100-continue&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://docs.python.org/3.6/library/http.server.html?highlight=http.server#http.server.BaseHTTPRequestHandler&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šä¸€ç« è®²SocketServeræ¨¡å—ï¼Œå®ƒå°†æœåŠ¡ç«¯æ ¹æ®ç›‘å¬å¥—æ¥å­—å’Œè¿æ¥å¥—æ¥å­—åˆ†ä¸ºäº†2ä¸ªéƒ¨åˆ†(BaseServer/BaseRequestHandler)ï¼Œè€Œè¿æ¥å¥—æ¥å­—ç±»çš„å¤„ç†æ–¹æ³•ç›¸å½“ç®€å•ï¼Œæœ€ç»ˆæ˜¯ä¸€ä¸ªhandleå‡½æ•°å°±æå®šäº†ã€‚http.serverè¿™ä¸ªæ¨¡å—ä¸»è¦ç±»BaseHTTPRequestHandleç»§æ‰¿è‡ªBaseRequestHandle,å¯¹handleè¿›è¡Œäº†ä¸€ç‚¹ç‚¹çš„åŠ å¼ºï¼Œä¸»è¦å°±æ˜¯å¯¹httpåè®®è¿›è¡Œäº†ç®€å•çš„è§£æå·¥ä½œ(æºç ç‰ˆæœ¬Python3.5)&lt;/p&gt;
    
    </summary>
    
      <category term="æºç è§£æ" scheme="http://ficapy.com/categories/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>SocketServeræºç é˜…è¯»</title>
    <link href="http://ficapy.com/2016/06/29/socketserver_note/"/>
    <id>http://ficapy.com/2016/06/29/socketserver_note/</id>
    <published>2016-06-29T03:53:14.000Z</published>
    <updated>2016-07-02T10:24:36.000Z</updated>
    
    <content type="html">&lt;p&gt;SocketServer.pyè¿™ä¸ªæ–‡ä»¶700æ¥è¡Œï¼Œé™¤å»æ³¨é‡Šå¤§æ¦‚300æ¥è¡Œå·¦å³ï¼Œæ®ç½‘å‹ç§°è¯¥æ¨¡å—å®ä¹ƒå­¦ä¹ ç±»ç»§æ‰¿ä¹‹å…¸èŒƒã€‚&lt;br&gt;è¦ç†è§£è¿™ä¸ªæ¨¡å—çœŸçš„éå¸¸çš„ç®€å•ï¼Œä¹Ÿè®©äººä½“ä¼šåˆ°åŒæ­¥ç¼–ç¨‹çš„ç®€å•æ€§ã€‚å¦å¤–æˆ‘ç°åœ¨æ¯”è¾ƒå…³æ³¨webç¼–ç¨‹ï¼Œæ‰€ä»¥ä¼šæ¯”è¾ƒå…³æ³¨tcpéƒ¨åˆ†å¿½ç•¥æ‰udp(æºç ç‰ˆæœ¬Python2.7.11)&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;ç±»ç»§æ‰¿å…³ç³»&quot;&gt;&lt;a href=&quot;#ç±»ç»§æ‰¿å…³ç³»&quot; class=&quot;headerlink&quot; title=&quot;ç±»ç»§æ‰¿å…³ç³»&quot;&gt;&lt;/a&gt;ç±»ç»§æ‰¿å…³ç³»&lt;/h3&gt;&lt;p&gt;ä¸è¯´åˆ«çš„ï¼Œå•å•çœ‹åˆ°è¿™å¼ å›¾å°±èƒ½å”¬ä½å¥½å¤šäººï¼Œæ„Ÿè§‰å¾ˆé«˜å¤§ä¸Šæœ‰æ²¡æœ‰&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| BaseServer |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------+        +------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| TCPServer |-------&amp;gt;| UnixStreamServer |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------+        +------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------+        +--------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| UDPServer |-------&amp;gt;| UnixDatagramServer |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------+        +--------------------+&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;åŒæ­¥å¤„ç†ç±»æ¯”&quot;&gt;&lt;a href=&quot;#åŒæ­¥å¤„ç†ç±»æ¯”&quot; class=&quot;headerlink&quot; title=&quot;åŒæ­¥å¤„ç†ç±»æ¯”&quot;&gt;&lt;/a&gt;åŒæ­¥å¤„ç†ç±»æ¯”&lt;/h3&gt;&lt;p&gt;æœåŠ¡ç«¯å˜›ï¼Œè¯·å…è®¸æˆ‘æ±¡ä¸€ä¸‹ï¼Œå°±åƒå¤è£…å‰§é‡Œé¢çš„æ€¡çº¢é™¢ï¼Œéƒ½æœ‰ä¸ªé—¨å£æ¥å®¢çš„è€é¸¨ï¼Œæœ‰å®¢æˆ·æ¥å°±å¼•è¿›å»ç„¶åäº¤ç»™å¤±è¶³å°‘å¥³ã€‚è€é¸¨å°±æ˜¯æœåŠ¡ç«¯çš„ç›‘å¬socketï¼Œå¤±è¶³å°‘å¥³å°±æ˜¯å…·ä½“å¤„ç†çš„ä¸šåŠ¡é€»è¾‘ã€‚å¯ä»¥å†™æˆå¦‚ä¸‹ä¼ªä»£ç &lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; socket&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s = socket.socket()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.bind((&lt;span class=&quot;string&quot;&gt;&#39;localhost&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;9999&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.listen(&lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client,addr = s.accept()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    handle(client,addr,s)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;    &lt;/p&gt;
&lt;p&gt;å¯ä»¥è¯´socketserverå°±æ˜¯ç”±ä¸Šé¢æœ€åŸºæœ¬çš„æ­¥éª¤ï¼Œä¸ºäº†æ‰©å±•æ€§è€Œå†™çš„ä»£ç ã€‚ä¸Šé¢çš„ä¼ªä»£ç handle(client,addr,s)æ˜¯ä¸€éƒ¨åˆ†ï¼Œä¸Šé¢çš„åˆ†ä¸ºå¦å¤–ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;socketserverå› ä¸ºæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥ç†è§£èµ·æ¥æ¯”asyncoreè¦ç®€å•è®¸å¤šã€‚è€Œä¸”æ³¨é‡Šå†™çš„éå¸¸è¯¦å°½ï¼Œæˆ‘å°±ä¸è¯¦è¿°BaseServer/BaseRequestHandlerçš„ç±»æ–¹æ³•äº†ï¼Œè¯´ä¸€ä¸‹å‡ ä¸ªæœ‰ç‚¹æ„æ€çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;BaseServeréƒ¨åˆ†åŸºæœ¬å°±ä»£è¡¨äº†ç›‘å¬å¥—æ¥å­—ï¼Œç„¶è€Œè¿˜æ˜¯æä¾›äº†2ä¸ªå¯¹è¿æ¥å¥—æ¥å­—çš„æ–¹æ³•ï¼Œå°±æ˜¯å¤„ç†å®Œæˆä¹‹åå…³é—­å•¦~~shutdown_request/close_request&lt;/li&gt;
&lt;li&gt;handle_requestæ–¹æ³•å’Œserver_foreveræ˜¯éå¸¸ç›¸ä¼¼çš„ï¼ŒåŒºåˆ«å°±æ˜¯handler_requeståªç›¸åº”ä¸€ä¸ªè¯·æ±‚ã€‚å¤§æ¦‚æ˜¯ç”¨æ¥è°ƒè¯•å§ã€‚è¯¥å‡½æ•°è¿˜è°ƒèµ·äº†ä¸€ä¸ªç‰¹åˆ«åƒåœ¾çš„handle&lt;em&gt;timeoutå‡½æ•°ã€‚çœ‹åå­—æ˜¯ä¸æ˜¯ä»¥ä¸ºæ˜¯å¯¹è¿æ¥å¥—æ¥å­—çš„è¶…æ—¶å¤„ç†å‡½æ•°-&lt;/em&gt;-ï¼Œå®é™…ä¸Šæ˜¯ç­‰å¤šä¹…è¿˜æ²¡æ¥ä¸€ä¸ªæ–°è¿æ¥ä¼šè§¦å‘ï¼Œå¯æ˜¯è¿™ä¸ªéœ€æ±‚åŸºæœ¬æ²¡æœ‰ã€‚æ‰€ä»¥æˆ‘éå¸¸è®¤ä¸ºè¿™ä¸ªhandle_requestä»…ä»…ç”¨æ¥è°ƒè¯•ä¸€æ¬¡è€Œå·²&lt;/li&gt;
&lt;li&gt;ä¸Šé¢çš„ä¼ªä»£ç å¹¶æ²¡æœ‰ç”¨åˆ°selectï¼Œä¸ºä»€ä¹ˆsocketserverå°±ç”¨åˆ°äº†ï¼Œå…¶å®å¦‚æœåªæ˜¯ä¸ºäº†å¤„ç†tcpé‚£ä¹ˆæ­¤å¤„æ˜¯æ²¡æœ‰å¿…è¦ç”¨selectçš„ï¼Œå› ä¸ºtcpéœ€è¦acceptè€Œudpæ˜¯ç›´æ¥recvfromå°±å¥½äº†ã€‚ç”¨selectåªæ˜¯ä¸ºäº†é€šçŸ¥æœ‰æ•°æ®æ¥äº†ã€‚éƒ½æ˜¯ä¸ºäº†é€‚åº”å¤šç§æƒ…å†µæ‰ç”¨çš„selectã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯å®ƒä¸æ˜¯ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ˜¯ç›´æ¥ç”¨çš„selfï¼Œè¿™é‡Œåªè¦selfå®ç°äº†file_noæ–¹æ³•å°±å¯ä»¥äº†(å‚ç…§å®˜æ–¹æ–‡æ¡£)ã€‚è¿˜æœ‰selectå¦å¤–å¥—äº†ä¸€ä¸ª_eintr_retryå‡½æ•°ã€‚è¿™é‡Œæ˜¯å› ä¸ºæŸäº›æƒ…å†µä¸‹selectä¼šè¢«æ“ä½œç³»ç»Ÿä¸­æ–­è€Œå¼•å‘å¼‚å¸¸(æ¯”å¦‚ä½¿ç”¨single)&lt;/li&gt;
&lt;li&gt;å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°å®ç°çš„ThreadingTCPServeræ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å®ç°çš„ï¼Œå®è´¨å°±æ˜¯å¤„ç†è¿æ¥å¥—æ¥å­—çš„æ—¶å€™ä½¿ç”¨å¤šçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹,å¯ä»¥æƒ³åˆ°è¦å®ç°ç›¸åŒçš„æ•ˆæœç”¨è£…é¥°å™¨åŒæ ·æ˜¯å¯ä»¥çš„&lt;/li&gt;
&lt;li&gt;StreamRequestHandlerä¸­ä½¿ç”¨äº†socket.makefileå°†è¿æ¥å¥—æ¥å­—åˆ†æˆäº†è¯»å’Œå†™2ä¸ªç±»æ–‡ä»¶å¯¹è±¡(åªèƒ½æ˜¯é˜»å¡socket)ã€‚å¯ä»¥æ„Ÿå—åˆ°çš„ä¼˜åŠ¿å°±æ˜¯read(num)è¿”å›çš„é•¿åº¦æ˜¯å‡†ç¡®çš„ï¼Œrecvå°±æ²¡æœ‰è¿™ä¸ªä¼˜åŠ¿&lt;/li&gt;
&lt;li&gt;ç”¨åˆ°äº†threading.Event,è¿™ä¸ªåœ°æ–¹æˆ‘æ˜¯æ²¡å¤šææ˜ç™½ã€‚è°ƒç”¨shutdownæ–¹æ³•ä¼šä¸­æ–­å¾ªç¯ä»è€Œå…³é—­æœåŠ¡ã€‚ä¸€èˆ¬ä¼šåœ¨å¤„ç†çº¿ç¨‹è°ƒç”¨è¿™ä¸ªã€‚å¦‚æœä¸æ˜¯åœ¨å¤„ç†çº¿ç¨‹è°ƒç”¨é‚£ä¹ˆä¼šå‘ç”Ÿæ­»é”ã€‚ã€‚ã€‚æˆ‘èƒ½æƒ³åˆ°çš„åªæœ‰è¿™é‡Œ&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;socks5-DEMO-å¼•ç”¨è‡ªhttp-xiaoxia-org-2011-03-29-written-by-python-socks5-server&quot;&gt;&lt;a href=&quot;#socks5-DEMO-å¼•ç”¨è‡ªhttp-xiaoxia-org-2011-03-29-written-by-python-socks5-server&quot; class=&quot;headerlink&quot; title=&quot;socks5 DEMO(å¼•ç”¨è‡ªhttp://xiaoxia.org/2011/03/29/written-by-python-socks5-server/)&quot;&gt;&lt;/a&gt;socks5 DEMO(å¼•ç”¨è‡ª&lt;a href=&quot;http://xiaoxia.org/2011/03/29/written-by-python-socks5-server/&quot;&gt;http://xiaoxia.org/2011/03/29/written-by-python-socks5-server/&lt;/a&gt;)&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; socket, select, SocketServer, struct&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Socks5Handle&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(SocketServer.StreamRequestHandler)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tcprelay&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, sock, remote)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fdset = [sock, remote]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            r, w, e = select.select(fdset, [], [])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; sock &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; r:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; remote.send(sock.recv(&lt;span class=&quot;number&quot;&gt;4096&lt;/span&gt;)) &amp;lt;= &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; remote &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; r:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; sock.send(remote.recv(&lt;span class=&quot;number&quot;&gt;4096&lt;/span&gt;)) &amp;lt;= &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            print(&lt;span class=&quot;string&quot;&gt;&#39;socks connection from &#39;&lt;/span&gt;, self.client_address)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sock = self.connection&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;# 1. Version&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sock.recv(&lt;span class=&quot;number&quot;&gt;262&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sock.send(&lt;span class=&quot;string&quot;&gt;b&quot;\x05\x00&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;# 2. Request&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            data = self.rfile.read(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mode = ord(data[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            addrtype = ord(data[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; addrtype == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:  &lt;span class=&quot;comment&quot;&gt;# IPv4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                addr = socket.inet_ntoa(self.rfile.read(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;elif&lt;/span&gt; addrtype == &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;:  &lt;span class=&quot;comment&quot;&gt;# Domain name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                addr = self.rfile.read(ord(sock.recv(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            port = struct.unpack(&lt;span class=&quot;string&quot;&gt;&#39;&amp;gt;H&#39;&lt;/span&gt;, self.rfile.read(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            reply = &lt;span class=&quot;string&quot;&gt;b&quot;\x05\x00\x00\x01&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; mode == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:  &lt;span class=&quot;comment&quot;&gt;# 1. Tcp connect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    remote = socket.socket(socket.AF_INET, socket.SOCK_STREAM)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    remote.connect((addr, port[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    print(&lt;span class=&quot;string&quot;&gt;&#39;Tcp connect to&#39;&lt;/span&gt;, addr, port[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    reply = &lt;span class=&quot;string&quot;&gt;b&quot;\x05\x07\x00\x01&quot;&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;# Command not supported&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                local = remote.getsockname()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                reply += socket.inet_aton(local[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]) + struct.pack(&lt;span class=&quot;string&quot;&gt;&quot;&amp;gt;H&quot;&lt;/span&gt;, local[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;except&lt;/span&gt; socket.error:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;# Connection refused&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                reply = &lt;span class=&quot;string&quot;&gt;&#39;\x05\x05\x00\x01\x00\x00\x00\x00\x00\x00&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sock.send(reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;# 3. Transfering&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; reply[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] == &lt;span class=&quot;string&quot;&gt;&#39;\x00&#39;&lt;/span&gt;:  &lt;span class=&quot;comment&quot;&gt;# Success&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                self.tcprelay(sock, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;except&lt;/span&gt; socket.error:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            print(&lt;span class=&quot;string&quot;&gt;&#39;socket error&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    server = SocketServer.ThreadingTCPServer((&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1081&lt;/span&gt;), Socks5Handle)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    server.serve_forever()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; __name__ == &lt;span class=&quot;string&quot;&gt;&#39;__main__&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    main()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;å’Œasyncoreå¯¹æ¯”&quot;&gt;&lt;a href=&quot;#å’Œasyncoreå¯¹æ¯”&quot; class=&quot;headerlink&quot; title=&quot;å’Œasyncoreå¯¹æ¯”&quot;&gt;&lt;/a&gt;å’Œasyncoreå¯¹æ¯”&lt;/h3&gt;&lt;p&gt;asyncoreå’ŒsocketserveråŒæ ·å®ç°äº†å¹¶å‘ã€‚å¯¹æ¯”ä¸€ä¸‹&lt;br&gt;1.ä»åå­—éƒ½å¯ä»¥çœ‹å‡ºæ¥serverã€‚socketserveråªèƒ½ç”¨æ¥å®ç°serverï¼Œè€Œasyncoreè¿˜å¯ä»¥å®ç°å®¢æˆ·ç«¯&lt;br&gt;2.socketserverå®ç°äº†å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ï¼Œasyncoreæ¡†æ¶æ˜¯å•çº¿ç¨‹äº‹ä»¶å¾ªç¯&lt;/p&gt;
&lt;h3 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://pymotw.com/2/SocketServer/index.html#module-SocketServer&quot;&gt;SocketServer â€“ Creating network servers.&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;SocketServer.pyè¿™ä¸ªæ–‡ä»¶700æ¥è¡Œï¼Œé™¤å»æ³¨é‡Šå¤§æ¦‚300æ¥è¡Œå·¦å³ï¼Œæ®ç½‘å‹ç§°è¯¥æ¨¡å—å®ä¹ƒå­¦ä¹ ç±»ç»§æ‰¿ä¹‹å…¸èŒƒã€‚&lt;br&gt;è¦ç†è§£è¿™ä¸ªæ¨¡å—çœŸçš„éå¸¸çš„ç®€å•ï¼Œä¹Ÿè®©äººä½“ä¼šåˆ°åŒæ­¥ç¼–ç¨‹çš„ç®€å•æ€§ã€‚å¦å¤–æˆ‘ç°åœ¨æ¯”è¾ƒå…³æ³¨webç¼–ç¨‹ï¼Œæ‰€ä»¥ä¼šæ¯”è¾ƒå…³æ³¨tcpéƒ¨åˆ†å¿½ç•¥æ‰udp(æºç ç‰ˆæœ¬Python2.7.11)&lt;/p&gt;
    
    </summary>
    
      <category term="æºç è§£æ" scheme="http://ficapy.com/categories/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>asyncoreæºç é˜…è¯»</title>
    <link href="http://ficapy.com/2016/06/29/asyncore_note/"/>
    <id>http://ficapy.com/2016/06/29/asyncore_note/</id>
    <published>2016-06-29T03:24:21.000Z</published>
    <updated>2016-07-02T10:24:51.000Z</updated>
    
    <content type="html">&lt;p&gt;asyncoreä¸ºselect.selectã€pollçš„å°è£…(å®é™…ä¸Šç°åœ¨å¤§å®¶éƒ½ä½¿ç”¨æ›´ä¸ºé«˜æ•ˆçš„epoll)ï¼Œå˜æˆäº†æ¡†æ¶çš„ä½¿ç”¨æ¨¡å¼ï¼Œè¯¥åº“å·²ç»ä½œä¸ºå…¼å®¹æ¨¡å¼å­˜åœ¨ï¼Œæ–°çš„åº“ä¸ºasyncioã€‚ä¸”åœ¨2å’Œ3ä¸­asyncoreä»£ç æœ‰ä¸€ç‚¹ç‚¹å·®å¼‚ã€‚(æºç ç‰ˆæœ¬2.7.11)&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;dispatcherç±»-è°ƒåº¦&quot;&gt;&lt;a href=&quot;#dispatcherç±»-è°ƒåº¦&quot; class=&quot;headerlink&quot; title=&quot;dispatcherç±»(è°ƒåº¦)&quot;&gt;&lt;/a&gt;dispatcherç±»(è°ƒåº¦)&lt;/h3&gt;&lt;p&gt;æ–‡ä»¶asyncore.pyä¸­æœ€é‡è¦çš„ç±»ä¸ºdispatcherï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦ç»§æ‰¿asyncore.dispatcherå°±å¥½äº†&lt;/p&gt;
&lt;p&gt;å¯ä»¥è¿™æ ·ç†è§£æ¯ä¸€ä¸ªç»§æ‰¿äº†asyncore.dispatcherçš„ç±»éƒ½ä»£è¡¨äº†ä¸€ä¸ªsocket(ç›‘å¬socketæˆ–è€…è¿æ¥socket)&lt;/p&gt;
&lt;p&gt;åœ¨asyncore.pyçš„æœ€å¼€å§‹æœ‰ä¸€ä¸ªå…¨å±€å­—å…¸socket_mapå¯¹åº”fdå’Œä¸€ä¸ªasyncore.dispatcherç±»ï¼Œå½“ä½ ç»§æ‰¿ä¸€ä¸ªdispatcherç±»çš„æ—¶å€™æ€»ä¼šè°ƒç”¨å‡½æ•°åœ¨å…¨å±€å­—å…¸socket_mapä¸­åˆ›å»ºä¸€ä¸ªæ˜ å°„ï¼Œå½“ç„¶åœ¨å…³é—­çš„æ—¶å€™ä¹Ÿä¼šä»å…¨å±€å­—å…¸ä¸­åˆ é™¤&lt;/p&gt;
&lt;p&gt;æœ€åæ˜¯ä¸€ä¸ªloopæ­»å¾ªç¯ï¼Œå¯ä»¥å¾ˆå®¹æ˜“æƒ³åˆ°æ˜¯ä½¿ç”¨äº†ç³»ç»ŸIOå¤šè·¯å¤ç”¨æ¥å£select.selectå¯¹å…¨å±€socket_mapè¿›è¡Œäº†æ“ä½œã€‚æ ¹æ®è¿”å›çš„äº‹ä»¶è¿›è¡Œæ“ä½œ(3ä¸ªäº‹ä»¶è¯»ã€å†™ã€é”™è¯¯)&lt;/p&gt;
&lt;p&gt;æºç ä¸­æˆ‘ä»¬ç€é‡çœ‹dispatcherç±»ï¼Œå®ƒå¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªè¦ç‚¹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ·»åŠ äº†4ä¸ªçŠ¶æ€ï¼Œconnected/accepting/connecting/closingï¼Œæƒ³æƒ³ä¸ºä»€ä¹ˆè¦è®¾ç½®è¿™å‡ ä¸ªçŠ¶æ€å‘¢ï¼Ÿï¼Ÿï¼Ÿ&lt;br&gt;connected:å·²ç»è¿æ¥ä¸Šå¯¹æ–¹,æ¯”å¦‚ç›‘å¬å¥—æ¥å­—sock,addr = socket.accept()è¿”å›çš„sock&lt;/li&gt;
&lt;li&gt;add_channel/del_channel/create_socket/set_socketè¿™å‡ ä¸ªéƒ½æ˜¯é’ˆå¯¹å…¨å±€å­—å…¸socket_mapçš„æ“ä½œã€‚æ·»åŠ è¿›å»æˆ–è€…åˆ é™¤&lt;/li&gt;
&lt;li&gt;readable/writable ç”¨çš„åœ°æ–¹ä¸æ˜¯å¤ªå¤šï¼Œé¢„å…ˆç¡®å®šè¯¥socketè¯¥ä¸è¯¥æ·»åŠ åˆ°socketçš„å¯è¯»å¯å†™é‡Œé¢&lt;/li&gt;
&lt;li&gt;listen/bind/connect/accept/send/recv/close è¿™å‡ ä¸ªå‡½æ•°å˜›ï¼Œå¯¹åŸæœ‰çš„è¡Œä¸ºç¨å¾®æ”¹åŠ¨äº†ä¸‹ï¼Œæ¯”å¦‚listenè®¾ç½®ä¸ºacceptingçŠ¶æ€ï¼Œconnectè®¾ç½®ä¸ºconnectingçŠ¶æ€ï¼Œsend,recvä¸€å®šæ¡ä»¶å‡ºå‘closeï¼Œcloseå³ä¸ºä»å…¨å±€å­—å…¸ä¸­åˆ é™¤å¹¶å…³é—­socket&lt;/li&gt;
&lt;li&gt;handle_read_event/handle_connect_event/handle_write_event.å½“selectæœ‰äº‹ä»¶è¿”å›çš„æ—¶å€™å°±æ˜¯è°ƒç”¨çš„è¿™3ä¸ªæ–¹æ³•ã€‚åªæ˜¯éœ€è¦æ³¨æ„ã€‚è¿™é‡Œå¹¶ä¸æ˜¯æœ€ç»ˆæ‰§è¡Œçš„æ“ä½œ(sendã€recvç­‰)ï¼ï¼ï¼è¿™é‡Œä¹Ÿä½“ç°äº†æ ‡æ³¨socketçŠ¶æ€çš„ä½œç”¨ï¼Œreadå¯ä»¥åˆ†ä¸ºç›‘å¬(accepting)ã€è¿æ¥å®Œæˆå(connecting)â†’â†’â†’è¿™é‡Œå°±æ˜¯ä¸€ä¸ªhookï¼Œå¦‚æœè‡ªå·±è°ƒç”¨connectè¿æ¥é‚£ä¹ˆå®Œæˆåæ˜¯æ­¤çŠ¶æ€ï¼Œå¯ä»¥è‡ªå·±é‡å†™handle_connectå¤„ç†è¯¥äº‹ä»¶ï¼Œå¦‚æœæ˜¯ç›´æ¥åˆå§‹åŒ–çš„socketåˆ™ç›´æ¥ä¸ºconnectedçŠ¶æ€ã€‚handle_write_eventä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå½“ä¸ºconnectingçŠ¶æ€çš„æ—¶å€™å¤„ç†hookï¼Œå¦åˆ™å¤„ç†å†™å…¥äº‹ä»¶&lt;/li&gt;
&lt;li&gt;æœ€åè¿™ä¸€éƒ¨åˆ†åŸºæœ¬å°±æ˜¯ä½¿ç”¨è€…éœ€è¦é‡å†™çš„éƒ¨åˆ†äº†ã€‚handle_expt/handle_read/handle_write/handle_connect/handle_accept/handle_closeå«ä¹‰å¾ˆæ˜ç™½ï¼Œå°±ä¸è¡¨è¿°äº†&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨åé¢å°±æ˜¯dispatcherçš„ç»§æ‰¿ç±»dispatcher_with_sendå’Œfile_dispatcherï¼Œå‰è€…å˜›ï¼Œè¯•æƒ³ä¸€ä¸‹ä½ è¦å‘é€éå¸¸å¤šå†…å®¹ï¼Œè‚¯å®šè°ƒç”¨ä¸€æ¬¡sendå‘ä¸å®Œã€‚å®ƒå°±ç»™ä½ è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå½“ç„¶æ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚åé¢å°±æ˜¯ä¸ºäº†é«˜æ•ˆå‘é€æ–‡ä»¶è€Œäº§ç”Ÿçš„äº†&lt;/p&gt;
&lt;h3 id=&quot;æµç¨‹å›¾ç¤º-ä»¥ä¸€ä¸ªå®¢æˆ·ç«¯ä¸ºä¾‹&quot;&gt;&lt;a href=&quot;#æµç¨‹å›¾ç¤º-ä»¥ä¸€ä¸ªå®¢æˆ·ç«¯ä¸ºä¾‹&quot; class=&quot;headerlink&quot; title=&quot;æµç¨‹å›¾ç¤º(ä»¥ä¸€ä¸ªå®¢æˆ·ç«¯ä¸ºä¾‹)&quot;&gt;&lt;/a&gt;æµç¨‹å›¾ç¤º(ä»¥ä¸€ä¸ªå®¢æˆ·ç«¯ä¸ºä¾‹)&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/asyncore%E7%AE%80%E6%98%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%81%E7%A8%8B%E5%9B%BE.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;sockets5-DEMO&quot;&gt;&lt;a href=&quot;#sockets5-DEMO&quot; class=&quot;headerlink&quot; title=&quot;sockets5 DEMO&quot;&gt;&lt;/a&gt;sockets5 DEMO&lt;/h3&gt;&lt;p&gt;å¯¹äºä½¿ç”¨asyncoreï¼Œå®˜æ–¹çš„ä¾‹å­æˆ‘è§‰å¾—å·²ç»è¡¨ç°çš„éå¸¸åˆ°ä½äº†ã€‚ä¸‹é¢æˆ‘æ”¾å‡ºä¸€ä¸ªä½¿ç”¨å®ƒå†™çš„ç®€å•socks5server(ä½œä¸ºä¸€ä¸ªdemoï¼Œåªå¯¹tcpè¿›è¡Œå¤„ç†ï¼Œæ²¡æœ‰å†™è¿œç¨‹dnsè§£æ)&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; asyncore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; socket&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; struct&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sockets_map = &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Socks5Listen&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(asyncore.dispatcher)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, address=&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;string&quot;&gt;&#39;localhost&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;8081&lt;/span&gt;)&lt;/span&gt;)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        asyncore.dispatcher.__init__(self)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.set_reuse_addr()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.bind(address)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.listen(&lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle_accept&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pair = self.accept()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; pair &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sock, addr = pair&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            print(&lt;span class=&quot;string&quot;&gt;&#39;socks connection from &#39;&lt;/span&gt;, addr)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Local(sock)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Local&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(asyncore.dispatcher_with_send)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, sock)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        asyncore.dispatcher_with_send.__init__(self, sock=sock)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.read_buffer = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.status = &lt;span class=&quot;string&quot;&gt;&#39;init&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, num)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        data = self.recv(num)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.read_buffer += data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; len(self.read_buffer) != num:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _ = self.read_buffer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            self.read_buffer = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; _&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle_read&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; self.status == &lt;span class=&quot;string&quot;&gt;&#39;init&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            self.recv(&lt;span class=&quot;number&quot;&gt;262&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            self.send(&lt;span class=&quot;string&quot;&gt;b&quot;\x05\x00&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            self.status = &lt;span class=&quot;string&quot;&gt;&#39;request&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; self.status == &lt;span class=&quot;string&quot;&gt;&#39;request&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            data = self.read(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; data &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mode = ord(data[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            addrtype = ord(data[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; addrtype == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:  &lt;span class=&quot;comment&quot;&gt;# IPv4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                addr = self.read(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; addr &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                addr = socket.inet_ntoa(addr)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;elif&lt;/span&gt; addrtype == &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;:  &lt;span class=&quot;comment&quot;&gt;# Domain name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                addr = self.read(ord(self.recv(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; addr &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            port = self.read(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; port &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            port = struct.unpack(&lt;span class=&quot;string&quot;&gt;&#39;&amp;gt;H&#39;&lt;/span&gt;, port)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; mode == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:  &lt;span class=&quot;comment&quot;&gt;# 1. Tcp connect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                remote = Remote(addr, port)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                sockets_map[self] = remote&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                sockets_map[remote] = self&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                self.status = &lt;span class=&quot;string&quot;&gt;&#39;transfer&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                reply = &lt;span class=&quot;string&quot;&gt;b&quot;\x05\x07\x00\x01&quot;&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;# Command not supported&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                self.send(reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                self.close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; self.status == &lt;span class=&quot;string&quot;&gt;&#39;transfer&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            data = self.recv(&lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; data:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                sockets_map[self].send(data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle_expt&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.handle_close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle_close&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        asyncore.dispatcher_with_send.handle_close(self)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remote = sockets_map.get(self)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; remote:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;del&lt;/span&gt; sockets_map[remote]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; self &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; sockets_map:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;del&lt;/span&gt; sockets_map[self]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Remote&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(asyncore.dispatcher_with_send)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, addr, port)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        asyncore.dispatcher_with_send.__init__(self)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.connect((addr, port))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle_connect&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(&lt;span class=&quot;string&quot;&gt;&#39;Tcp connect to&#39;&lt;/span&gt;, self.addr)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        local = self.socket.getsockname()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reply = &lt;span class=&quot;string&quot;&gt;b&quot;\x05\x00\x00\x01&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reply += socket.inet_aton(local[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]) + struct.pack(&lt;span class=&quot;string&quot;&gt;&quot;&amp;gt;H&quot;&lt;/span&gt;, local[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sockets_map[self].socket.send(reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle_read&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        data = self.recv(&lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; data:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sockets_map[self].send(data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle_expt&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reply = &lt;span class=&quot;string&quot;&gt;&#39;\x05\x05\x00\x01\x00\x00\x00\x00\x00\x00&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.send(reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.handle_close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handle_close&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        asyncore.dispatcher_with_send.handle_close(self)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        local = sockets_map.get(self)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; local:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;del&lt;/span&gt; sockets_map[local]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; self &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; sockets_map:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;del&lt;/span&gt; sockets_map[self]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;server = Socks5Listen()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;asyncore.loop()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸€ä¸ªsocks5æœåŠ¡ç«¯ä¼šæœ‰3ç±»socketã€‚æ‰€ä»¥ä¼šæœ‰ä¸‰ä¸ªç±»ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å°çŸ¥è¯†&quot;&gt;&lt;a href=&quot;#å°çŸ¥è¯†&quot; class=&quot;headerlink&quot; title=&quot;å°çŸ¥è¯†&quot;&gt;&lt;/a&gt;å°çŸ¥è¯†&lt;/h3&gt;&lt;h6 id=&quot;LEGBä½œç”¨åŸŸ&quot;&gt;&lt;a href=&quot;#LEGBä½œç”¨åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;LEGBä½œç”¨åŸŸ&quot;&gt;&lt;/a&gt;LEGBä½œç”¨åŸŸ&lt;/h6&gt;&lt;p&gt;asyncoreä¸­ä½¿ç”¨å…¨å±€å­—å…¸socket_mapè®°å½•æ˜ å°„ã€‚æƒ³åˆ°å…¨å±€å°±ä¼šæƒ³åˆ°global&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;global&lt;/span&gt; a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    a += &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;main()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; a&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å¯ä»¥æ³¨æ„åˆ°è¿™é‡Œå¿…é¡»è¦æœ‰globalå…³é”®å­—ï¼Œç„¶è€Œæ¢æˆå­—å…¸ã€‚ä¸ºä½•å°±ä¸éœ€è¦globaläº†ã€‚å®é™…ä¸Šè¿™é‡Œè¦å…³æ³¨çš„æ˜¯å¯¹è±¡çš„id,å¯¹äºæ•°å­—ã€å­—ç¬¦ä¸²è¿™äº›å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œç„¶è€Œå­—å…¸å¯¹è±¡æ˜¯å¯å˜çš„ã€‚è¦æ”¹å˜ä¸å¯å˜å˜é‡å®é™…æ˜¯é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥å¯¹äºæ”¹å˜å¤–éƒ¨ä¸å¯å˜å˜é‡è¦ç”¨globalï¼Œå¯å˜å¯¹è±¡ä¸éœ€è¦&lt;/p&gt;
&lt;h6 id=&quot;æ¡†æ¶å’Œåº“çš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#æ¡†æ¶å’Œåº“çš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;æ¡†æ¶å’Œåº“çš„åŒºåˆ«&quot;&gt;&lt;/a&gt;æ¡†æ¶å’Œåº“çš„åŒºåˆ«&lt;/h6&gt;&lt;p&gt;ä¿—ç§°å¥½è±åæ¨¡å¼(Donâ€™t call us, we will call you)ã€‚æ¯”å¦‚åº“å‡½æ•°sumä½ å¾ˆå®¹æ˜“æƒ³åˆ°ç»™å‡ ä¸ªæ•°å­—å®ƒè¿”å›ç»™ä½ å’Œã€‚æ¡†æ¶å˜›ã€‚å°±åƒä¸Šé¢çš„asyncoreä½ éœ€è¦çš„æ˜¯ç»§æ‰¿dispatcherç±»ç„¶åé‡æ–°ä¸€äº›æ–¹æ³•ã€‚è™½ç„¶å®ƒèƒ½è¾¾åˆ°ç›®çš„ï¼Œå¯æ˜¯å¦‚æœä½ ä¸çœ‹æºç æˆ–è®¸ä½ æ°¸è¿œä¹Ÿæ— æ³•æ˜ç™½æ¡†æ¶åœ¨åé¢åšäº†ä»€ä¹ˆã€‚ä»æˆ‘ä¸ªäººçš„ç†è§£æ¥çœ‹æˆ‘æ˜¯æ¯”è¾ƒå–œæ¬¢æˆç†Ÿçš„æ¡†æ¶çš„ã€‚æ¯•ç«Ÿå¦‚æœä¸ç”¨æ¡†æ¶è‡ªå·±ç”¨åº“å‡½æ•°å†™æœ€åä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå½“ç„¶å¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªåƒåœ¾çš„æ¡†æ¶:D&lt;/p&gt;
&lt;h6 id=&quot;ä¸ºä»€ä¹ˆå¤šè·¯IOå¤ç”¨ä¸€å®šæ˜¯é…åˆçš„éé˜»å¡socket&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆå¤šè·¯IOå¤ç”¨ä¸€å®šæ˜¯é…åˆçš„éé˜»å¡socket&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆå¤šè·¯IOå¤ç”¨ä¸€å®šæ˜¯é…åˆçš„éé˜»å¡socket&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆå¤šè·¯IOå¤ç”¨ä¸€å®šæ˜¯é…åˆçš„éé˜»å¡socket&lt;/h6&gt;&lt;p&gt;å¦ˆè›‹ï¼Œè¿™ä¸ªé—®é¢˜å„ç§è¯´æ³•çœŸæ˜¯å¤ªå¤šäº†ã€‚æƒ³ä¸€æƒ³å¦‚æœselectè¿”å›ç»™ä½ ä¸€ä¸ªfdå¯è¯»ï¼Œé‚£ä¹ˆä»–ä¸€å®šæ˜¯å¯è¯»çš„ã€‚å¦‚æœè¿™æ ·é‚£ä¹ˆä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ç”¨selecté…åˆé˜»å¡socketä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å¯æ˜¯ç°å®ä¸è¿™æ ·çº¸å•Šã€‚unixæ‰‹å†Œä¸­æ˜ç¡®è¯´æ˜äº†ä¸æ˜¯è¿™æ ·çš„ã€‚æ‰€ä»¥å·¥ç¨‹ä¸Šå‡ ä¹æ²¡æœ‰è§è¿‡é…åˆé˜»å¡socketä½¿ç”¨çš„ä¾‹å­ã€‚å¦å¤–asyncoreç§connectæ–¹æ³•ç”¨çš„æ˜¯connect_ex&lt;/p&gt;
&lt;h3 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://docs.python.org/2/library/asyncore.html&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.zhihu.com/question/37271342&quot;&gt;çŸ¥ä¹:ä¸ºä»€ä¹ˆIOå¤šè·¯å¤ç”¨è¦æ­é…éé˜»å¡socket&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;asyncoreä¸ºselect.selectã€pollçš„å°è£…(å®é™…ä¸Šç°åœ¨å¤§å®¶éƒ½ä½¿ç”¨æ›´ä¸ºé«˜æ•ˆçš„epoll)ï¼Œå˜æˆäº†æ¡†æ¶çš„ä½¿ç”¨æ¨¡å¼ï¼Œè¯¥åº“å·²ç»ä½œä¸ºå…¼å®¹æ¨¡å¼å­˜åœ¨ï¼Œæ–°çš„åº“ä¸ºasyncioã€‚ä¸”åœ¨2å’Œ3ä¸­asyncoreä»£ç æœ‰ä¸€ç‚¹ç‚¹å·®å¼‚ã€‚(æºç ç‰ˆæœ¬2.7.11)&lt;/p&gt;
    
    </summary>
    
      <category term="æºç è§£æ" scheme="http://ficapy.com/categories/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>socket.recv</title>
    <link href="http://ficapy.com/2016/06/17/socket_recv/"/>
    <id>http://ficapy.com/2016/06/17/socket_recv/</id>
    <published>2016-06-17T08:06:14.000Z</published>
    <updated>2016-06-17T10:29:45.000Z</updated>
    
    <content type="html">&lt;p&gt;æœ¬æ–‡ä»…è®¨è®ºé˜»å¡socketçš„æƒ…å†µã€‚åœ¨v2exä¸Šçœ‹åˆ°äº†2ä¸ªæé—®ï¼Œ&lt;a href=&quot;https://www.v2ex.com/t/236313&quot;&gt;socket.recv å®Œæ•´æ¥æ”¶æ•°æ®&lt;/a&gt;ã€&lt;a href=&quot;https://www.v2ex.com/t/269954&quot;&gt;python socket ä¸€ä¸ªå¾ˆç®€å•çš„é—®é¢˜æŠŠæˆ‘éš¾ä½äº†&lt;/a&gt;.ä¸»è¦ä¼šæœ‰2ä¸ªæ–¹é¢ã€‚æ€ä¹ˆåˆ¤æ–­æ•°æ®æ˜¯å¦ä¼ è¾“å®Œæˆäº†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚recvä»€ä¹ˆæ—¶å€™è¿”å›æ•°æ®ï¼Œè¿”å›å¤šå°‘å­—èŠ‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;ä»ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„ä¾‹å­å¼€å§‹è¯´èµ·&quot;&gt;&lt;a href=&quot;#ä»ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„ä¾‹å­å¼€å§‹è¯´èµ·&quot; class=&quot;headerlink&quot; title=&quot;ä»ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„ä¾‹å­å¼€å§‹è¯´èµ·&quot;&gt;&lt;/a&gt;ä»ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„ä¾‹å­å¼€å§‹è¯´èµ·&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;with&lt;/span&gt; open(&lt;span class=&quot;string&quot;&gt;&#39;backup.py&#39;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; f:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buffer = f.read(&lt;span class=&quot;number&quot;&gt;1024&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; len(buffer) == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        data += buffer&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ä¸ªä¾‹å­ä¸­readæ˜¯ä¸€ç›´æœ‰æ•°æ®è¿”å›çš„ï¼Œæ–‡ä»¶è¯»å–å®Œæˆå°±ä¼šä¸€ç›´è¿”å›ç©ºå­—ç¬¦ï¼Œè¿™æ ·å°±èƒ½åˆ¤æ–­ä»€ä¹ˆæ—¶å€™å®Œæˆå°±åœæ­¢å¾ªç¯è¿›å…¥ä¸‹ä¸€æ­¥æ“ä½œäº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯èƒ½æœ‰äº›äººä¼šåº”ç”¨åˆ°socketç¼–ç¨‹ä¸­ï¼Œrecvåå¾—åˆ°å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦ã€‚å½“é•¿åº¦ä¸º0çš„æ—¶å€™å°±è®¤ä¸ºä¼ è¾“å®Œæˆäº†ã€‚æƒŠå¥‡çš„æ˜¯è¿™æ ·å†™å¤§å¤šæ•°æ—¶å€™å±…ç„¶çœŸçš„èƒ½æ­£å¸¸ä½¿ç”¨ã€‚çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; socket, time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s = socket.socket()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.connect((&lt;span class=&quot;string&quot;&gt;&#39;down.sandai.net&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.send(&lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;GET /thunder7/Thunder_dl_7.9.43.5054.exe HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: down.sandai.net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: curl/7.43.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Accept: */*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wait_time = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    start = time.time()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ret = s.recv(&lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(len(ret))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    end = time.time()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; end - start &amp;gt; wait_time:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        wait_time = end - start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data += ret&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; len(ret) == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(wait_time)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;ä¸Šé¢è¿™ä¸ªä¾‹å­è¯·æ±‚è¿…é›·ä¸‹è½½é“¾æ¥è·å¾—æ•°æ®ï¼Œåœ¨ç½‘ç»œæ­£å¸¸çš„æ—¶å€™æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ã€‚æœ€åçš„æ‰“å°çš„wait_timeå¤§æ¦‚30å·¦å³ã€‚è¿™å…¶å®æ˜¯æ•°æ®ä¼ è¾“å®Œæˆåˆ°socketå…³é—­çš„æ—¶é—´(å› ä¸ºæœåŠ¡ç«¯è®¾ç½®äº†Connection: Keep-Aliveä¸”ä¸º30ç§’)ã€‚ä»æ•ˆç‡æ¥è¯´æ•°æ®ä¼ è¾“å®Œæˆæˆ‘ä»¬ç™½ç™½ç­‰å¾…äº†30ç§’ï¼Œå…¶æ¬¡æ›´é‡è¦çš„æ˜¯&lt;code&gt;ä»…ä»…å¯¹æ–¹æœåŠ¡å™¨æ‰§è¡Œå…³é—­æ“ä½œs.recvæ‰ä¼šè¿”å›ç©º&lt;/code&gt;ã€‚ä¸‡ä¸€å¯¹æ–¹æœåŠ¡å™¨æ²¡æœ‰å†™å¥½ä¸€ç›´ä¸å…³é—­è¿æ¥æ€ä¹ˆåŠ(ä¸è¦ä»¥ä¸ºä¸å…³é—­ä¸å¯èƒ½ï¼Œä¸ä¿¡å¯ä»¥è¿ä¸€ä¸‹z.cnè¯•ä¸€è¯•)ã€‚&lt;code&gt;æ‰€ä»¥ä»tcpå±‚é¢æ¥åˆ¤æ–­æ•°æ®ä¼ è¾“å®Œæˆæ˜¯ä¸å¯å–çš„&lt;/code&gt;ï¼Œè¿™ç§éœ€æ±‚éœ€è¦åœ¨åº”ç”¨å±‚å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;æ‹¿åº”ç”¨æœ€å¹¿æ³›çš„httpåè®®æ¥è¯´ã€‚å®ƒæœ‰æ˜æ˜¾çš„ä¼ è¾“å®Œæˆæ ‡å¿—ã€‚ä¸Šé¢çš„ç¨‹åºæ”¹å†™ä¸€ä¸‹(å¿½ç•¥å¼‚å¸¸å¤„ç†ï¼Œä¸å¯¹chunkè¿›è¡Œå¤„ç†)&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; socket, time, re&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s = socket.socket()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.connect((&lt;span class=&quot;string&quot;&gt;&#39;down.sandai.net&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.send(&lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;GET /thunder7/Thunder_dl_7.9.43.5054.exe HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: down.sandai.net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: curl/7.43.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Accept: */*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;length_re = re.compile(&lt;span class=&quot;string&quot;&gt;r&#39;Content-Length: (\d+)&#39;&lt;/span&gt;,re.MULTILINE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;length, body = -&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ret = s.recv(&lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data += ret&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; body &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        body += len(ret)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; body == length:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; length == -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;\r\n\r\n&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; data:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        length = int(length_re.search(data).group(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        body = len(data.split(&lt;span class=&quot;string&quot;&gt;&#39;\r\n\r\n&#39;&lt;/span&gt;)[-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; length == body:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; len(ret) == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(len(data))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(body)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;æ ¹æ®httpåº”ç”¨å±‚åè®®å½“æœåŠ¡ç«¯è¿”å›å†…å®¹çš„æ—¶å€™ï¼Œè·å–Content-Lengthå¤´éƒ¨å†…å®¹ç„¶årecvæ¥æ”¶æ‰€æœ‰éœ€è¦å†…å®¹å&lt;code&gt;ä¸»åŠ¨å…³é—­è¿æ¥&lt;/code&gt;,è¿™æ ·å°±ä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨å…³é—­è¿æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–recvæˆ–è®¸è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“æ›²è§£çš„åœ°æ–¹recv(maxsize)å¹¶ä¸æ˜¯é˜»å¡åˆ°ç›´åˆ°è·å–åˆ°maxsizeé•¿åº¦åæ‰è¿”å›ã€‚è¿™ä¸ªåœ°æ–¹å¯ä»¥è¿™æ ·ç†è§£ï¼ŒæŠŠè¿™ä¸ªIOæµå½“åšä¸€ä¸ªç›’å­ã€‚å½“ç›’å­é‡Œé¢æ²¡æœ‰å†…å®¹çš„æ—¶å€™recvæ˜¯é˜»å¡çš„ã€‚æŸä¸€æ—¶åˆ»ç›’å­é‡Œé¢æ”¾è¿›äº†ä¸€äº›å†…å®¹ï¼Œä¸ç®¡æ”¾è¿›äº†å¤šå°‘recvä¼šè¯»å–æœ€å¤šmaxsizeå†…å®¹è¿”å›ã€‚é¡ºä¾¿è¯´ä¸€ä¸‹epollä¸­è¾¹ç¼˜è§¦å‘(edge-triggered)å’Œæ°´å¹³è§¦å‘(level-triggered)çš„ç†è§£ã€‚è¾¹ç¼˜è§¦å‘å°±æ˜¯å½“è¿™ä¸ªç›’å­ä¸­æ”¾è¿›æ•°æ®çš„æ—¶å€™æˆ‘é€šçŸ¥ä½ ä¸€ä¸‹ã€‚æ°´å¹³è§¦å‘å°±æ˜¯å½“è¿™ä¸ªç›’å­ä¸­è¿˜æœ‰æ•°æ®æ²¡æœ‰å–å‡ºçš„æ—¶å€™æˆ‘é€šçŸ¥ä½ ä¸€ä¸‹ã€‚è¿™æ ·å°±é€ æˆäº†ä½¿ç”¨è¾¹ç¼˜è§¦å‘å½“é€šçŸ¥çš„æ—¶å€™å¿…é¡»å¤„ç†å®Œè¯¥IOæµ(è¯•æƒ³ä¸€ä¸‹å¦‚æœä½ ç¬¬ä¸Šä¸€ä¸ªé€šçŸ¥æ²¡æœ‰å¤„ç†å®Œï¼Œä¸‹ä¸€ä¸ªé€šçŸ¥çš„æ—¶å€™ä¹Ÿå¯ä»¥å¤„ç†ï¼Œä¾æ¬¡é€’æ¨å¯èƒ½é€ æˆæœ€åä¸€ä¸ªé€šçŸ¥æ²¡æœ‰å¤„ç†å®Œï¼Œå› ä¸ºæ²¡æœ‰ä¸‹ä¸€ä¸ªé€šçŸ¥å“’ï¼Œæ‰€ä»¥æ¼å¤„ç†äº†ä¸€äº›IOæµ)&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ€»ç»“æ¥è¯´å°±æ˜¯2ä¸ªæ–¹é¢ã€‚1.recv(maxsize)ä¸€æœ‰æ•°æ®å°±è¿”å›å¹¶ä¸æ˜¯ç§¯ç´¯åˆ°maxsizeé•¿åº¦å†è¿”å›ã€‚2.åˆ¤æ–­ä¼ è¾“å®Œæˆä¸æ˜¯TCPå±‚é¢åšçš„äº‹æƒ…ï¼Œåº”è¯¥åœ¨åº”ç”¨å±‚å¤„ç†&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&quot;å…¶ä»–çš„ä¸€äº›&quot;&gt;&lt;a href=&quot;#å…¶ä»–çš„ä¸€äº›&quot; class=&quot;headerlink&quot; title=&quot;å…¶ä»–çš„ä¸€äº›&quot;&gt;&lt;/a&gt;å…¶ä»–çš„ä¸€äº›&lt;/h3&gt;&lt;h6 id=&quot;keepalive&quot;&gt;&lt;a href=&quot;#keepalive&quot; class=&quot;headerlink&quot; title=&quot;keepalive&quot;&gt;&lt;/a&gt;keepalive&lt;/h6&gt;&lt;p&gt;tcpå±‚é¢çš„:æ˜¯è¡¨ç¤ºå½“æ²¡æœ‰tcpæŠ¥æ–‡çš„æ—¶å€™å‘é€tcpæŠ¥æ–‡ç»™å¯¹æ–¹ã€‚å®é™…ä¸ŠTCPåè®®è§„èŒƒæ˜¯åªæœ‰2å°æ—¶æ²¡æœ‰tcpäº¤äº’æ‰ä¼šå…³é—­TCPè¿æ¥çš„ï¼Œå¯æ˜¯ç°å®ä¸­å„ç§NATè®¾å¤‡å¹¶æ²¡æœ‰éµå¾ªè¯¥è§„èŒƒï¼Œæ¯•ç«Ÿå’Œæ€§èƒ½æœ‰å…³è”,å¦‚æœé•¿æ—¶é—´æ²¡æœ‰tcpåŒ…äº¤äº’é‚£ä¹ˆå¯èƒ½ä¼šä¸­æ–­è¯¥TCPè¿æ¥ï¼Œæ­¤æ—¶å°±æœ‰äº†tcpå±‚é¢çš„keepaliveï¼Œå½“æ²¡æœ‰tcpåŒ…çš„æ—¶å€™ä¼šè‡ªåŠ¨å‘é€ã€‚ä½ ä»¥ä¸ºè¿™æ ·å°±å®Œäº†ï¼Œtoo naiveï¼æœ‰çš„NATè®¾å¤‡ä¼šå½“tcpä¸­é•¿æ—¶é—´æ²¡æœ‰æœ‰æ•ˆè·è½½çš„æ—¶å€™ä¸­æ–­è¯¥è¿æ¥ã€‚äºæ˜¯ä¹æœ‰çš„åº”ç”¨åœ¨åº”ç”¨å±‚æ¯éš”ä¸€æ®µæ—¶é—´å‘é€ä¸€ä¸ªechoæ•°æ®è¿™æ ·å­å°±èƒ½å¤Ÿé¿å…è¿™ç§æƒ…å†µäº†ã€‚ä¸‹å›¾è®¾ç½®äº†keepaliveåŒæ—¶å¯¹socketè®¾ç½®è¶…æ—¶çš„æƒ…å†µ&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;set_keepalive_linux&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sock, after_idle_sec=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, interval_sec=&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, max_fails=&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;Set TCP keepalive on an open socket.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    It activates after 1 second (after_idle_sec) of idleness,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    then sends a keepalive ping once every 3 seconds (interval_sec),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    and closes the connection after 5 failed ping (max_fails), or 15 seconds&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sock.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPIDLE, after_idle_sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPINTVL, interval_sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPCNT, max_fails)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.settimeout(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set_keepalive_osx(s)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;ä¸‹å›¾æ˜¯æŠ“åŒ…ç»“æœ&lt;br&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/2016_06_17_15_47_21.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;å¯ä»¥çœ‹åˆ°æ•°æ®ä¼ è¾“å®Œæˆåæ¯éš”3ç§’é’Ÿå‘é€äº†ä¸€ä¸ªtcpåŒ…ã€‚ç”±äºåŒæ—¶è®¾ç½®äº†settimeoutï¼Œåç§’åæ²¡æœ‰tcpè·è½½ï¼Œå®¢æˆ·ç«¯æ–­å¼€äº†è¿æ¥(&lt;em&gt;æ³¨æ„settimeoutè®¾ç½®ä¸ºç§’åªå¯¹é˜»å¡æ¨¡å¼æœ‰æ•ˆ&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;httpå±‚é¢çš„:è¿™ä¸ªå°±ç®€å•äº†ï¼Œhttp1.0ç‰ˆæœ¬ä»¥å‰æ˜¯è¯·æ±‚â†’è¿”å›æ¨¡å¼ï¼Œè¯·æ±‚ä¸€æ¬¡å°±å…³é—­äº†ã€‚å› ä¸ºtcpå»ºç«‹è¿æ¥æ˜¯æŒºè€—æ—¶çš„ï¼Œäºæ˜¯å°±æœ‰äº†ä¸€æ¬¡æ•°æ®æ¥å›å°±å¹¶ä¸å…³é—­ä¸‹ä¸€ä¸ªè¯·æ±‚æ¥ç€ç”¨ã€‚&lt;/p&gt;
&lt;h6 id=&quot;è¶…æ—¶æ£€æµ‹&quot;&gt;&lt;a href=&quot;#è¶…æ—¶æ£€æµ‹&quot; class=&quot;headerlink&quot; title=&quot;è¶…æ—¶æ£€æµ‹&quot;&gt;&lt;/a&gt;è¶…æ—¶æ£€æµ‹&lt;/h6&gt;&lt;p&gt;æˆ‘è§‰å¾—ä¸€ä¸ªå¥½çš„socketç¨‹åºè‚¯å®šä¼šæœ‰è¶…æ—¶æœºåˆ¶å’Œæ–­çº¿é‡è¿æœºåˆ¶ã€‚ä¸Šé¢çš„2ä¸ªç¤ºä¾‹ã€‚æµ‹è¯•ä¸­é€”æ–­å¼€ç½‘ç»œå†æ¬¡é‡è¿æ¥ï¼Œä¼šä¸€ç›´å¡åœ¨recvé˜¶æ®µï¼Œå¯¹äºä¸€ä¸ªæ­»çš„TCPé“¾æ¥å¦‚æœç¨‹åºæ— æ³•æ„ŸçŸ¥ä¸€ç›´å¡ç€ç»å¯¹æ˜¯æ— æ³•æ¥å—çš„ã€‚å¦‚æœæ˜¯é˜»å¡socketçš„è¶…æ—¶æˆ‘ä»¬åªéœ€è¦è®¾ç½®setttimeoutå°±å¥½äº†ã€‚é…åˆåº”ç”¨å±‚çš„echoä¹Ÿå¯ä»¥å®ç°é•¿è¿æ¥ã€‚å¦‚æœä½¿ç”¨epollè¿™äº›é‚£ä¹ˆsettimeoutå°±ä¸è¡Œäº†ï¼Œå°±éœ€è¦è‡ªå·±ç»´æŠ¤çŠ¶æ€æ£€æŸ¥~~~&lt;/p&gt;
&lt;h3 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/12248132/how-to-change-tcp-keepalive-timer-using-python-script&quot;&gt;How to change tcp keepalive timer using python script?&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»…è®¨è®ºé˜»å¡socketçš„æƒ…å†µã€‚åœ¨v2exä¸Šçœ‹åˆ°äº†2ä¸ªæé—®ï¼Œ&lt;a href=&quot;https://www.v2ex.com/t/236313&quot;&gt;socket.recv å®Œæ•´æ¥æ”¶æ•°æ®&lt;/a&gt;ã€&lt;a href=&quot;https://www.v2ex.com/t/269954&quot;&gt;python socket ä¸€ä¸ªå¾ˆç®€å•çš„é—®é¢˜æŠŠæˆ‘éš¾ä½äº†&lt;/a&gt;.ä¸»è¦ä¼šæœ‰2ä¸ªæ–¹é¢ã€‚æ€ä¹ˆåˆ¤æ–­æ•°æ®æ˜¯å¦ä¼ è¾“å®Œæˆäº†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚recvä»€ä¹ˆæ—¶å€™è¿”å›æ•°æ®ï¼Œè¿”å›å¤šå°‘å­—èŠ‚&lt;/p&gt;
    
    </summary>
    
      <category term="network" scheme="http://ficapy.com/categories/network/"/>
    
    
  </entry>
  
  <entry>
    <title>httpsç¬”è®°</title>
    <link href="http://ficapy.com/2016/06/01/https_note/"/>
    <id>http://ficapy.com/2016/06/01/https_note/</id>
    <published>2016-06-01T13:54:21.000Z</published>
    <updated>2016-06-01T16:51:42.000Z</updated>
    
    <content type="html">&lt;p&gt;è¿™å¹´å¤´ç½‘ç»œåŠ«æŒå¦‚æ­¤æ™®éï¼Œä½œä¸ºæwebå¼€å‘çš„è¯´ä¸äº†è§£ç‚¹httpséƒ½ä¸å¥½æ„æ€ã€‚ç®€å•ç†è§£httpså¯ä»¥éå¸¸ç®€å•ï¼Œå¯æ˜¯ä¸€æ—¦ä¸Šå‡åˆ°å¯†ç å­¦ã€‚ãƒ¾(ï½¡ï½€Ğ”Â´ï½¡)ç‰µæ‰¯åˆ°çš„æ¦‚å¿µçœŸæ˜¯å¤ªå¤šäº†å¤ªç‰¹ä¹ˆå¤æ‚äº†ã€‚é„™äººè¿˜æ˜¯ä»ä¸ªäººå®ç”¨è§’åº¦å‡ºå‘ã€‚ç®€æ´è®°å½•ä¸€ä¸‹httpsç›¸å…³å†…å®¹,å¦å¤–æœ¬æ–‡ä½œä¸ºå›é¡¾å°šå¯ï¼Œä¸é€‚åˆä½œä¸ºåˆæ¬¡äº†è§£httpsçš„å‚è€ƒã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;ä»æœ€ç®€å•çš„è§’åº¦æ¥è¯´ã€‚ç®€å•ç†è§£HTTPSç†è§£ä»¥ä¸‹å­—æ®µå°±å¥½äº†&lt;code&gt;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&lt;/code&gt;.ä»»ä½•ç¨æœ‰å¸¸è¯†çš„ç¨‹åºå‘˜ä¸€å®šå¯¹RSAå…¬ç§é’¥ä½“ç³»æœ‰æ‰€è€³é—»ã€‚ä»¥å°ç™½çš„çœ¼å…‰ä»æœ€ç®€å•çš„è§’åº¦æ¥çœ‹ã€‚ç¬¬ä¸€ä¸ªè¯·æ±‚å‘æœåŠ¡å™¨è¯·æ±‚å…¬åŒ™ï¼ŒæœåŠ¡å™¨è¿”å›å…¬åŒ™ã€‚å®¢æˆ·ç«¯éªŒè¯å…¬åŒ™ã€‚å®¢æˆ·ç«¯ä½¿ç”¨å…¬åŒ™åŠ å¯†ä¸€ä¸ªå¯†é’¥ä¼ é€’ç»™æœåŠ¡å™¨ï¼Œç„¶åå°±ç”¨è¿™ä¸ªå¯†åŒ™ä½¿ç”¨AESåŠ å¯†ä¼ è¾“æ•°æ®å°±å®Œäº‹å„¿äº†ã€‚å¦ˆè›‹å¤šå¥½ç†è§£å•Šï¼Œå¯æ˜¯ç°å®ç¯å¢ƒæ€»æ˜¯ç°å¸¸å¤æ‚çš„T_Tã€‚ä¸è¿‡æ€»ä½“è€Œè¨€ä¹Ÿå·®ä¸äº†å¤šå°‘ã€‚ä¸Šå›¾2å¼ ã€‚&lt;br&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/ssl_handshake_rsa.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/2016_06_01_23_20_38.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;wiresharkä¸­æ€»ä½“ç»™å‡ºäº†ç°å¸¸é‡è¦çš„å‡ ä¸ªå…³é”®è¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;â‘ Client Hello(å‘é€å®¢æˆ·ç«¯éšæœºæ•°ï¼Œæ”¯æŒclipherï¼Œä¸€äº›Extensionï¼Œæœ€çŸ¥åçš„Extensionåº”è¯¥æ˜¯SNIï¼Œç°å¸¸å¥½ç†è§£ï¼Œå°±æ˜¯è¡¨æ˜æ˜¯è¯·æ±‚çš„å“ªä¸ªåŸŸåï¼Œè¿™æ ·å°±èƒ½å¤Ÿä¸€ä¸ªIPä¸Šæ”¾ç½®Nä¸ªè¯ä¹¦å“’ï¼Œç„¶åè¿˜æœ‰ä¸ªæœ‰è¶£çš„ä¸œä¸œ&lt;a href=&quot;https://github.com/dlundquist/sniproxy&quot;&gt;sniproxy&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;â‘¡Server Hello(å‘é€æœåŠ¡ç«¯éšæœºæ•°ï¼Œè¿”å›å•†é‡å¥½çš„clipher) &lt;/li&gt;
&lt;li&gt;â‘¢Certificate(æœåŠ¡ç«¯è¿”å›å…¬é’¥é“¾)&lt;/li&gt;
&lt;li&gt;â‘£Client Key Exchange(å°±æ˜¯ä¼ é€’ä¸€ä¸ªå¯†åŒ™å“’)Change Cipher Spec(æ²¡å•¥ç”¨TLS1.3å·²è¢«ç§»å‡º)Finished(å‘é€ä¸€æ®µåŠ å¯†çš„éªŒè¯æ•°æ®è®©æœåŠ¡ç«¯éªŒè¯ï¼ŒåŒ…å«å‰é¢å‡ æ­¥çš„ä¸€äº›ä¿¡æ¯)&lt;/li&gt;
&lt;li&gt;â‘¤New Session Ticket(ä½ çœ‹ä¸Šé¢é‚£ä¹ˆå¤šæµç¨‹ï¼Œè¿™é‡Œç¼“å­˜ä¸€ä¸‹ç»“æœå“’ï¼Œæƒ³è¦å¿«ä¸€ç‚¹ä¸‹æ¬¡ç›´æ¥ä¼ ticketå°±å¯ä»¥çœæ‰å¥½å¤šæ­¥éª¤å“’ï¼Œ&lt;code&gt;httpsä¼˜åŒ–ç¬¬ä¸€äº‹é¡¹&lt;/code&gt;)Change Cipher Spec(åŒä¸Šæ²¡å•¥ç”¨)Finished(å‘é€ä¸€æ®µåŠ å¯†çš„éªŒè¯æ•°æ®è®©å®¢æˆ·ç«¯éªŒè¯)&lt;/li&gt;
&lt;li&gt;â‘¥Overï¼Œå¼€å§‹ç”¨AESåŠ å¯†ä¼ è¾“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸Šé¢çš„æ­¥éª¤åå•†çš„clipher suiteæ˜¯TLS_RSA_WITH_AES_128_GCM_SHA256ï¼Œäº‹å®ä¸Šç°åœ¨åªè¦ä½ è‡ªå·±ä¸åšæ­»ï¼Œæ˜¯ç»ä¸å¯èƒ½å‡ºç°è¿™ç§ä¸å®‰å…¨çš„clipher suiteã€‚å› ä¸ºæ‰§è¡Œopenssl clipherså°†ä¼šçœ‹åˆ°æ‰€æœ‰çš„RSAéƒ½ä¼šæ­é…DHç®—æ³•ä¸€èµ·ä½¿ç”¨ï¼Œä¸ä¼šå•ç‹¬å­˜åœ¨RSA(é„™äººå¼€å§‹è‡ªå·±æƒ³çœ‹çœ‹æ²¡æœ‰DHäº¤æ¢çš„httpsäº¤äº’æ˜¯æ€æ ·çš„é…ç½®äº†å¥½åŠå¤©æ²¡æˆåŠŸï¼Œå› ä¸ºè¦è‡ªå·±ç¼–è¯‘opensslï¼Œå¦‚æœä¸æ˜¯ç°å¸¸äº†è§£çœŸåšä¸äº†è¿™ä¸ªæ­»ã€‚åæ¥å¶ç„¶å‘ç°é˜¿é‡Œäº‘CDNé…ç½®çš„httpsç¬¦åˆè¯•éªŒè¦æ±‚)&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¸å®‰å…¨ï¼Œå› ä¸ºæƒ³æƒ³çœ‹å•Šï¼Œwiresharkä½œä¸ºä¸€ä¸ªå—…æ¢æŠ“åŒ…å·¥å…·ï¼Œå¯¼å…¥ä¸ªè¯ä¹¦å°±èƒ½è§£å¯†ä¼ è¾“æ•°æ®å“’ã€‚è¿™å°±æ„å‘³ç€åªè¦åˆ«äººæ•è·äº†ä½ çš„æ•°æ®é‚£ä¹ˆæœ‰æœä¸€æ—¥æåˆ°äº†ä½ çš„è¯ä¹¦ç§é’¥å°±èƒ½è§£å¯†æ•°æ®ã€‚å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå› ä¸ºè¿™é‡Œæœ€ç»ˆåå•†çš„å¯†åŒ™æ˜¯ç”±3ä¸ªéƒ¨åˆ†ç»„æˆ2ä¸ªéšæœºæ•°å’Œä½¿ç”¨å…¬é’¥åŠ å¯†çš„é‚£ä¸ªå­—æ®µï¼Œåªè¦åˆ«äººæœ‰äº†ç§åŒ™å°±èƒ½ç”¨åŒæ ·çš„åŠæ³•è®¡ç®—å¾—åˆ°æœ€ç»ˆçš„AESåŠ å¯†å¯†åŒ™ã€‚ç”±æ­¤å¼•å…¥äº†ä¸€ä¸ªDHå¯†åŒ™äº¤æ¢ä½“ç³»&lt;/p&gt;
&lt;p&gt;ä»‹ä¸ªDHäº¤æ¢å’±å°±ä¸è¯´åŸç†äº†ï¼Œå¯ä»¥å‚ç…§åæ–‡å‚è€ƒé“¾æ¥ï¼Œå¤§æ„å°±æ˜¯åŒæ–¹å…±æœ‰ä¸€ä¸ªkeyï¼Œç„¶åæˆ‘ç»™ä½ å‘ä¸€ä¸ªéšæœºæ˜æ–‡ï¼Œä½ ç»™æˆ‘å‘ä¸€ä¸ªéšæœºæ˜æ–‡ã€‚&lt;code&gt;æœ€ååŒæ–¹å°±ç°å¸¸ç¥å¥‡äº†æ‹¥æœ‰äº†åŒæ ·çš„å¯†åŒ™&lt;/code&gt;ï¼Œè¾¾åˆ°äº†å¯†åŒ™äº¤æ¢çš„ç›®çš„ã€‚å¯æ˜¯å¯†åŒ™äº¤æ¢ä½“ç³»æœ‰ä¸ªè„†å¼±çš„åœ°æ–¹ã€‚å¦‚æœç¬¬ä¸‰æ–¹çŸ¥é“äº†å…±æœ‰çš„é‚£ä¸ªkeyï¼Œå°±èƒ½å¤Ÿè¢«ä¸­é—´äºº(è‡ªå·±æƒ³ä¸€ä¸‹ä¸ºä»€ä¹ˆ)~~~,å¼•å…¥å¯†åŒ™äº¤æ¢ï¼Œæ¡æ‰‹äº¤äº’å°±æˆäº†ä¸‹å›¾çš„æ ·å­&lt;br&gt;&lt;img src=&quot;http://ficapy.b0.upaiyun.com/blogimg/ssl_handshake_diffie_hellman.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;è¿™æ ·ä¸Šé¢çš„RSAå¯†åŒ™äº¤æ¢å˜æˆäº†DHäº¤æ¢ï¼Œå°±æœ‰äº†PSF(å‘å‰å®‰å…¨æ€§,å³ä½¿æœ‰äº†ç§é’¥ï¼Œé‚£ä¹ˆåˆ«äººä¹Ÿæ— æ³•è§£å¯†ä»¥å‰æ•è·çš„æ•°æ®ï¼Œå› ä¸ºDHäº¤æ¢çš„é‚£ä¸ªå¯†åŒ™ç®—ä¸å‡ºæ¥å˜›)ã€‚å¯æ˜¯æœ‰äº†è¯ä¹¦ä¹‹åæ˜¯å¯ä»¥ç”¨æ¥ä¸­é—´äººçš„(æƒ³æƒ³DHçš„å¼±é¡¹ï¼Œè¦ä¸ä¸ºä½•å«å‘å‰å®‰å…¨æ€§å‘¢23333)&lt;/p&gt;
&lt;h2 id=&quot;HSTS-HPKP&quot;&gt;&lt;a href=&quot;#HSTS-HPKP&quot; class=&quot;headerlink&quot; title=&quot;HSTS,HPKP&quot;&gt;&lt;/a&gt;HSTS,HPKP&lt;/h2&gt;&lt;p&gt;HSTS:æƒ³ä¸€æƒ³ä½ åœ¨åœ°å€æ è¾“å…¥ä¸€ä¸ªç½‘å€ä½ ä¼šå»å®Œå…¨è¾“å…¥&lt;em&gt;&lt;a href=&quot;http://www.taobao.com&quot;&gt;http://www.taobao.com&lt;/a&gt;&lt;/em&gt;å—ï¼Œå½“ç„¶ä¸ä¼šï¼ï¼å¥½å¤šäººéƒ½ä¼šç›´æ¥è¾“å…¥&lt;em&gt;taobao.com&lt;/em&gt;ï¼ˆå½“ç„¶æ›´å¤šçš„äººä¼šå»ç™¾æ¯’æ·˜å®ï¼‰,é‚£ä¹ˆæµè§ˆå™¨æ€ä¹ˆçŸ¥é“ä½ è¦è®¿é—®&lt;em&gt;&lt;a href=&quot;http://taobao.com&quot;&gt;http://taobao.com&lt;/a&gt;&lt;/em&gt;è¿˜æ˜¯&lt;em&gt;&lt;a href=&quot;https://taobao.com&quot;&gt;https://taobao.com&lt;/a&gt;&lt;/em&gt;å‘¢ã€‚æ¯•ç«Ÿhttpså¦‚æ­¤å®‰å…¨è‚¯å®šæ˜¯é¦–é€‰ï¼Œç„¶åå°±æœ‰äº†ä¸ªhttpè¯·æ±‚å¤´ç±»ä¼¼ä¸‹é¢è¿™ä¸ªæ ·å­&lt;code&gt;Strict-Transport-Security: max-age=31536000; includeSubDomains; preload&lt;/code&gt;å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡æ”¶åˆ°è¿™ç§è¯·æ±‚å°±çŸ¥é“äº†ä¸‹æ¬¡è¦æ˜¯å†è®¿é—®ï¼Œé‚£ä¹ˆå°†ç›´æ¥ä½¿ç”¨httpsä¸å†ä½¿ç”¨httpåè®®ï¼Œå¢åŠ å®‰å…¨æ€§é¿å…é™çº§æ”»å‡»ï¼ˆå¯ä»¥çœ‹åˆ°å‡¡æ˜¯å¼€äº†httpsçš„å¤§ç«™ç‚¹éƒ½å¿…å®šå¼€äº†æ­¤å­—æ®µå¹¶ä¸”è®¾ç½®çš„å¾ˆé•¿ï¼‰&lt;/p&gt;
&lt;p&gt;HPKP:ç›¸åè¿™ä¸ªä¸œè¥¿å°±æ²¡å¤šå¤§ç”¨äº†â•®(â•¯â–½â•°)â•­ï¼Œå¯ä»¥è¯•è¯•æ•ˆæœï¼Œç”¨chromeæˆ–è€…firefoxå…ˆè®¿é—®&lt;em&gt;&lt;a href=&quot;https://scotthelme.co.uk/&quot;&gt;https://scotthelme.co.uk/&lt;/a&gt;&lt;/em&gt; å†è®¿é—®&lt;em&gt;&lt;a href=&quot;https://hpkp.scotthelme.co.uk/&quot;&gt;https://hpkp.scotthelme.co.uk/&lt;/a&gt;&lt;/em&gt; ä¼šæŠ¥éšç§è®¾ç½®é”™è¯¯ã€‚ä¸ºæ¯›å‘¢ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªheaderå­—æ®µæ˜¯è¿™æ ·çš„&lt;code&gt;Public-Key-Pins: pin-sha256=&amp;quot;X3pGTSOuJeEVw989IJ/cEtXUEmy52zs1TZQrU06KUKg=&amp;quot;; pin-sha256=&amp;quot;MHJYVThihUrJcxW6wcqyOISTXIsInsdj3xK8QrZbHec=&amp;quot;; pin-sha256=&amp;quot;isi41AizREkLvvft0IRW4u3XMFR2Yg7bvrF7padyCJg=&amp;quot;; pin-sha256=&amp;quot;I/bAACUzdYEFNw2ZKRaypOyYvvOtqBzg21g9a5WVClg=&amp;quot;; pin-sha256=&amp;quot;Y4/Gxyck5JLLnC/zWHtSHfNljuMbOJi6dRQuRJTgYdo=&amp;quot;; pin-sha256=&amp;quot;/oCVQg3nP3DroGpFdAbaiYzenycUftqrH3LAyaIal2g=&amp;quot;; pin-sha256=&amp;quot;0PiItvsnLZy1slbsVPGky8YnDsJavMNtxD0TPwsCdC8=&amp;quot;; pin-sha256=&amp;quot;t3EPvqF+7XoKypCPHyN1b5uey7zTfIGDHn4oBWz2pds=&amp;quot;; pin-sha256=&amp;quot;zqbcEslrpiH0bA9uhNyl2ovpLEfGJQM/QvZSVumMFJ8=&amp;quot;; pin-sha256=&amp;quot;V+J+7lHvE6X0pqGKVqLtxuvk+0f+xowyr3obtq8tbSw=&amp;quot;; pin-sha256=&amp;quot;Myokb3mG16eRkVBE+ZmFSKSpYQzWHKMY1MZbXgA8BkQ=&amp;quot;; pin-sha256=&amp;quot;WSg/oQliyMYyP6yZ0CzDdQ8PHmtUkoUsOsa5svxxXxo=&amp;quot;; pin-sha256=&amp;quot;9lBW+k9EF6yyG9413/fPiHhQy5Ok4UI5sBpBTuOaa/U=&amp;quot;; pin-sha256=&amp;quot;ipMu2Xu72A086/35thucbjLfrPaSjuw4HIjSWsxqkb8=&amp;quot;; pin-sha256=&amp;quot;6OnjvIKf0SxyerXzg9N0RvQ2sgaL6niV+MLn9wBrh+s=&amp;quot;; pin-sha256=&amp;quot;9dNiZZueNZmyaf3pTkXxDgOzLkjKvI+Nza0ACF5IDwg=&amp;quot;; max-age=2592000; includeSubDomains; report-uri=&amp;quot;https://scotthelme.report-uri.io/r/default/hpkp/enforce&amp;quot;&lt;/code&gt;å®ƒé‡Œé¢åŒ…å«äº†å…¬é’¥ä¿¡æ¯ï¼Œå¦‚æœå’ŒæœåŠ¡ç«¯è¿”å›çš„å…¬é’¥ä¸åˆé‚£ä¹ˆä¼šæŠ¥é”™ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªå­—æ®µå˜ï¼Œæƒ³æƒ³CAæœºåˆ¶ï¼Œä»»ä½•ä¸€ä¸ªå¯ä¿¡æ ¹è¯ä¹¦éƒ½èƒ½ç»™ä»»æ„åŸŸåæä¾›ç­¾åè¯ä¹¦ç„¶åèƒ½éª—è¿‡æµè§ˆå™¨è¿›è¡Œä¸­é—´äºº(ç±»ä¼¼å®ç°æ¯”å¦‚&lt;a href=&quot;https://github.com/droe/sslsplit&quot;&gt;sslsplit&lt;/a&gt;)ï¼Œè¯¥æƒ…å†µå°±èƒ½é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚ç†æƒ³å¾ˆä¸°æ»¡ï¼Œç°å®å¾ˆéª¨æ„Ÿï¼Œè¿™ä¸ªå­—æ®µæ ¹æœ¬æ²¡ä»€ä¹ˆäººç”¨ï¼Œä»…æœ‰æœ‰é™çš„å‡ ä¸ªç½‘ç«™å¯¹æ­¤è¿›è¡Œäº†è®¾ç½®ï¼ŒåŸå› å°±æ˜¯ãƒ¾(ï½¡ï½€Ğ”Â´ï½¡)CAè·‘å»ä¼ªé€ ä½ çš„åŸŸåçš„æ¦‚ç‡å®åœ¨å¤ªç‰¹ä¹ˆå°äº†ï¼Œå¦å¤–HSTSå’ŒHPKPéƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹é‚£å°±æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®æ²¡æœ‰è¢«åŠ«æŒï¼Œåªæœ‰å®¢æˆ·ç«¯æ”¶åˆ°äº†ä¸€ä¸ªæ­£ç¡®çš„HSTSè®¾ç½®æ‰èƒ½å¯¹åé¢çš„è¯·æ±‚å‘ç”Ÿä½œç”¨ã€‚å¦å¤–HKPKåœ¨æµè§ˆå™¨è®¾ç½®ä»£ç†çš„æƒ…å†µä¸‹æ˜¯ä¸å¯ç”¨çš„(åº”è¯¥æ˜¯ä¸ºäº†æ–¹ä¾¿è°ƒè¯•)ï¼Œè™½ç„¶HPKPå¦‚æ­¤çš„åºŸæŸ´ã€‚å¯æ˜¯åœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹å®æ–½å´æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œå¦‚æœä½ åœ¨APPä¸Šæ·»åŠ HPKPéªŒè¯å°±èƒ½é˜²æ­¢é‚£äº›ç”¨fiddleræŠ“åŒ…çš„å°ç™½ï¼Œè®©æŠ“åŒ…å¤±æ•ˆã€‚å¦‚æœè¦æŠ“åŒ…è¯·åç¼–è¯‘APPå»æ‰HPKPé€»è¾‘â†’_â†’&lt;/p&gt;
&lt;h2 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://cattail.me/tech/2015/11/30/how-https-works.html&quot;&gt;httpsåŸç†ç®€ç‰ˆ&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://blog.helong.info/blog/2015/09/06/tls-protocol-analysis-and-crypto-protocol-design/&quot;&gt;è§è¿‡æœ€å®Œæ•´çš„httpsä¸­æ–‡åšæ–‡&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://scotthelme.co.uk/&quot;&gt;å›½å¤–è®²è§£httpsæ¯”è¾ƒå¤šçš„åšå®¢&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://imququ.com&quot;&gt;å›½å†…è®²è§£httpsæ¯”è¾ƒå¤šçš„åšå®¢&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.uuu.com.tw/Public/content/article/140825tips.htm&quot;&gt;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E8%BF%AA%E8%8F%B2-%E8%B5%AB%E7%88%BE%E6%9B%BC%E5%AF%86%E9%91%B0%E4%BA%A4%E6%8F%9B&quot;&gt;Diffie-Hellmanä¸­æ–‡ç»´åŸº&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/datatheorem/TrustKit&quot;&gt;ios public key pinning&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™å¹´å¤´ç½‘ç»œåŠ«æŒå¦‚æ­¤æ™®éï¼Œä½œä¸ºæwebå¼€å‘çš„è¯´ä¸äº†è§£ç‚¹httpséƒ½ä¸å¥½æ„æ€ã€‚ç®€å•ç†è§£httpså¯ä»¥éå¸¸ç®€å•ï¼Œå¯æ˜¯ä¸€æ—¦ä¸Šå‡åˆ°å¯†ç å­¦ã€‚ãƒ¾(ï½¡ï½€Ğ”Â´ï½¡)ç‰µæ‰¯åˆ°çš„æ¦‚å¿µçœŸæ˜¯å¤ªå¤šäº†å¤ªç‰¹ä¹ˆå¤æ‚äº†ã€‚é„™äººè¿˜æ˜¯ä»ä¸ªäººå®ç”¨è§’åº¦å‡ºå‘ã€‚ç®€æ´è®°å½•ä¸€ä¸‹httpsç›¸å…³å†…å®¹,å¦å¤–æœ¬æ–‡ä½œä¸ºå›é¡¾å°šå¯ï¼Œä¸é€‚åˆä½œä¸ºåˆæ¬¡äº†è§£httpsçš„å‚è€ƒã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="network" scheme="http://ficapy.com/categories/network/"/>
    
    
  </entry>
  
  <entry>
    <title>Gmailè®¾ç½®è‡ªåŠ¨åˆ é™¤æ¨å¹¿é‚®ä»¶</title>
    <link href="http://ficapy.com/2016/05/25/gmail_auto_delete_promotions_email/"/>
    <id>http://ficapy.com/2016/05/25/gmail_auto_delete_promotions_email/</id>
    <published>2016-05-25T09:40:01.000Z</published>
    <updated>2016-05-25T10:34:51.000Z</updated>
    
    <content type="html">&lt;p&gt;ä¸€ç›´ä»¥æ¥æˆ‘éƒ½æ˜¯å¤šä¸ªé‚®ç®±æ··åˆä½¿ç”¨ï¼Œå¯¹Gmailé‚®ç®±ä¹Ÿä¸æ˜¯ç‰¹åˆ«æ„Ÿå†’(ä¸»åŠ›é‚®ç®±æ˜¯outlook(å› ä¸ºæ²¡æœ‰è¢«å¢™))ã€‚æˆ–è®¸æ˜¯å‡ å¤©æ²¡æœ‰æ‰“å¼€foxmailï¼Œåˆšæ‰“å¼€å°±æœ‰é‚£ä¹ˆå‡ åå°å„ç§åƒåœ¾æ¨å¹¿é‚®ä»¶ã€‚æˆ–è®¸æ˜¯å¿ƒæƒ…ä¸å¤§å¥½æˆ‘å»æœäº†ä¸‹å¦‚ä½•è¿‡æ»¤æ‰è¿™äº›é‚®ä»¶ï¼Œè®©ä»–ä»¬ä¸ä¼šè¢«foxmailå®¢æˆ·ç«¯æ¥æ”¶ã€‚äºæ˜¯æ„Ÿå—åˆ°äº†outlookå’Œgmailçš„æ˜æ˜¾å·®è·ï¼Œå¿ä¸ä½å‘ç¯‡åšæ–‡å±•ç¤ºä¸‹ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯åŸºäºä¸€ä¸ªç†å¿µï¼Œ&lt;strong&gt;è¢«å½’ç±»ä¸ºåƒåœ¾é‚®ä»¶å°±æ²¡å¿…è¦å±•ç¤ºç»™ç”¨æˆ·äº†&lt;/strong&gt;ï¼Œè®¾æƒ³ä¸€ä¸‹æœåŠ¡å•†é‚®ä»¶ç³»ç»Ÿå·²ç»è¯†åˆ«å‡ºäº†æŸé‚®ä»¶æ˜¯åƒåœ¾é‚®ä»¶ï¼Œå®¢æˆ·ç«¯è¿˜ä¼šä¾æ—§ä¸‹è½½å¹¶æ˜¾ç¤ºæœ‰å¤šå°‘å°åƒåœ¾é‚®ä»¶ï¼Œå¯¹äºç”¨æˆ·çœ‹åˆ°è¿™æ ·çš„æç¤ºæ€»ä¼šå¿ä¸ä½å»æ‰“å¼€åƒåœ¾ç®±æ‰«å‡ çœ¼ã€‚è‡³å°‘å¯¹äºæˆ‘æ¥è¯´ä»æ²¡åœ¨åƒåœ¾ç®±é‡åˆ°æœ‰ç”¨çš„é‚®ä»¶(æœ‰äº›æ¿€æ´»ç ä¹‹ç±»çš„é‚®ä»¶ä¼šæ‰‹åŠ¨å»æ£€æŸ¥é™¤å¤–)ï¼Œè¿™æ ·æˆ‘ä»¬å®Œå…¨å¯ä»¥&lt;strong&gt;æŠŠè¢«ç³»ç»Ÿåˆ¤å®šä¸ºæˆ‘ä»¬ä¸éœ€è¦çš„é‚®ä»¶ç›´æ¥åˆ é™¤æ‰&lt;/strong&gt;ï¼Œè¿™æ ·å°±ä¸ä¼šç”±é‚®ä»¶å®¢æˆ·ç«¯å±•ç¤ºåœ¨æˆ‘ä»¬é¢å‰äº†ï¼Œå½“ç„¶ä»¥ä¸Šå‡ºè‡ªä¸€ä¸ªå‰æï¼Œåº”è¯¥æ˜¯æ¯”è¾ƒä¸é‡è¦çš„é‚®ç®±(æ¯”å¦‚é„™äººçš„ä¸ªäººé‚®ç®±)ã€‚å‡å¦‚æŸå°å¯¹ä½ ç°å¸¸é‡è¦çš„é‚®ä»¶è¢«è‡ªåŠ¨åŠ åˆ°äº†åˆ é™¤é‚®ä»¶ç»„ï¼Œ30å¤©åå°±å†ä¹Ÿçœ‹ä¸åˆ°äº†ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šè¿™æ˜¯ä¸€ä¸ªé€‰æ‹©é‚®ä»¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰¾å‡ºé‚®ä»¶ç„¶åè®¾å®šæ“ä½œã€‚çœå»å¯¹outlookå¼±é¸¡æµç¨‹çš„åæ§½ï¼Œæœ€å‘çˆ¹çš„æ˜¯å®ƒåˆ›å»ºè§„åˆ™åä¸èƒ½å¯¹å†å²é‚®ä»¶è¿›è¡Œä½¿ç”¨ã€‚Gmailä½¿ç”¨ä¸“é—¨çš„æœç´¢è¯­æ³•ï¼Œoutlookä½¿ç”¨é€‰æ‹©é€‰æ‹©è¾“å…¥æ–‡æœ¬(çœ‹èµ·æ¥å¯¹å°ç™½å‹å¥½ï¼Œæ•ˆç‡è¾£é¸¡)ã€‚å½’åŠŸäºGmailå¼ºå¤§çš„å½’ç±»ã€‚å¯¹äºè‡ªåŠ¨åˆ é™¤æ”¶åˆ°çš„æ¨å¹¿é‚®ä»¶åœ¨Has the wordsæ ç›®å¡«å†™&lt;strong&gt;&lt;span class=&quot;highlight-text red&quot;&gt;category:promotions OR category:social&lt;/span&gt;&lt;/strong&gt;ï¼ˆè²Œä¼¼å…¨ç¯‡æœ‰ç”¨çš„ä¹Ÿå°±è¿™æ®µè¯­æ³•äº†ï¼Œæ›´å¼ºå¤§çš„æœç´¢åŠŸèƒ½è¯·æŸ¥çœ‹æœ€åç»™å‡ºçš„ç›¸å…³èµ„æ–™ï¼‰,è‡³äºoutlookâ†’â†’è¿™è´§ä¸ä»…æ²¡æœ‰ç»™é‚®ä»¶é»˜è®¤åˆ†ç±»ä¸ºæ¨å¹¿ä¹‹ç±»çš„ï¼Œè€Œä¸”ï¼ï¼åƒåœ¾é‚®ä»¶åˆ†ç±»éƒ½ä¸è®©ä½ ä½œä¸ºè§„åˆ™é€‰æ‹©&lt;/p&gt;
&lt;p&gt;å†è¯´ä¸€ä¸‹æœ¬äººå¯¹äºé‚®ä»¶å¤„ç†çš„ç¢ç¢å¿µ&lt;br&gt;ç†å¿µå°±æ˜¯ä½¿ç”¨å¤šä¸ªé‚®ç®±&lt;br&gt;å·¥ä½œé‚®ç®±(å½“ç„¶å…¬å¸éƒ½ä¼šæä¾›çš„,è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½å¤„ç†çš„ï¼Œç»é€¼æ˜¯ä¸ä¼šæ”¶åˆ°åƒåœ¾é‚®ä»¶çš„ï¼Œè€Œä¸”é‚®ä»¶ä¹Ÿä¸ä¼šåˆ é™¤)&lt;br&gt;ä¸ªäººé‚®ç®±(outlookç”¨æ¥æ³¨å†Œå„ç§ç½‘ç«™ï¼Œgmailç”¨æ¥é‚®ä»¶äº¤æµ)&lt;br&gt;QQé‚®ç®±(æœ‰äº›äººæ¯”è¾ƒå–œæ¬¢QQé‚®ç®±ï¼Œç»™ä»–ä»¬å‘æ–‡ä»¶)&lt;br&gt;163é‚®ç®±(è®¢é˜…å„ç§å‘¨æŠ¥weeklyä½¿ç”¨)&lt;br&gt;å¦å¤–ä¸€ä¸ªGmailé‚®ç®±(ä¸“é—¨è®¢é˜…é‚®ä»¶ç»„)&lt;br&gt;è¿™æ ·ä½¿ç”¨foxmailçš„æ—¶å€™ä¹Ÿèƒ½æ¯”è¾ƒæ˜ç¡®çš„çŸ¥é“å“ªäº›é‚®ä»¶å¤§æ¦‚æ˜¯å•¥ç±»å‹çš„XD&lt;/p&gt;
&lt;h2 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://duntuk.com/how-create-gmail-filter-automatically-delete-emails-older-x-amount-days&quot;&gt;æœ¬æ–‡æœç´¢èµ„æ–™&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://support.google.com/mail/answer/7190?hl=en&quot;&gt;gmailé«˜çº§æœç´¢è¯­æ³•(è¿‡æ»¤å™¨é€šç”¨)&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.iplaysoft.com/shou-fa-gmail.html&quot;&gt;å›½å†…å¦‚ä½•æ¥æ”¶Gmail(å¦‚æœä½ ä¸ä¼šè¿‡å¢™çš„è¯)&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ç›´ä»¥æ¥æˆ‘éƒ½æ˜¯å¤šä¸ªé‚®ç®±æ··åˆä½¿ç”¨ï¼Œå¯¹Gmailé‚®ç®±ä¹Ÿä¸æ˜¯ç‰¹åˆ«æ„Ÿå†’(ä¸»åŠ›é‚®ç®±æ˜¯outlook(å› ä¸ºæ²¡æœ‰è¢«å¢™))ã€‚æˆ–è®¸æ˜¯å‡ å¤©æ²¡æœ‰æ‰“å¼€foxmailï¼Œåˆšæ‰“å¼€å°±æœ‰é‚£ä¹ˆå‡ åå°å„ç§åƒåœ¾æ¨å¹¿é‚®ä»¶ã€‚æˆ–è®¸æ˜¯å¿ƒæƒ…ä¸å¤§å¥½æˆ‘å»æœäº†ä¸‹å¦‚ä½•è¿‡æ»¤æ‰è¿™äº›é‚®ä»¶ï¼Œè®©ä»–ä»¬ä¸ä¼šè¢«foxmailå®¢æˆ·ç«¯æ¥æ”¶ã€‚äºæ˜¯æ„Ÿå—åˆ°äº†outlookå’Œgmailçš„æ˜æ˜¾å·®è·ï¼Œå¿ä¸ä½å‘ç¯‡åšæ–‡å±•ç¤ºä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ä¼ªæŠ€æœ¯" scheme="http://ficapy.com/categories/%E4%BC%AA%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„ç½‘ç»œå­¦ä¹ å·¥å…·</title>
    <link href="http://ficapy.com/2016/05/24/my_network_learn_tools/"/>
    <id>http://ficapy.com/2016/05/24/my_network_learn_tools/</id>
    <published>2016-05-24T13:26:52.000Z</published>
    <updated>2016-05-25T10:25:52.000Z</updated>
    
    <content type="html">&lt;p&gt;è™½ç„¶ä¸€ç›´åœ¨å†™webåå°ï¼Œå¯æ˜¯å¯¹åº•å±‚ç½‘ç»œçŸ¥é“çš„ä¹Ÿä¸å¤šã€‚æ¯•ç«Ÿè¿™äº›ä¸œè¥¿ç»è¿‡å±‚å±‚å°è£…ï¼Œåˆ°webæ¡†æ¶æ—¶ç»™æˆ‘ä»¬æä¾›çš„å†…å®¹å·²ç»å’ŒTCP/IPç›¸éš”å¾ˆè¿œäº†ã€‚å¯æ˜¯ä½œä¸ºä¸€ä¸ªæœ‰å¥½å¥‡å¿ƒçš„äººã€‚æˆ‘è¿˜æ˜¯ä¼šä»”ç»†å»åˆ¨æ ¹é—®åº•ï¼Œå¾—åˆ°å¿ƒä¸­çš„ç­”æ¡ˆã€‚æ¢³ç†æ¸…æ¥šwebåå°å¼€å‘ä¸­æ‰€æ¥è§¦çš„ç§ç§ä¸œè¥¿ã€‚ä»¥å‰æ€»æƒ³æŠŠä¸œè¥¿å†™ç®€å•å†™ç‚¹å¤§è€Œå…¨çš„ä¸œè¥¿ï¼Œå¯æ˜¯åº•å±‚ç½‘ç»œæ¶‰åŠåˆ°çš„å†…å®¹çœŸæ˜¯å¤ªç‰¹ä¹ˆå¤æ‚äº†ã€‚æˆ‘ä¹Ÿåªèƒ½æ…¢æ…¢æ¥äº†ã€‚å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæœ¬ç¯‡åˆ—å‡ºå­¦ä¹ è¿‡ç¨‹ä¸­ç”¨åˆ°çš„ä¸€äº›ç½‘ç»œå·¥å…·åŠèµ„æº(å†…å®¹ä¸å®šæœŸæ›´æ–°)&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;è½¯ä»¶&quot;&gt;&lt;a href=&quot;#è½¯ä»¶&quot; class=&quot;headerlink&quot; title=&quot;è½¯ä»¶&quot;&gt;&lt;/a&gt;è½¯ä»¶&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;tcpdump/dumpcap/wireshark&lt;/p&gt;
&lt;p&gt; è¿™åº”è¯¥æ˜¯æœ€å¹¿ä¸ºäººçŸ¥çš„æ•°æ®å—…æ¢å·¥å…·äº†ï¼Œä»–ä»¬ä¹‹é—´çš„åŒºåˆ«å’Œè”ç³»åœ¨stackexchangeæœ‰ä¸€ä¸ªå›ç­”&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wireshark - powerfull sniffer which can decode lots of protocols, lots of filters.&amp;#10; &amp;#10;tshark - command line version of wireshark&amp;#10; &amp;#10;dumpcap (part of wireshark) - can only capture traffic and can be used by wireshark / tshark&amp;#10; &amp;#10;tcpdump - limited protocol decoding but available on most *NIX platforms&amp;#10; &amp;#10;ettercap - used for injecting traffic not sniffing&amp;#10; &amp;#10;All tools use libpcap (on windows winpcap) for sniffing. Wireshark / tshark / dumpcap can use tcpdump filter syntax as capture filter.&amp;#10; &amp;#10;As tcpdump is available on most *NIX system I usually use tcpdump. Depending on the problem I sometimes use tcpdump to capture traffic and write it to a file and the later use wireshark to analyze it. If available I use tshark but if the problem gets more complicated I still like to write the data to a file and then use Wireshark for analysis.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt; æ¯”è¾ƒç‰›çš„æ˜¯ä»¥ä¸Šäº§å“å‡å‡ºè‡ªThe Tcpdump teamç»„ç»‡ï¼Œæ›´ç‰›çš„æ˜¯æŸ¥çœ‹githubç»Ÿè®¡æ•°æ®å¾—çŸ¥å¤§æ¦‚ä¸»è¦ä»…æœ‰å››ä¸ªäººç»´æŠ¤ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;br&gt; ä½œä¸ºä½ç«¯ç”¨æˆ·æœ¬äººä½¿ç”¨tcpdumpå’Œwiresharkå°±å¤Ÿäº†ã€‚ä¸ºäº†å‡å°‘æ•°æ®åŒ…ã€‚æˆ‘ä¸€èˆ¬ä¼šç”¨vagrantå¼€è™šæ‹ŸæœºæŠ“åŒ…æŸ¥çœ‹è¯·æ±‚ã€‚ä½¿ç”¨&lt;code&gt;vagrant ssh -c &amp;quot;sudo tcpdump -i eth0 -s 0 -U -w - not port 22 and tcp&amp;quot; -- -ntt| wireshark -k -i -&lt;/code&gt; æˆ–è€… &lt;code&gt;vagrant ssh -c &amp;quot;sudo dumpcap -P -i any -w - -f &amp;#39;not tcp port 22 and tcp&amp;#39;&amp;quot; -- -ntt | wireshark -k -i -&lt;/code&gt; å‡å¯ã€‚ä¸€èˆ¬dumpcapæ²¡æœ‰é¢„è£…~~ã€‚æŠŠtcpdumpçš„å‚æ•°è§£é‡Šä¸‹,-i(interface)è¡¨ç¤ºç›‘å¬æŸä¸€ä¸ªæ¥å£æˆ–å…¨éƒ¨ï¼Œ-sè¡¨ç¤ºå•ä¸ªæ•°æ®åŒ…æœ€å¤§å¤šå°‘ï¼Œå¾ˆæ˜æ˜¾0ä»£è¡¨æ²¡é™åˆ¶ï¼Œ-Uè®¾ç½®æ¯ä¸ªåŒ…è¾“å‡ºä¸ºä¸€è¡Œï¼Œ-wä¿å­˜ã€‚åé¢å³ä¸ºè¿‡æ»¤è¡¨è¾¾å¼ï¼Œæ³¨æ„:ä¸€å®šè¦åŠ ä¸Š&lt;code&gt;-- -ntt&lt;/code&gt;ä¸åŠ ä¸Šwiresharkä¼šæŠ¥é”™ï¼Œè‡³äºä¸ºä»€ä¹ˆæˆ‘è¿˜çœŸæ²¡ææ˜ç™½ã€‚ã€‚ã€‚ã€‚å¾ˆæ˜æ˜¾ä½¿ç”¨tcpdumpå’Œwiresharkæœ€åŸºæœ¬çš„æŠ€èƒ½æ˜¯å­¦ä¼šè¿‡æ»¤è¡¨è¾¾å¼çš„è¯­æ³•ï¼Œå¦åˆ™è¿‡äºå˜ˆæ‚çš„ä¿¡æ¯æµé©¬ä¸Šä¼šè§¦å‘å¯†é›†ææƒ§ç—‡å§ã€‚æ³¨æ„:wiresharkä¸­capture filterå’Œdisplay filteræ˜¯å†³ç„¶ä¸åŒçš„è¯­æ³•ã€‚å¿«é€Ÿå…¥é—¨è¯·æŸ¥çœ‹&lt;a href=&quot;http://packetlife.net/media/library/12/tcpdump.pdf&quot;&gt;capture filteré€ŸæŸ¥è¡¨&lt;/a&gt;å’Œ&lt;a href=&quot;http://packetlife.net/media/library/13/Wireshark_Display_Filters.pdf&quot;&gt;display filteré€ŸæŸ¥è¡¨&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; æ˜¯å¦å¯¹å—…æ¢çš„åŸç†æ„Ÿåˆ°ç°å¸¸å¥½å¥‡ã€‚ä¸€å›¾èƒœåƒè¨€ã€‚å¸Œæœ›ä¸‹é¢è¿™å¼ å›¾èƒ½å¤Ÿåˆæ­¥è§£å†³ä½ çš„ç–‘æƒ‘(è°·æ­Œæœç´¢å›¾ç‰‡libpcap)&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/packetfilter.png&quot; alt=&quot;å—…æ¢åŸç†&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.secdev.org/projects/scapy/&quot;&gt;scapy&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; å¤§æ¦‚å¯ä»¥çœ‹æˆæ˜¯pythonå¯¹libpcapçš„å°è£…ã€‚å¯ä»¥ä¸ä»…ä»…å¯ä»¥å—…æ¢ï¼Œè¿˜å¯ä»¥ç›´æ¥æ„å»ºä¸€ä¸ªåŒ…å‘é€å‡ºå»(ä»¥ä¸Šwiresharkæ˜¯ä¸æ”¯æŒçš„)ï¼Œæ‰€æ”¯æŒçš„åè®®ä¹Ÿæ˜¯ç°å¸¸ä¹‹å¤šã€‚å¯è°“æ˜¯å­¦ä¹ ä¹‹åˆ©å™¨ã€‚å¯ä»¥æŸ¥çœ‹&lt;a href=&quot;http://www.secdev.org/projects/scapy/demo.html&quot;&gt;å®˜æ–¹DEMOä½“éªŒä¸‹&lt;/a&gt;ï¼Œä¸è¿‡æ­¤è½¯ä»¶ç›¸å¯¹çš„ä¾èµ–è¾ƒå¤šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.dest-unreach.org/socat/&quot;&gt;socat&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; å’Œnetcatæ˜¯ä¸€ç±»ï¼Œæ®è¯´æ›´å¼ºå¤§ã€‚è‡³äºæœ‰å¤šå¼ºå¤§æˆ‘å°±ä¸çŸ¥é“äº†ã€‚æœ‰å¾…ä»¥åæŒ–æ˜ã€‚æœ¬äººä¹Ÿå°±æŒ‰ç…§tldrä¸Šçš„ç¤ºä¾‹æŒ‰éœ€è¦è¿›è¡Œä½“éªŒäº†ä¸‹&lt;code&gt;socat - TCP-LISTEN:8080,fork&lt;/code&gt;æ„Ÿè§‰æ˜¯æŒºå¥½ç”¨å“’&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/jkbrzt/httpie&quot;&gt;httpie&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; æŸä¸€å¤©æˆ‘å‘ç°githubä¸Špythonç±»ç›®staræ•°ç›®æœ€å¤šçš„æ˜¯è¿™è´§ã€‚ç„¶åæˆ‘å°±è¯•ç”¨äº†ä¸‹ã€‚ã€‚ã€‚ã€‚ã€‚å¯¹äºè°ƒè¯•æ¥è¯´æ˜“ç”¨æ€§ç®€ç›´ç§’æ€curlæ— æ•°å€(ä»…ä»è°ƒè¯•è§’åº¦)ã€‚å®Œå…¨å°±æ˜¯pythoné‡Œé¢requestså’Œurllibçš„å¯¹æ¯”å“‡ã€‚ä½¿ç”¨ç°å¸¸ç®€å•ï¼Œæ¯”å¦‚&lt;code&gt;http g.cn -v --debug&lt;/code&gt;(è¯»è€…ä¸å¦¨äº²è‡ªä½“éªŒä¸‹),æ¯”è¾ƒå€¼å¾—å…³æ³¨çš„æ˜¯httpieçš„sessionä½¿ç”¨ä»¥åŠå®ƒæ”¯æŒé…ç½®æ–‡ä»¶ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹æ–‡æ¡£&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.telerik.com/fiddler&quot;&gt;fiddler&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; ä¸»è¦å¯¹åº”ç”¨å±‚httpè¿›è¡Œå¤„ç†ã€‚å®ƒä¸»è¦ä½¿ç”¨WinInetè‡ªåŠ¨è®¾ç½®ä»£ç†æˆ–è€…ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®ä»£ç†ã€‚æ„å‘³ç€å¦‚æœæ— æ³•è®¾ç½®ä»£ç†é‚£ä¹ˆè¯¥è½¯ä»¶æ˜¯æ— æ³•æ•è·åˆ°éœ€è¦çš„æ•°æ®çš„ã€‚å¦å¤–å®ƒæ”¯æŒå¯¼å…¥pcapæ ¼å¼çš„æŠ¥æ–‡æŸ¥çœ‹httpäº¤äº’(ä¸èƒ½å®æ—¶ç°å¸¸å¯æƒœ)ï¼Œ&lt;a href=&quot;http://docs.telerik.com/fiddler/KnowledgeBase/Proxy&quot;&gt;fiddleråŸç†å¯æŸ¥çœ‹&lt;/a&gt;ã€‚æœ€åæ”¾ä¸€å¼ å›¾&lt;br&gt; &lt;img src=&quot;http://ficapy.b0.upaiyun.com/blogimg/TrafficFlow.png&quot; alt=&quot;fiddleråŸç†&quot;&gt;    &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;tldr&lt;/p&gt;
&lt;p&gt; è¯¥è½¯ä»¶ä¸å±äºè¯¥ç±»åˆ«ï¼Œå¯æ˜¯å‘½ä»¤è¡Œå¯¹äºåˆšæ¥è§¦çš„æ–°æ‰‹æ˜¯ä¸é‚£ä¹ˆæœ‰å¥½çš„ã€‚æ¯”å¦‚tcp -hå¾—åˆ°&lt;/p&gt;
 &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    tcpdump version 4.7.3 -- Apple version 67&amp;#10;libpcap version 1.5.3 - Apple version 54&amp;#10;Usage: tcpdump [-aAbdDefhHIJKlLnNOpqRStuUvxX#] [ -B size ] [ -c count ]&amp;#10;&amp;#9;&amp;#9;[ -C file_size ] [ -E algo:secret ] [ -F file ] [ -G seconds ]&amp;#10;&amp;#9;&amp;#9;[ -i interface ] [ -j tstamptype ] [ -M secret ]&amp;#10;&amp;#9;&amp;#9;[ -Q metadata-filter-expression ]&amp;#10;&amp;#9;&amp;#9;[ -r file ] [ -s snaplen ] [ -T type ] [ --version ] [ -V file ]&amp;#10;&amp;#9;&amp;#9;[ -w file ] [ -W filecount ] [ -y datalinktype ] [ -z command ]&amp;#10;&amp;#9;&amp;#9;[ -Z user ] [ expression ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt; ä¹Ÿæ˜¯ç°å¸¸å®¹æ˜“è®©äººæ‘¸ä¸ç€å¤´è„‘,&lt;code&gt;tldr tcpdump&lt;/code&gt;å¯ä»¥ç»™å‡ºå¸¸ç”¨çš„æœ€åŸºæœ¬çš„ç”¨æ³•ã€‚å¯¹äºåˆå­¦è€…éå¸¸å‹å¥½ï¼Œèƒ½å¤Ÿæœ€å¼€å§‹å°±ä½“éªŒåˆ°ç¥å™¨çš„å¼ºå¤§ï¼Œè¿™æ ·è‡³å°‘å…´è¶£æ˜¯äº§ç”Ÿäº†å§~~~&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;èµ„æº&quot;&gt;&lt;a href=&quot;#èµ„æº&quot; class=&quot;headerlink&quot; title=&quot;èµ„æº&quot;&gt;&lt;/a&gt;èµ„æº&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://packetlife.net/library/cheat-sheets/&quot;&gt;æŠ“åŒ…ä¸“ä¸šèµ„æ–™è¾ƒå¤š,cheat-sheetå€¼å¾—ä¸€çœ‹ã€‚å¦å¤–æ­¤åšå®¢å‹é“¾ä¹Ÿå¯ä»¥çœ‹çœ‹&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://coolshell.cn/articles/11564.html&quot;&gt;é…· å£³â€“TCP çš„é‚£äº›äº‹å„¿&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;a href=&quot;#ç›¸å…³èµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³èµ„æ–™&quot;&gt;&lt;/a&gt;ç›¸å…³èµ„æ–™&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Pcap&quot;&gt;libpcapç»´åŸºç™¾ç§‘&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://networkengineering.stackexchange.com/questions/10073/difference-between-sniffer-tools&quot;&gt;tcpdump/dumpcapåŒºåˆ«&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://ask.wireshark.org/questions/6660/what-is-the-difference-between-capture-filter-and-display-filter&quot;&gt;capture filterå’Œdisplay filterä¸åŒ&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://binxian.chetui.org/?p=129&quot;&gt;åŸºäºlibpcapçš„snifferå®ç°&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;è™½ç„¶ä¸€ç›´åœ¨å†™webåå°ï¼Œå¯æ˜¯å¯¹åº•å±‚ç½‘ç»œçŸ¥é“çš„ä¹Ÿä¸å¤šã€‚æ¯•ç«Ÿè¿™äº›ä¸œè¥¿ç»è¿‡å±‚å±‚å°è£…ï¼Œåˆ°webæ¡†æ¶æ—¶ç»™æˆ‘ä»¬æä¾›çš„å†…å®¹å·²ç»å’ŒTCP/IPç›¸éš”å¾ˆè¿œäº†ã€‚å¯æ˜¯ä½œä¸ºä¸€ä¸ªæœ‰å¥½å¥‡å¿ƒçš„äººã€‚æˆ‘è¿˜æ˜¯ä¼šä»”ç»†å»åˆ¨æ ¹é—®åº•ï¼Œå¾—åˆ°å¿ƒä¸­çš„ç­”æ¡ˆã€‚æ¢³ç†æ¸…æ¥šwebåå°å¼€å‘ä¸­æ‰€æ¥è§¦çš„ç§ç§ä¸œè¥¿ã€‚ä»¥å‰æ€»æƒ³æŠŠä¸œè¥¿å†™ç®€å•å†™ç‚¹å¤§è€Œå…¨çš„ä¸œè¥¿ï¼Œå¯æ˜¯åº•å±‚ç½‘ç»œæ¶‰åŠåˆ°çš„å†…å®¹çœŸæ˜¯å¤ªç‰¹ä¹ˆå¤æ‚äº†ã€‚æˆ‘ä¹Ÿåªèƒ½æ…¢æ…¢æ¥äº†ã€‚å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæœ¬ç¯‡åˆ—å‡ºå­¦ä¹ è¿‡ç¨‹ä¸­ç”¨åˆ°çš„ä¸€äº›ç½‘ç»œå·¥å…·åŠèµ„æº(å†…å®¹ä¸å®šæœŸæ›´æ–°)&lt;/p&gt;
    
    </summary>
    
      <category term="network" scheme="http://ficapy.com/categories/network/"/>
    
    
  </entry>
  
  <entry>
    <title>openwrtåˆ·æœºå¸¸è¯†</title>
    <link href="http://ficapy.com/2016/05/05/openwrt_recovery_you_need_to_know/"/>
    <id>http://ficapy.com/2016/05/05/openwrt_recovery_you_need_to_know/</id>
    <published>2016-05-05T12:59:17.000Z</published>
    <updated>2016-06-06T14:19:58.000Z</updated>
    
    <content type="html">&lt;p&gt;openwrtåˆ·æœºæ•™ç¨‹éå¸¸å¤šï¼Œå¯æ˜¯å¾ˆå¤šçš„è®©äººæä¸æ¸…æ¦‚å¿µã€‚ä¸æ˜ç™½åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šå‘ç”Ÿé—®é¢˜ã€‚æˆ‘ä»¬æœ€å¥½èƒ½åœ¨é‡åˆ°é—®é¢˜å‰é¢„çŸ¥ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿé—®é¢˜ã€‚ä»¥ä¸‹å†…å®¹æ˜¯æœ¬äººèŠ±è´¹ä¸€å¤©æ—¶é—´æ”¶é›†åˆ°çš„ä¸€äº›æ¦‚å¿µå†…å®¹ã€‚å› ä¸ºä¸æ˜¯ç‰¹åˆ«äº†è§£ã€‚å¯èƒ½ç†è§£ä¼šäº§ç”Ÿåå·®ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ã€‚æ–‡æœ«ä¼šç”¨ç®€çŸ­çš„å†…å®¹è®²ä¸€ä¸‹ç¬”è€…çš„åˆ·æœºè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;BootLoader&quot;&gt;&lt;a href=&quot;#BootLoader&quot; class=&quot;headerlink&quot; title=&quot;BootLoader&quot;&gt;&lt;/a&gt;BootLoader&lt;/h2&gt;&lt;p&gt;ä¸€èˆ¬åˆ·æœºæ•™ç¨‹ä¸­ä¸å¤§ä¼šå‡ºç°è¯¥åè¯ï¼Œå¯æ˜¯å®ƒå…¶å®æ˜¯éå¸¸é‡è¦çš„ã€‚å®ƒå’Œæˆ‘ä»¬å¸¸å¬åˆ°çš„BIOSæ˜¯ä¸€ç±»ç¨‹åºâ€“&lt;code&gt;å¼•å¯¼ç¨‹åº&lt;/code&gt;ï¼Œåœ¨æˆ‘ä»¬ç»™ç”µè„‘é‡è£…ç³»ç»Ÿçš„æ—¶å€™é€šå¸¸éƒ½æ˜¯å¼€æœºçš„æ—¶å€™æŒ‰ç‰¹å®šçš„åŠŸèƒ½é”®ç„¶åè¿›å…¥å›¾å½¢ç•Œé¢å’ŒBIOSäº¤äº’ã€‚openwrtåˆ·æœºä¸­å…¶å®ä¹Ÿéå¸¸ç±»ä¼¼ï¼Œåªæ˜¯äº¤äº’çš„æ–¹å¼ä¸åŒâ†’â†’â†’ç›´æ¥é€ æˆäº†ä¸‹é¢å‡ ä¸ªåè¯çš„äº§ç”Ÿ&lt;/p&gt;
&lt;h2 id=&quot;ä¸æ­»UBoot&quot;&gt;&lt;a href=&quot;#ä¸æ­»UBoot&quot; class=&quot;headerlink&quot; title=&quot;ä¸æ­»UBoot&quot;&gt;&lt;/a&gt;ä¸æ­»UBoot&lt;/h2&gt;&lt;p&gt;å³ä¸ºä¸Šé¢æè¿°çš„&lt;code&gt;å¼•å¯¼ç¨‹åº&lt;/code&gt;çš„ä¸€ç§(å³è¿˜æœ‰åˆ«çš„å¼•å¯¼ç¨‹åº)ã€‚è¯•æƒ³æˆ‘ä»¬ç»™ç”µè„‘è£…ç³»ç»Ÿçš„æ—¶å€™ã€‚æ— è®ºæ€ä¹ˆå¤±è´¥ï¼Œéƒ½æ˜¯å¯ä»¥è¿›å…¥BIOSè®¾ç½®ï¼Œç„¶åä¸€æ¬¡æ¬¡çš„é‡è£…ç³»ç»Ÿçš„ã€‚å¯æ˜¯æœ‰çš„openwrtçš„å¼•å¯¼ç¨‹åºåˆ™ä¸åŒã€‚ä»–ä»¬åªç»™ä½ ä¸€æ¬¡å¤±è´¥çš„æœºä¼šã€‚å¦‚æœå¤±è´¥å°±è¦ç”¨ç‰¹æ®Šçš„æ‰‹æ®µé‡è£…(æ¯”å¦‚TTLä¸²å£)ï¼Œä¸æ­»Ubootå³ç›¸å¯¹é‚£ç§å¤±è´¥å°±æ­»çš„Bootloaderè€Œè¨€çš„(å…¶å®æ„Ÿè§‰è¿™åº”è¯¥æ˜¯ä¸€ä¸ªç†æ‰€å½“ç„¶çš„è‡ªå¸¦åŠŸèƒ½,ç„¶è€Œå¹¶æ²¡æœ‰)ã€‚ä¸æ­»UBootæä¾›è¿™æ ·çš„äº¤äº’â†’â†’â†’å¦‚æœåˆ·æœºå¤±è´¥ï¼Œæ— æ³•sshè¿›å…¥åˆ°openwrtç³»ç»Ÿï¼Œé‚£ä¹ˆUbootæä¾›ä¸€ä¸ªwebæœåŠ¡ï¼Œè·¯ç”±å™¨è¿è¡Œçš„æ—¶å€™ç›´æ¥é€šè¿‡LANæ¥å£è¿æ¥ç”µè„‘ï¼Œç„¶åé€šè¿‡webé¡µé¢ä¸Šä¼ å›ºä»¶åˆ·æœºã€‚è¿™æ ·æ— è®ºåˆ·å›ºä»¶å¦‚ä½•å¤±è´¥ã€‚éƒ½å¯ä»¥åå¤åˆ·å›ºä»¶ã€‚&lt;code&gt;å¯ä»¥çœ‹å‡ºä¸æ­»Ubootå®ƒåªæ˜¯æä¾›äº†ä¸€ç§æ¯”è¾ƒæ–¹ä¾¿çš„å’Œå¼•å¯¼ç¨‹åºäº¤äº’çš„é€”å¾„&lt;/code&gt;ã€‚å…¶ä»–å¸¸è§é€”å¾„è¿˜åŒ…æ‹¬è‡ªåŠ¨è¯»å–Uç›˜é‡Œé¢çš„å›ºä»¶ã€ä½¿ç”¨TTLä¸²å£ç­‰&lt;/p&gt;
&lt;h2 id=&quot;TTLåˆ·æœº&quot;&gt;&lt;a href=&quot;#TTLåˆ·æœº&quot; class=&quot;headerlink&quot; title=&quot;TTLåˆ·æœº&quot;&gt;&lt;/a&gt;TTLåˆ·æœº&lt;/h2&gt;&lt;p&gt;å¬èµ·æ¥å¾ˆé«˜å¤§ä¸Šæœ‰æ²¡æœ‰ï¼Œå…¶å®ä¹Ÿä»…ä»…åªæ˜¯å’ŒBootLoaderè¿›è¡Œäº¤äº’çš„ä¸€ç§æ‰‹æ®µã€‚æ‰€ä»¥å¦‚æœä½ æ„Ÿè§‰å®ƒèƒ½è§£æ•‘ä»»ä½•ç –æœºé‚£å°±å¤§é”™ç‰¹é”™äº†ã€‚å› ä¸ºå®ƒéœ€è¦è®¾å¤‡é¢„ç•™å£è€Œä¸”éœ€è¦TTLä¸²å£è®¾å¤‡ï¼Œæ‰€ä»¥æ™®é€šç©å®¶æ˜¯ä¸ä¼šå¤ªæœ‰æœºä¼šé€šè¿‡è¯¥æ–¹æ³•åˆ·æœºçš„ï¼Œä¸æ­»Ubooté€šè¿‡webäº¤äº’ï¼ŒTTLåˆ·æœºé€šè¿‡TTLä¸²å£ã€‚æ‰€ä»¥ä»–ä»¬å¹¶æ²¡æœ‰å®è´¨çš„åŒºåˆ«ï¼Œéƒ½æ˜¯å’Œbootè¿›è¡Œäº¤äº’ã€‚&lt;/p&gt;
&lt;h2 id=&quot;mtd&quot;&gt;&lt;a href=&quot;#mtd&quot; class=&quot;headerlink&quot; title=&quot;mtd&quot;&gt;&lt;/a&gt;mtd&lt;/h2&gt;&lt;p&gt;Memory_Technology_Device,å¦‚æœæ‰§è¡Œå‘½ä»¤åˆ·æœºï¼Œé‚£ä¹ˆåœ¨æ•™ç¨‹ä¸­mtdè¿™ä¸ªè¯å¹¶ä¸é™Œç”Ÿï¼Œå®ƒæä¾›&lt;code&gt;å¯¹æ–‡ä»¶ç³»ç»Ÿè¯»å†™çš„æ¥å£&lt;/code&gt;ï¼ˆæè¿°å¯èƒ½ä¸å‡†ç¡®ï¼‰ã€‚å’Œlinuxä¸­çš„ddå·®ä¸å¤šå§&lt;/p&gt;
&lt;h2 id=&quot;é”UBoot&quot;&gt;&lt;a href=&quot;#é”UBoot&quot; class=&quot;headerlink&quot; title=&quot;é”UBoot&quot;&gt;&lt;/a&gt;é”UBoot&lt;/h2&gt;&lt;p&gt;å³é™åˆ¶mtdå»æ“¦å†™u-bootåˆ†åŒºã€‚å¦‚æœæ‰§è¡Œå‘½ä»¤å†™å…¥çš„æ—¶å€™æç¤ºè¢«é”å°±æ˜¯é”äº†(å¥½åƒæ˜¯åºŸè¯)ã€‚è§£å†³åŠæ³•å°±æ˜¯å…ˆåˆ·ä¸€ä¸ªå…è®¸å†™å…¥u-bootåˆ†åŒºçš„å›ºä»¶ï¼Œå½“ç„¶é”ä½ä¹Ÿä¸æ˜¯å®Œå…¨æ²¡é“ç†çš„ï¼Œå› ä¸ºåˆ·ubootæ˜¯åˆ·openwrtä¸­å±é™©æ€§æœ€é«˜çš„ä¸€æ­¥ã€‚å½“ç„¶ä¹Ÿæœ‰æ¶å¿ƒçš„äº§å“åŒæ—¶é™åˆ¶ä½ æ“¦å†™å›ºä»¶åˆ†åŒºï¼Œæ¯”å¦‚æè·¯ç”±3ã€‚é‡ä¸Šè¿™ç§æ™®é€šæ–¹æ³•æ— è§£äº†ã€‚æ—¢ç„¶åˆ·ubooté£é™©é«˜ï¼Œé‚£ä¹ˆä¸ºä½•è¦åˆ·å‘¢ã€‚æˆ‘æƒ³å› ä¸ºæ˜¯è‡ªå¸¦çš„BootLoaderä¸æ”¯æŒä¸æ­»è¿™ç§æ–¹å¼é€ æˆçš„ï¼Œæˆ–è€…å®˜æ–¹é€šè¿‡booté™åˆ¶å®‰è£…éå®˜æ–¹å›ºä»¶&lt;/p&gt;
&lt;h2 id=&quot;Flash-å†…å­˜ç­‰å‚æ•°&quot;&gt;&lt;a href=&quot;#Flash-å†…å­˜ç­‰å‚æ•°&quot; class=&quot;headerlink&quot; title=&quot;Flash/å†…å­˜ç­‰å‚æ•°&quot;&gt;&lt;/a&gt;Flash/å†…å­˜ç­‰å‚æ•°&lt;/h2&gt;&lt;p&gt;ä¸‹è½½ç©å®¶è‡ªåˆ¶å›ºä»¶çš„æ—¶å€™éœ€è¦çŸ¥é“è‡ªå·±çš„è®¾å¤‡å‚æ•°ï¼Œå¯ä»¥é€šè¿‡&lt;a href=&quot;https://wiki.openwrt.org/toh/start&quot;&gt;openwrtå®˜æ–¹æŸ¥æ‰¾&lt;/a&gt;ã€‚sshè¿›å…¥openwrtå¯ä»¥é€šè¿‡freeæŸ¥çœ‹å†…å­˜å¤§å°ã€‚æ³¨æ„é€šè¿‡df -hæŸ¥çœ‹åˆ°çš„å¹¶ä¸æ˜¯Flashå¤§å°ï¼Œè‡³äºä¸ºä»€ä¹ˆæˆ‘ä¹Ÿä¸å¤§æ˜ç™½ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åˆ·æœºå°æ€»ç»“&quot;&gt;&lt;a href=&quot;#åˆ·æœºå°æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;åˆ·æœºå°æ€»ç»“&quot;&gt;&lt;/a&gt;åˆ·æœºå°æ€»ç»“&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;sshè¿›å…¥openwrtï¼Œå°å¿ƒè°¨æ…ä½¿ç”¨mtdåˆ·ä¸æ­»uboot(å› ä¸ºè¯¥æ­¥æˆåŠŸååˆ·å›ºä»¶å¤±è´¥ä¹Ÿå¯å®‰ç„¶æ— æ™ï¼Œsoè¯¥æ­¥æ”¶ç›Šå¤§äºé£é™©)ï¼Œå½“ç„¶è¦æ˜¯ä½ è¿™ä¸€æ­¥å°±å¤±è´¥äº†ã€‚æœºå™¨åŸºæœ¬å°±å˜ç –äº†ã€‚å› ä¸ºTTLè¿™ç±»ç§‘æŠ€ä¹Ÿæ˜¯å’Œbootäº¤äº’çš„ã€‚bootéƒ½è¢«åˆ·æŒ‚äº†ã€‚åŸºæœ¬æ²¡æˆäº†ï¼Œåªèƒ½é€šè¿‡ä¸“ç”¨è®¾å¤‡å†™å…¥æ¥è§£å†³äº†&lt;/li&gt;
&lt;li&gt;æœ‰äº†ä¸æ­»ubootè¿™ç±»ç§‘æŠ€æŠ¤ä½“ï¼Œæ„å‘³ç€ä½ åªè¦ä¸è¦ä¹±ä½œæ­»å»éšä¾¿åå¤åˆ·booté‚£ä¹ˆååå¤å¤åˆ·å›ºä»¶éƒ½æ˜¯æ²¡äº‹çš„ï¼Œå³ä½¿åˆ·å›ºä»¶å˜ç –ã€‚å¦:æœ‰æ²¡æœ‰çœ‹åˆ°ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½å†™çš„é€šè¿‡LANå£æ¥åˆ·å›ºä»¶ï¼Œå…¶å®çœ‹å®Œä¸Šé¢çš„ä¸€äº›æ¦‚å¿µï¼Œæ˜¯å®Œå…¨ä¸éœ€è¦è¿™æ ·çš„(å› ä¸ºæœ‰çš„ç¬”è®°æœ¬å¹¶æ²¡æœ‰LANæ¥å£)ã€‚è¿›å…¥åˆ°openwrté‡Œé¢é€šè¿‡mtdåˆ·å›ºä»¶å’Œè¿›å…¥åˆ°ubootçš„webé¡µé¢å¹¶æ²¡æœ‰ä»»ä½•åŒºåˆ«&lt;/li&gt;
&lt;li&gt;é€‰æ‹©å›ºä»¶çš„æ—¶å€™å¯ä»¥åœ¨æ·˜å®ä¸Šæ‰¾åº—ä¸»ã€‚æ¯•ç«Ÿåˆ«äººå­˜è´§å¤šXD&lt;/li&gt;
&lt;li&gt;ç½‘ä¸Šæ‰¾å‡ ä¸ªå’Œè‡ªå·±ä¸€æ ·è®¾å¤‡çš„æ•™ç¨‹è´´ï¼Œæ€ç´¢ä¸‹åˆ«äººçš„æ“ä½œå‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå‚å›ºä»¶å’Œsysupgradeçš„åŒºåˆ«è§å‚è€ƒèµ„æ–™æœ€åä¸€ä¸ªé“¾æ¥&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;ç¬”è€…åˆ·æœºè¿‡ç¨‹&quot;&gt;&lt;a href=&quot;#ç¬”è€…åˆ·æœºè¿‡ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;ç¬”è€…åˆ·æœºè¿‡ç¨‹&quot;&gt;&lt;/a&gt;ç¬”è€…åˆ·æœºè¿‡ç¨‹&lt;/h2&gt;&lt;p&gt;å› ä¸ºæˆ‘çš„è·¯ç”±å‡ºå‚å°±æ˜¯ä¸æ­»ubootï¼Œæ‰€ä»¥æˆ‘åœ¨æ”¶é›†äº†ä¸€å¤©èµ„æ–™ä¹‹åï¼Œè¿›è¡Œäº†å¦‚ä¸‹æ“ä½œ&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ä¸‹è½½å›ºä»¶firmware&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scp firmware root@&lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;8.1&lt;/span&gt;:/tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mtd -r write /tmp/firmware firmware&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;over ç„¶åç­‰ä¸¤ä¸‰åˆ†é’Ÿå°±å¥½äº†ï¼Œå½“ç„¶æˆ‘å‡­ç€å¥½å¥‡çš„å¿ƒç†éšä¾¿åˆ·äº†å‡ ä¸ªåˆ«çš„å›ºä»¶ã€‚å¾ˆä¸å‡ºæ„å¤–çš„å˜ç –äº†ã€‚ç„¶åé€šè¿‡LANè¿æ¥ï¼Œå†åˆ·å°±å¥½äº†&lt;/p&gt;
&lt;h2 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;a href=&quot;#å‚è€ƒèµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;/a&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.shuyz.com/fix-openwrt-connection-with-putty.html&quot;&gt;å…³äºä¸²å£TTLã€USBè½¬æ¥å®ä¾‹(å«å›¾)&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.right.com.cn/forum/thread-154561-1-1.html&quot;&gt;å…³äºåˆ·UBoot&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.v2ex.com/t/160078&quot;&gt;ä¸æ­»ubootåœ¨v2exä¸Šçš„ä¸€ä¸ªè®¨è®º&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/xcoderone/article/details/48030771&quot;&gt;TTLçº¿åˆ·åŸç†&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.right.com.cn/forum/forum.php?mod=viewthread&amp;amp;tid=54647#pid392795&quot;&gt;å¦ä¸€ä¸ªTTLçº¿åˆ·åŸç†&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/xcoderone/article/details/48031279&quot;&gt;å†æ¥ä¸€ä¸ªTTLçº¿åˆ·å®ä¾‹&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://wiki.openwrt.org/doc/techref/bootloader&quot;&gt;å…³äºBootLoader&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.atime.me/research/openwrt-pandorabox-introduction.html&quot;&gt;åˆæ¢OpenWrt&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Memory_Technology_Device&quot;&gt;MTDç»´åŸºç™¾ç§‘ä»‹ç»&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.crifan.com/files/doc/docbook/linux_nand_driver/release/webhelp/mtd_memory_technology_device.html&quot;&gt;MTDæ‰©å±•é˜…è¯»&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://myop.cf/archives/546&quot;&gt;å¦‚æœä½ çœ‹ä¸æ‡‚è¿™ç¯‡æ–‡ç« ï¼Œé‚£ä¹ˆå…¨ç¯‡ä½ æ˜¯ç™½çœ‹äº†&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;openwrtåˆ·æœºæ•™ç¨‹éå¸¸å¤šï¼Œå¯æ˜¯å¾ˆå¤šçš„è®©äººæä¸æ¸…æ¦‚å¿µã€‚ä¸æ˜ç™½åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šå‘ç”Ÿé—®é¢˜ã€‚æˆ‘ä»¬æœ€å¥½èƒ½åœ¨é‡åˆ°é—®é¢˜å‰é¢„çŸ¥ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿé—®é¢˜ã€‚ä»¥ä¸‹å†…å®¹æ˜¯æœ¬äººèŠ±è´¹ä¸€å¤©æ—¶é—´æ”¶é›†åˆ°çš„ä¸€äº›æ¦‚å¿µå†…å®¹ã€‚å› ä¸ºä¸æ˜¯ç‰¹åˆ«äº†è§£ã€‚å¯èƒ½ç†è§£ä¼šäº§ç”Ÿåå·®ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ã€‚æ–‡æœ«ä¼šç”¨ç®€çŸ­çš„å†…å®¹è®²ä¸€ä¸‹ç¬”è€…çš„åˆ·æœºè¿‡ç¨‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ä¼ªæŠ€æœ¯" scheme="http://ficapy.com/categories/%E4%BC%AA%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>é˜¿é‡Œäº‘OSSç»‘å®šletsencryptè¯ä¹¦</title>
    <link href="http://ficapy.com/2016/03/11/letsencrypt_aliyun_oss/"/>
    <id>http://ficapy.com/2016/03/11/letsencrypt_aliyun_oss/</id>
    <published>2016-03-11T10:28:34.000Z</published>
    <updated>2016-05-30T10:41:42.000Z</updated>
    
    <content type="html">&lt;p&gt;ç»§ä¸Šç¯‡æ–‡ç« ä¹‹åï¼Œè®²è§£é˜¿é‡Œäº‘OSSç»‘å®šletsencryptã€‚å…¶å®ç½‘ä¸Šè®²è¿°letencryptä½¿ç”¨æ–¹æ³•çš„æ–‡ç« éå¸¸ä¹‹å¤šã€‚æœ¬ç¯‡æ–‡ç« ç¬”è€…å°†ä¼šè®²è§£ä¸€äº›å…¶ä»–çš„æ¯”è¾ƒæµ…æ˜¾çš„åŸç†ã€‚å³ä¸ºä»€ä¹ˆè¦è¿™æ ·åšã€‚è¯¥æ­¥éª¤åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¯¹äºå®é™…æ“ä½œæ­¥éª¤ï¼Œè¯·å‚ç…§æœ€åçš„å‚è€ƒé“¾æ¥ã€‚&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;å…³äºRSAçš„é‚£äº›äº‹å„¿&quot;&gt;&lt;a href=&quot;#å…³äºRSAçš„é‚£äº›äº‹å„¿&quot; class=&quot;headerlink&quot; title=&quot;å…³äºRSAçš„é‚£äº›äº‹å„¿&quot;&gt;&lt;/a&gt;å…³äºRSAçš„é‚£äº›äº‹å„¿&lt;/h2&gt;&lt;p&gt;webå®‰å…¨ç¦»ä¸å¼€RSAéå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œè¯´çœŸçš„æ•°å­¦åŸç†æˆ‘æ²¡çœ‹æ˜ç™½ã€‚ä»…ä»…çŸ¥é“æœ€åç”Ÿæˆçš„å…¬é’¥å’Œç§é’¥å…¶å®éƒ½æ˜¯ä¸€å¯¹æ•°å­—ã€‚å¯æ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°ç”Ÿæˆçš„å…¬ç§é’¥æ˜¯å­—ç¬¦ä¸²ã€‚å…¶å®å®ƒåªæ˜¯ç»è¿‡äº†ä¸€äº›ç¼–ç (ä¸‹è§å‚è€ƒ)ã€‚ç„¶åä¸€ä¸ªå¯†é’¥ç”¨æ¥åŠ å¯†ä¸€ä¸ªå¯†é’¥ç”¨æ¥è§£å¯†ï¼ˆæ„å‘³ç€å…¬ç§é’¥éƒ½èƒ½åŠ å¯†ï¼‰ã€‚å…¶æ¬¡æ˜¯ç­¾åï¼Œç­¾åå°±æ˜¯å°†éœ€è¦ç­¾åçš„ä¿¡æ¯ä½¿ç”¨ä¿¡æ¯æ‘˜è¦ç®—æ³•ï¼ˆæ¯”å¦‚sha256ï¼‰è·å–æ‘˜è¦ã€‚ç„¶åä½¿ç”¨ç§é’¥è¿›è¡ŒåŠ å¯†ï¼Œå¯¹æ–¹ä½¿ç”¨ç›¸åŒçš„æ­¥éª¤ç®—å‡ºæ‘˜è¦ï¼Œç„¶åä½¿ç”¨å…¬é’¥å¯¹ä½ åŠ å¯†çš„ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚å¦‚æœè§£å¯†çš„ä¿¡æ¯å’Œç®—å‡ºæ‘˜è¦çš„ä¿¡æ¯ç›¸åŒåˆ™è¯æ˜è¯¥ä¿¡æ¯å®Œæ•´ä¸”ä¸ºå¯¹æ–¹å‘å‡ºã€‚å…¶å®å’ŒHMACç›¸å½“çš„ç›¸ä¼¼ï¼Œåªä¸è¿‡HMACä½¿ç”¨å¯¹ç§°å¯†é’¥ã€‚å†å…¶å®ã€‚ç­¾åç®—æ³•éƒ½å·®ä¸å¤šè¿™æ ·OVER&lt;/p&gt;
&lt;h2 id=&quot;å…³äºletsencryptçš„å†…éƒ¨æµç¨‹&quot;&gt;&lt;a href=&quot;#å…³äºletsencryptçš„å†…éƒ¨æµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;å…³äºletsencryptçš„å†…éƒ¨æµç¨‹&quot;&gt;&lt;/a&gt;å…³äºletsencryptçš„å†…éƒ¨æµç¨‹&lt;/h2&gt;&lt;p&gt;æœ¬èŠ‚å‚è€ƒ&lt;a href=&quot;https://github.com/diafygi/acme-tiny/blob/master/acme_tiny.py&quot;&gt;acme-tinyè„šæœ¬&lt;/a&gt;ã€‚è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ä¸ºç”¨æˆ·è®¤è¯æµç¨‹ã€‚æ™®éçš„ç”¨æˆ·è®¤è¯æµç¨‹ä¸ºè·å–tokenï¼Œå³ç”¨æˆ·ç™»å½•è·å–tokenï¼Œåç»­çš„APIè¯·æ±‚å’Œè¯¥tokenå…³è”ã€‚ç„¶è€Œletsencryptçš„æµç¨‹éå¸¸ä¸åŒ(ä¸»è¦å› ä¸ºå®ƒä¸éœ€è¦å»letsencryptç½‘ç«™è¿›è¡Œæ³¨å†Œ)ã€‚ä¸€ä¸ªç‹¬ç«‹çš„è´¦æˆ·ä¾é æœ¬åœ°ç”Ÿæˆè¯ä¹¦æ¥è®¤è¯&lt;code&gt;openssl genrsa 4096 &amp;gt; account.key&lt;/code&gt;ï¼Œè¯¥è¯ä¹¦ä¸ºPEMè¯ä¹¦ã€‚å³æ–‡ä»¶ä¸­å«æœ‰å…¬é’¥å’Œç§é’¥ã€‚å¯¹äºæ‰€æœ‰çš„APIè¯·æ±‚éƒ½ä¼šè¦æ±‚ç­¾åã€‚&lt;br&gt;ç­¾åä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;_send_signed_request&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(url, payload)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    payload64 = _b64(json.dumps(payload).encode(&lt;span class=&quot;string&quot;&gt;&#39;utf8&#39;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protected = copy.deepcopy(header)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protected[&lt;span class=&quot;string&quot;&gt;&quot;nonce&quot;&lt;/span&gt;] = urlopen(CA + &lt;span class=&quot;string&quot;&gt;&quot;/directory&quot;&lt;/span&gt;).headers[&lt;span class=&quot;string&quot;&gt;&#39;Replay-Nonce&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protected64 = _b64(json.dumps(protected).encode(&lt;span class=&quot;string&quot;&gt;&#39;utf8&#39;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    proc = subprocess.Popen([&lt;span class=&quot;string&quot;&gt;&quot;openssl&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;dgst&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;-sha256&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;-sign&quot;&lt;/span&gt;, account_key],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    out, err = proc.communicate(&lt;span class=&quot;string&quot;&gt;&quot;&amp;#123;0&amp;#125;.&amp;#123;1&amp;#125;&quot;&lt;/span&gt;.format(protected64, payload64).encode(&lt;span class=&quot;string&quot;&gt;&#39;utf8&#39;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; proc.returncode != &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;raise&lt;/span&gt; IOError(&lt;span class=&quot;string&quot;&gt;&quot;OpenSSL Error: &amp;#123;0&amp;#125;&quot;&lt;/span&gt;.format(err))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data = json.dumps(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;header&quot;&lt;/span&gt;: header, &lt;span class=&quot;string&quot;&gt;&quot;protected&quot;&lt;/span&gt;: protected64,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;payload&quot;&lt;/span&gt;: payload64, &lt;span class=&quot;string&quot;&gt;&quot;signature&quot;&lt;/span&gt;: _b64(out),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        resp = urlopen(url, data.encode(&lt;span class=&quot;string&quot;&gt;&#39;utf8&#39;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; resp.getcode(), resp.read()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;except&lt;/span&gt; IOError &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; e:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; getattr(e, &lt;span class=&quot;string&quot;&gt;&quot;code&quot;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;), getattr(e, &lt;span class=&quot;string&quot;&gt;&quot;read&quot;&lt;/span&gt;, e.__str__)()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºä»è¯ä¹¦ä¸­å–å‡ºå…¬é’¥ã€‚ç„¶åä¾ç…§&lt;code&gt;å…¬é’¥+(å…¬é’¥+æœåŠ¡å™¨éšæœºæ•°+ä¿¡æ¯)+ç¬¬äºŒéƒ¨åˆ†çš„ç­¾å&lt;/code&gt;è¯æ˜è‡ªå·±çš„èº«ä»½ã€‚å³ï¼šä¸€ä¸ªå…¬é’¥å¯¹åº”ä¸€ä¸ªèº«ä»½ã€‚&lt;br&gt;åç»­çš„æµç¨‹å°±æ˜¯ï¼šâ‘ èº«ä»½æ³¨å†Œâ†’â†’â†’â†’â‘¡è·å–åŸŸååˆ—è¡¨â†’â†’â†’â†’(â‘¢å‘é€httpæŒ‘æˆ˜è¯·æ±‚â†’â†’â†’â†’â‘£æ ¹æ®è¿”å›å†…å®¹å»ºç«‹æ–‡ä»¶â†’â†’â†’â†’â‘¤è‡ªèº«æµ‹è¯•ä¸‹è½½â†’â†’â†’â†’â‘¥å‘é€æŒ‘æˆ˜æµ‹è¯•è¯·æ±‚)â†’â†’â†’â†’â‘¦æäº¤csræ–‡ä»¶è¿”å›ç­¾åè¯ä¹¦&lt;/p&gt;
&lt;h2 id=&quot;ç§»æ¤åˆ°OSSä¸Š&quot;&gt;&lt;a href=&quot;#ç§»æ¤åˆ°OSSä¸Š&quot; class=&quot;headerlink&quot; title=&quot;ç§»æ¤åˆ°OSSä¸Š&quot;&gt;&lt;/a&gt;ç§»æ¤åˆ°OSSä¸Š&lt;/h2&gt;&lt;p&gt;ç½‘ä¸Šå¤§å¤šæ•°æ•™ç¨‹éƒ½æ˜¯éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚å’Œéƒ¨ç½²åˆ°OSSæœ€å¤§çš„å·®åˆ«åœ¨äºä¸Šé¢çš„åˆ’æ‹¬å·çš„éƒ¨åˆ†ã€‚éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šæ˜¯åœ¨æœåŠ¡å™¨ç”Ÿæˆæ–‡ä»¶ï¼Œå¦‚æœéƒ¨ç½²åˆ°é˜¿é‡Œäº‘OSSï¼Œåˆ™åº”è¯¥ä¸Šä¼ æ–‡ä»¶åˆ°é˜¿é‡Œäº‘ã€‚æ²¡æœ‰åˆ«çš„åŒºåˆ«ã€‚å¦å¤–è¿˜å¯ä»¥ä½¿ç”¨DNSæŒ‘æˆ˜ã€‚å¦‚æœä½ ä½¿ç”¨cloudxnsä½œDNSè§£æã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒï¼Œä»è€Œé€šè¿‡éªŒè¯ï¼Œå¦å¤–ä¸€ç‚¹ã€‚ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶éœ€è¦åœ¨é˜¿é‡Œäº‘CDNè®¾ç½®é¡µé¢è®¾ç½®ã€‚&lt;code&gt;ç„¶è€Œï¼ï¼ï¼é˜¿é‡Œäº‘å¹¶æ²¡æœ‰æä¾›APIæ¥å£ï¼ï¼ï¼&lt;/code&gt;ï¼Œæ„å‘³ç€éœ€è¦æ‰‹å·¥æ“ä½œã€‚ç„¶è€Œè‡³å°‘æ¯3ä¸ªæœˆæ›´æ–°ä¸€æ¬¡è¿˜æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚æ‰€ä»¥ï¼Œè¦çœŸç”¨åœ¨ä¸Šé¢è¿˜å¾—ä¸‰æ€&lt;br&gt;&lt;a href=&quot;https://gist.github.com/Ficapy/2cef398fc4ee18013836&quot;&gt;è¿™æ˜¯æˆ‘å‚ç…§acme-tinyæ”¹å†™çš„è¯ä¹¦è„šæœ¬&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;hexoä½¿ç”¨çš„ä¸€äº›å»ºè®®&quot;&gt;&lt;a href=&quot;#hexoä½¿ç”¨çš„ä¸€äº›å»ºè®®&quot; class=&quot;headerlink&quot; title=&quot;hexoä½¿ç”¨çš„ä¸€äº›å»ºè®®&quot;&gt;&lt;/a&gt;hexoä½¿ç”¨çš„ä¸€äº›å»ºè®®&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å°†å›¾ç‰‡æ–‡ä»¶è¿›è¡Œå‹ç¼©æ”¾åˆ°CDNä¸Šé¢ã€‚å‹ç¼©å·¥å…·ç°å¸¸ä¹‹å¤šã€‚ç¬”è€…å°±ä¸ä¾‹ä¸¾äº†&lt;/li&gt;
&lt;li&gt;å¼•ç”¨çš„å›½å¤–JSæ–‡ä»¶èƒ½æ¢æˆå›½å†…é•œåƒæºçš„å…¨éƒ¨æ›¿æ¢&lt;/li&gt;
&lt;li&gt;ä¸Šä¼ å›¾ç‰‡ä¸å¦‚è¯•è¯•æˆ‘å†™çš„è„šæœ¬&lt;a href=&quot;https://gist.github.com/Ficapy/8c57998d14c434ab5df3&quot;&gt;https://gist.github.com/Ficapy/8c57998d14c434ab5df3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;swiftypeåŠ è½½çœŸçš„å¥½æ…¢å¥½æ…¢ã€‚å¦‚æœä¸ºäº†åŠ è½½é€Ÿåº¦ç»å¯¹è¦æ›¿æ¢æ‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;&lt;a href=&quot;#å‚è€ƒ&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒ&quot;&gt;&lt;/a&gt;å‚è€ƒ&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html&quot;&gt;RSAç®—æ³•åŸç†&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E9%87%91%E9%91%B0%E9%9B%9C%E6%B9%8A%E8%A8%8A%E6%81%AF%E9%91%91%E5%88%A5%E7%A2%BC&quot;&gt;HMACä¸­æ–‡ç»´åŸº&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.sina.com.cn/s/blog_4fcd1ea30100yh4s.html&quot;&gt;pemæ ¼å¼&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://imququ.com/post/letsencrypt-certificate.html&quot;&gt;letsencryptéƒ¨ç½²&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ç»§ä¸Šç¯‡æ–‡ç« ä¹‹åï¼Œè®²è§£é˜¿é‡Œäº‘OSSç»‘å®šletsencryptã€‚å…¶å®ç½‘ä¸Šè®²è¿°letencryptä½¿ç”¨æ–¹æ³•çš„æ–‡ç« éå¸¸ä¹‹å¤šã€‚æœ¬ç¯‡æ–‡ç« ç¬”è€…å°†ä¼šè®²è§£ä¸€äº›å…¶ä»–çš„æ¯”è¾ƒæµ…æ˜¾çš„åŸç†ã€‚å³ä¸ºä»€ä¹ˆè¦è¿™æ ·åšã€‚è¯¥æ­¥éª¤åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¯¹äºå®é™…æ“ä½œæ­¥éª¤ï¼Œè¯·å‚ç…§æœ€åçš„å‚è€ƒé“¾æ¥ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="ä¼ªæŠ€æœ¯" scheme="http://ficapy.com/categories/%E4%BC%AA%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>å°†hexoéƒ¨ç½²åˆ°é˜¿é‡Œäº‘OSS</title>
    <link href="http://ficapy.com/2016/03/06/install_hexo_to_aliyun_oss/"/>
    <id>http://ficapy.com/2016/03/06/install_hexo_to_aliyun_oss/</id>
    <published>2016-03-06T14:34:00.000Z</published>
    <updated>2016-03-07T03:04:49.000Z</updated>
    
    <content type="html">&lt;p&gt;æœ€è¿‘æŠŠåšå®¢ä»wordpressè¿ç§»åˆ°hexo,ä¸»è¦åŸå› æ˜¯wordpresså¤ªè¿‡è‡ƒè‚¿ã€‚ä¸€ä¸ªä¸ªäººåšå®¢å®Œå…¨ä¸éœ€è¦é‚£ä¹ˆå¤šçš„åŠŸèƒ½ã€‚è¿™ä¹ˆå¤šå¹´è¿‡å»äº†éƒ½æ²¡æœ‰ä¸€ä¸ªå®Œç¾çš„æ”¯æŒmarkdownæ–¹æ¡ˆï¼Œç„¶è€Œéšç€githubçš„æµè¡Œï¼Œç¨‹åºå‘˜ç¤¾åŒºæ—©å·²å°†markdownä½œä¸ºæœ€ä½³å†™åšå®¢æ‰‹æ®µï¼ç”Ÿæˆé™æ€åšå®¢çš„æ¡†æ¶ä¼—å¤šã€‚ä¸ºä»€ä¹ˆç¬”è€…ä¼šé€‰æ‹©ä½¿ç”¨hexoã€‚æ²¡åˆ«çš„ï¼ŒJSç¤¾åŒºä¸€ç‰‡ç¹è£(æŒ–å‘å°èƒ½æ‰‹ä¼—å¤š),ç”šè‡³hexoå®˜ç½‘æœ‰æ•´ç«™ä¸­æ–‡åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨: è¯¥æ–¹æ¡ˆåŒæ ·é€‚ç”¨äºåˆæ‹åŠä¸ƒç‰›&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è‡³äºæ€ä¹ˆå®‰è£…,å¦‚ä½•ä½¿ç”¨hexoæœ¬æ–‡å°±ä¸è¡¨è¿°äº†,è¯·æŸ¥çœ‹å®˜ç½‘ä»¥åŠ&lt;code&gt;hexo --help&lt;/code&gt;ã€‚è¯´ä¸€ä¸‹æˆ‘é‡åˆ°çš„å‡ ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºnpmã€pipã€gemæˆ–è€…å…¶ä»–çš„åŒ…ç®¡ç†ç³»ç»Ÿåœ¨å›½å†…è¯·ä½¿ç”¨é•œåƒæº,æ¯”å¦‚ä¸­ç§‘å¤§ã€æ·˜å®ç­‰&lt;/li&gt;
&lt;li&gt;å¯¹äºosxç³»ç»Ÿï¼Œè¯·ä½¿ç”¨&lt;code&gt;npm install hexo --no-optional&lt;/code&gt;å®‰è£…ï¼Œå‚è§&lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç”±äºhexoæ¡†æ¶çš„å‡çº§æˆ–è€…ä½¿ç”¨ç¯å¢ƒçš„ä¸åŒã€‚æœ‰å¯èƒ½å¯¼è‡´ä½ ä½¿ç”¨çš„ä¸»é¢˜å‡ºç°é”™è¯¯ã€‚æœç´¢ä¸»é¢˜çš„æé—®ä¿¡æ¯ä¸€èˆ¬ä¼šæœ‰ç­”æ¡ˆ&lt;/li&gt;
&lt;li&gt;å°†å¯¼å‡ºçš„wordpressæ–‡ä»¶ä½¿ç”¨hexoå®˜æ–¹æ¨èçš„hexo-migrator-wordpresså¾ˆå¯èƒ½ä¼šå¤±è´¥ã€‚æ­¤æ—¶ä¸å¿…çº ç»“,å®è´¨å°±æ˜¯å°†xmlæ–‡ä»¶è½¬æ¢æˆmarkdownã€‚å¯ç”¨çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚æˆ‘ä½¿ç”¨çš„æ˜¯&lt;a href=&quot;http://docs.getpelican.com/en/latest/importer.html&quot;&gt;pelicanæ¨èçš„åšæ³•&lt;/a&gt;,è½¬æ¢å‡ºæ¥æœ‰äº›ä¸æ ‡å‡†çš„éœ€è¦è„šæœ¬è¾…åŠ©æ‰‹å·¥å®Œæˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢è¯´ä¸€ä¸‹å®‰è£…hexoåˆ°é˜¿é‡Œäº‘ossçš„è¦ç‚¹ï¼Œä»–ä»¬æœ€å¤§çš„åŒºåˆ«å°±æ˜¯:OSSä¸èƒ½æ­£å¸¸çš„å¤„ç†è¯·æ±‚æ–‡ä»¶çš„ç±»å‹ä¹Ÿå°±æ˜¯headerä¸­Content-Typeå­—æ®µã€‚é»˜è®¤ä¼šè¿”å›application/octet-streamã€‚æ„å‘³ç€è¯·æ±‚è¯¥èµ„æºæµè§ˆå™¨ä¼šç›´æ¥ä¸‹è½½ï¼Œè€Œä¸æ˜¯æ­£å¸¸çš„è§£æï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨æŒ‡å®šã€‚å¦å¤–OSSä¸èƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„è¿›è¡Œè®¿é—®(å› ä¸ºå®ƒçš„è®¾è®¡å°±æ˜¯ç”¨ä½œå­˜å‚¨ï¼Œè€Œä¸æ˜¯webæœåŠ¡å™¨)ã€‚&lt;code&gt;æ¯”å¦‚è®¿é—®a.com\b\å¹¶ä¸ä¼šè¿”å›a.com\b\index.htmlçš„å†…å®¹&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³ä»¥ä¸Š2ä¸ªé—®é¢˜çš„æ–¹æ¡ˆå°±æ˜¯ã€‚å¯¹æ¯ä¸ªä¸Šä¼ çš„æ–‡ä»¶æ ¹æ®æ–‡ä»¶ååç¼€å¾—åˆ°å…¶mimeæŒ‡å®šContent-Typeå­—æ®µã€‚å°†hexoç”Ÿæˆçš„æ‰€æœ‰htmlä¸­hrefè¿›è¡Œå¤„ç†ï¼šå°†ä»–ä»¬çš„è·¯å¾„åŠ ä¸Šindex.htmlå¦‚æœæ­¤è·¯å¾„åœ¨æœ¬åœ°å­˜åœ¨æ–‡ä»¶ã€‚åˆ™å°†è¯¥è·¯å¾„æ¢æˆç»å¯¹è·¯å¾„ã€‚ä¾‹å¦‚\bæˆ–è€…\b\æ¢æˆ\b\index.htmlã€‚python2ç¤ºä¾‹ä»£ç å¦‚ä¸‹,ä¾èµ–requestsã€lxml&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#!/usr/bin/env python&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Author: Ficapy&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; os&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; requests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; base64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; hmac&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; datetime&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; os.path &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; join, exists, relpath&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; mimetypes &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; MimeTypes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; hashlib &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; sha1, md5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; pickle &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; dump, loads&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; cStringIO &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; StringIO, InputType, OutputType&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; lxml &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;KEY             = &lt;span class=&quot;string&quot;&gt;&#39;----------&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SECRET          = &lt;span class=&quot;string&quot;&gt;&#39;----------&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BUCKET          = &lt;span class=&quot;string&quot;&gt;&#39;----------&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;url             = &lt;span class=&quot;string&quot;&gt;&#39;----------&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ABSOLUTE_PATH   = &lt;span class=&quot;string&quot;&gt;&#39;/Users/Ficapy/CodeSpace/Blog/public&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s = requests.Session()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;headers = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;Date&#39;&lt;/span&gt;: datetime.datetime.utcnow().strftime(&lt;span class=&quot;string&quot;&gt;&#39;%a, %d %b %Y %H:%M:%S GMT&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;text/html&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;HOST&#39;&lt;/span&gt;: url,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;signature&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(file_path)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;global&lt;/span&gt; headers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    path = join(ABSOLUTE_PATH, file_path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    headers[&lt;span class=&quot;string&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt;] = MimeTypes().guess_type(path)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;text/html&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sign = base64.b64encode(hmac.new(SECRET,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     &lt;span class=&quot;string&quot;&gt;&#39;PUT&#39;&lt;/span&gt; + &lt;span class=&quot;string&quot;&gt;&quot;\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     + &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt; + &lt;span class=&quot;string&quot;&gt;&quot;\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     + headers[&lt;span class=&quot;string&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt;] + &lt;span class=&quot;string&quot;&gt;&quot;\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     + headers[&lt;span class=&quot;string&quot;&gt;&#39;Date&#39;&lt;/span&gt;] + &lt;span class=&quot;string&quot;&gt;&quot;\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     + &lt;span class=&quot;string&quot;&gt;&#39;/&#39;&lt;/span&gt; + BUCKET + &lt;span class=&quot;string&quot;&gt;&#39;/&#39;&lt;/span&gt; + file_path, sha1).digest()).strip()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    headers.update(&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;Authorization&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;OSS &#39;&lt;/span&gt; + KEY + &lt;span class=&quot;string&quot;&gt;&#39;:&#39;&lt;/span&gt; + sign&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;read_in_chunks&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(file_object, blocksize=&lt;span class=&quot;number&quot;&gt;1024&lt;/span&gt;)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    file_object = file_object &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; isinstance(file_object, (InputType, OutputType)) &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; open(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        join(ABSOLUTE_PATH, file_object))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    file_object.seek(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        data = file_object.read(blocksize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; data:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;yield&lt;/span&gt; data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;upload&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(file_path, file_object)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    signature(file_path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    s.put(&lt;span class=&quot;string&quot;&gt;&#39;http://&#39;&lt;/span&gt; + url + &lt;span class=&quot;string&quot;&gt;&#39;/&#39;&lt;/span&gt; + file_path, headers=headers, data=read_in_chunks(file_object)).raise_for_status()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(&lt;span class=&quot;string&quot;&gt;&#39;upload done: &#39;&lt;/span&gt; + file_path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# é¦–å…ˆè¯·æ±‚oss_fuck_md5æ–‡ä»¶,æ²¡æœ‰åˆ™å…¨éƒ¨ä¸Šä¼   æœ‰åˆ™å’Œç”Ÿæˆçš„md5å¯¹æ¯”,æœ¬åœ°æ–‡ä»¶ä¸å­˜åœ¨æˆ–å˜åŠ¨åˆ™ä¸Šä¼ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ æˆåŠŸåæœ€åä¸Šä¼ .oss_fuck_md5æ–‡ä»¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;local_md5&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    file_md5_mp = &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; root, dirnames, files &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; os.walk(ABSOLUTE_PATH):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; file &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; files:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fullpath = join(root, file)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rel = relpath(fullpath, ABSOLUTE_PATH)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            file_md5_mp[rel] = md5(open(fullpath).read()).hexdigest()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; file_md5_mp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;remote_md5&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    a = s.get(&lt;span class=&quot;string&quot;&gt;&#39;http://&#39;&lt;/span&gt; + url + &lt;span class=&quot;string&quot;&gt;&#39;/oss_fuck_md5&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; a.status_code != &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; loads(a.content)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;path_process&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(file_path)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    file_path = join(ABSOLUTE_PATH, file_path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tree = html.parse(file_path).getroot()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    hrefs = tree.xpath(&lt;span class=&quot;string&quot;&gt;&#39;//*[@href]&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i, href &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; enumerate(hrefs):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rewrite = join(href.attrib[&lt;span class=&quot;string&quot;&gt;&#39;href&#39;&lt;/span&gt;].split()[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;], &lt;span class=&quot;string&quot;&gt;&#39;index.html&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; exists(join(ABSOLUTE_PATH, rewrite[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:])):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            hrefs[i].attrib[&lt;span class=&quot;string&quot;&gt;&#39;href&#39;&lt;/span&gt;] = rewrite&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    f = StringIO()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    f.write(html.tostring(tree))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    remote = remote_md5()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    locals = local_md5()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _locals = locals.copy()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; local &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; _locals.keys():&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; _locals[local] != remote.get(local, &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            locals.pop(local)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; path &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; locals.keys():&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; path.endswith(&lt;span class=&quot;string&quot;&gt;&#39;html&#39;&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            upload(path, path_process(path))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            upload(path, path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    f = StringIO()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dump(_locals, f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    upload(&lt;span class=&quot;string&quot;&gt;&#39;oss_fuck_md5&#39;&lt;/span&gt;, f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; __name__ == &lt;span class=&quot;string&quot;&gt;&#39;__main__&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    main()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±æ˜¯ç»‘å®šåŸŸåäº†,ossç®¡ç†é¡µé¢æ‰¾æ‰¾å°±æœ‰äº†ã€‚ç°å¸¸ç®€å•ï¼Œåœ¨ä¸‹ä¸€ç¯‡å°†ä¼šé˜è¿°å¦‚ä½•ä½¿ç”¨å…è´¹çš„letsencryptç”Ÿæˆè¯ä¹¦ç»‘å®šåœ¨é˜¿é‡Œäº‘CDNä¸Šä»¥åŠåšä¸€äº›ç®€å•çš„ä¼˜åŒ–ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘æŠŠåšå®¢ä»wordpressè¿ç§»åˆ°hexo,ä¸»è¦åŸå› æ˜¯wordpresså¤ªè¿‡è‡ƒè‚¿ã€‚ä¸€ä¸ªä¸ªäººåšå®¢å®Œå…¨ä¸éœ€è¦é‚£ä¹ˆå¤šçš„åŠŸèƒ½ã€‚è¿™ä¹ˆå¤šå¹´è¿‡å»äº†éƒ½æ²¡æœ‰ä¸€ä¸ªå®Œç¾çš„æ”¯æŒmarkdownæ–¹æ¡ˆï¼Œç„¶è€Œéšç€githubçš„æµè¡Œï¼Œç¨‹åºå‘˜ç¤¾åŒºæ—©å·²å°†markdownä½œä¸ºæœ€ä½³å†™åšå®¢æ‰‹æ®µï¼ç”Ÿæˆé™æ€åšå®¢çš„æ¡†æ¶ä¼—å¤šã€‚ä¸ºä»€ä¹ˆç¬”è€…ä¼šé€‰æ‹©ä½¿ç”¨hexoã€‚æ²¡åˆ«çš„ï¼ŒJSç¤¾åŒºä¸€ç‰‡ç¹è£(æŒ–å‘å°èƒ½æ‰‹ä¼—å¤š),ç”šè‡³hexoå®˜ç½‘æœ‰æ•´ç«™ä¸­æ–‡åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨: è¯¥æ–¹æ¡ˆåŒæ ·é€‚ç”¨äºåˆæ‹åŠä¸ƒç‰›&lt;br&gt;
    
    </summary>
    
      <category term="ä¼ªæŠ€æœ¯" scheme="http://ficapy.com/categories/%E4%BC%AA%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>è§‚å½±æ„Ÿ</title>
    <link href="http://ficapy.com/2015/05/26/film_reviews/"/>
    <id>http://ficapy.com/2015/05/26/film_reviews/</id>
    <published>2015-05-26T13:41:00.000Z</published>
    <updated>2016-03-03T09:13:24.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;æˆ‘çš„å½±è¯„æˆ‘åšä¸»-æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™-å°±æ˜¯è¿™ä¹ˆä»»æ€§&quot;&gt;&lt;a href=&quot;#æˆ‘çš„å½±è¯„æˆ‘åšä¸»-æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™-å°±æ˜¯è¿™ä¹ˆä»»æ€§&quot; class=&quot;headerlink&quot; title=&quot;æˆ‘çš„å½±è¯„æˆ‘åšä¸»,æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™,å°±æ˜¯è¿™ä¹ˆä»»æ€§~~~~&quot;&gt;&lt;/a&gt;æˆ‘çš„å½±è¯„æˆ‘åšä¸»,æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™,å°±æ˜¯è¿™ä¹ˆä»»æ€§~~~~&lt;/h4&gt;&lt;h4 id=&quot;ã€Š12å…¬æ°‘ã€‹-15-5-23&quot;&gt;&lt;a href=&quot;#ã€Š12å…¬æ°‘ã€‹-15-5-23&quot; class=&quot;headerlink&quot; title=&quot;ã€Š12å…¬æ°‘ã€‹-15.5.23&quot;&gt;&lt;/a&gt;ã€Š12å…¬æ°‘ã€‹-15.5.23&lt;/h4&gt;&lt;p&gt;æ®è¯´æ˜¯æ ¹æ®&lt;strong&gt;ã€Š12ç½—æ±‰ã€‹æ”¹ç¼–&lt;/strong&gt;ï¼Œæ²¡çœ‹è¿‡12ç½—æ±‰ï¼Œçœ‹è¿‡ä¹‹åæ„Ÿè§‰è¿™éƒ¨ç”µå½±è¿˜æŒºå¥½ã€‚å°æˆæœ¬çš„äººæ–‡ç‰‡æ•…äº‹è®²çš„å¥½ä¹ŸæŒºå€¼å¾—å›å‘³çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç”µå½±è®²è¿°çš„æ˜¯ä¸€ä¸ªç‰›é€¼æ£€å¯Ÿå®˜é€šè¿‡ä»–ç†æ€§çš„åˆ†æä¸€æ­¥æ­¥è¿˜åŸäº†â€œå¯ŒäºŒä»£æ‰‹åˆƒç”Ÿçˆ¶â€æ¡ˆä»¶çš„çœŸç›¸ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹12ä¸ªç”·ä¸»è§’(çªç„¶æƒ³åˆ°ä¸ºå˜›æ²¡å¥³çš„å‘¢ï¼Œç»ˆäºæƒ³åˆ°è¿™ä¹ˆå¤šå¹´æˆ‘å¥½åƒç¬¬ä¸€æ¬¡çœ‹åˆ°æ²¡æœ‰ç”·å¥³çŒªè„šfall&lt;br&gt;in loveçš„ç‰‡å­)ï¼š&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1å·:å›¢é•¿,å¥½åƒå°±åšäº†è®°å½•å·¥ä½œï¼Œå®£å¸ƒæŠ•ç¥¨ï¼Œè®°å¾—çš„é•œå¤´å°±æ˜¯å‡ æ¬¡è¢«åˆ«äººæçš„ä¸èµ–çƒ¦ã€‚å†’å‡ºäº†you&lt;br&gt;can you&lt;br&gt;upã€‚ç”Ÿæ°”ä¹‹åè¢«8å·çš„ä¹‰æ­£è¨€è¾æ‰€æ‰“åŠ¨,ç»™äº†ä¸ªæŠŠæ¤…å­æ‘†æ­£çš„é•œå¤´ã€‚ç„¶åï¼Œé˜¿å‹’ã€‚æ¯ä¸ªäººè¢«ç­–åä¹‹å‰éƒ½æœ‰é‚£ä¹ˆå†™å†…å¿ƒæ·±å¤„çš„ç‹¬ç™½ã€‚ä¸ºæ¯›ä½ å•¥éƒ½æ²¡æœ‰å‘¢~&lt;/li&gt;
&lt;li&gt;2å·:å·¥ç¨‹å¸ˆ,ç»ä½³çš„å¤´è„‘ï¼ŒåŠ å‡ä¹˜é™¤ä¸åœ¨è¯ä¸‹ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªå‘è¨€çš„ï¼Œå…¶å®ä»–å•¥ä¹Ÿæ²¡è¯´ï¼Œé™¤äº†å‘µå‘µæ²¡ä»€ä¹ˆå¤ªæ·±åˆ»çš„å°è±¡&lt;/li&gt;
&lt;li&gt;3å·:å¸æœºã€‚æš´è„¾æ°”,æœ€å›ºæ‰§çš„ä¸€ä¸ªäººäº†ï¼Œåæ­£çˆ¶æ¯å•¥æ—¶å€™éƒ½æ˜¯å¯¹çš„ã€‚å°±å¥½åƒä»¥å‰æŸäººä¼šè¯´æˆ‘è‡ªå·±è®¤ä¸ºæ˜¯å¥½çš„ä¸è¦è®¤ä¸ºåˆ«äººä¹Ÿå–œæ¬¢ã€‚&lt;/li&gt;
&lt;li&gt;4å·:æˆ¿åœ°äº§å¼€å‘å•†,ä½œä¸ºä¸€ä¸ªæˆåŠŸäººå£«è¿˜æ˜¯æŒºæœ‰æ€æƒ³çš„ï¼Œå…¶è®¤ä¸ºæ˜ç¡®æœ‰ç½ªçš„ç†ç”±å¤§æ¦‚æœ‰â‘ å°å­©å›å®¶åç›´æ¥ä¼šæˆ¿å¹¶æ²¡æœ‰äººçœ‹åˆ°ä»–â‘¡æ­»è€…èº«ä¸Šçš„åˆ€å°å­©æœ‰ä¸€æŠŠå¹¶ä¸”ä¸è§äº†â‘¢ä¸‹å±‚è€çˆ·çˆ·çš„å£è¿°â‘£å¯¹é¢å¦‡å¥³çš„å£è¿°.åšæŒè‡ªå·±çš„çœ‹æ³•ç›´è‡³æ¯ä¸ªçœ‹æ³•éƒ½è¢«åˆç†çš„è´¨ç–‘ã€‚åªæ˜¯ä¸ºä»€ä¹ˆæœ‰é‚£ä¹ˆå‡ ä¸ªé•œå¤´æ„Ÿè§‰çœ‹8å·çš„é•œå¤´æœ‰é‚£ä¹ˆç‚¹ä¸å¯¹å‘¢ï¼Œä¸æ˜¯Gayï¼Ÿ&lt;/li&gt;
&lt;li&gt;5å·:é»‘ç¤¾ä¼š,ä»è¯†åˆ«åŒ•é¦–æ¥çœ‹è¿˜æ˜¯æœ‰ä¸¤æŠŠåˆ·å­ã€‚æœ‰äº›å†·é…·ï¼Ÿå› ä¸ºè¿™ä¸ªèº«ä»½è¢«è´´ä¸Šä¸è‰¯åˆ†å­çš„TAGå’¯ï¼Ÿä»TAGè¿™ä¸ªè§’åº¦æ¥çœ‹ä»–å’Œå¯ŒäºŒä»£æ˜¯æœ€ä¸ºç›¸ä¼¼çš„ã€‚ç»™äººçš„æ„Ÿè§‰å°±æ˜¯æ²¡æœ‰è‰¯å¥½çš„å“è¡Œï¼Œä¸æ€€ç–‘ä½ æ€€ç–‘è°~~~ç®—æ˜¯TAGä¸Šçš„æ‚²å“€å§ï¼Œåªæ˜¯æ²¡å¤šå¤§æ˜ç™½å°ä¼™å­ç©¿ä¸€ä»¶å•è¡¬è¡«ä¸ºä»€ä¹ˆä¼šæµæ±—æ¼å‡ºäº†åèƒŒçš„çº¹èº«&lt;/li&gt;
&lt;li&gt;6å·:åŒ—äº¬äºº,è®°å¾—çœ‹è¿‡ä»–æ¼”çš„ã€Šæ­£é˜³é—¨ä¸‹ã€‹ï¼Œå‰§ä¸­æƒ…èŠ‚å·®ä¸å¤šéƒ½å¿˜è®°å’¯~&lt;/li&gt;
&lt;li&gt;7å·:å°è´©,ç¤¾ä¼šåº•å±‚äººæ°‘çš„å£°éŸ³æœ‰è°ä¼šåœ¨æ„ï¼Œè°ä¼šå»å€¾å¬ã€‚&lt;/li&gt;
&lt;li&gt;8å·:æ£€å¯Ÿå®˜ï¼ŒçŒªè„šå…‰ç¯å’¯ï¼ŒæŸ¯å—é™„ä½“å’¯ï¼Œä½ ä¸«æœ‰å¤‡è€Œæ¥ï¼Œç°åœºè¿˜é¢‘é¢‘çµå…‰é—ªç°ã€‚å¥½åƒåœ¨å½±è§†ä½œå“ä¸­ä¹Ÿç»å¸¸è§åˆ°ä»–å½“æ­£æ´¾å®˜æ–¹è§’è‰²ã€‚åº”è¯¥æ˜¯ä¸€ä½æ™ºè€…å§ã€‚&lt;/li&gt;
&lt;li&gt;9å·:æ–‡é©è€äººï¼Œå§œè¿˜æ˜¯è€çš„è¾£ï¼Œèƒ½å‘ç°åˆ«äººæ‰€å‘ç°ä¸äº†çš„å¾®å°ç»†èŠ‚ã€‚æˆ‘å½“æ—¶å°±æƒ³ï¼Œè«éå¤§çˆ·å¹´è½»çš„æ—¶å€™ä¹ŸçŠ¯è¿‡ä¸å°‘é”™ï¼Ÿ&lt;/li&gt;
&lt;li&gt;10å·:è€åŒ—äº¬ï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“å’‹ç§°å‘¼å¥½ã€‚è¿™è´§æåº¦æ’å¤–å•Šï¼Œä¸€ä¸Šæ¥å°±æ˜¯æ²³å—äººå’‹åœ°ï¼Œå¤–åœ°äººå’‹åœ°ã€‚ç»å¸¸æ‰“æ–­åˆ«äººçš„è¯ï¼Œä¸å æ®ç†å°±æ‹æ¡Œå­~~æƒ³èµ·äº†é‚£å¥è¯ï¼Œäº‹å®æœ‰åˆ©å°±è®²äº‹å®ï¼Œæ³•å¾‹æœ‰åˆ©å°±è®²æ³•å¾‹ï¼Œä¸¤éƒ½æ²¡åˆ©å°±æ‹æ¡Œå­æŠŠæ°´æ…æµ‘ã€‚å·²ç»å æ®äº†è‰¯å¥½çš„èµ„æºå´ä»ä¸çŸ¥è¶³ã€‚æˆ¿å­ç§Ÿç»™å¤–åœ°äººå´å«Œå¼ƒå¤–åœ°äººå‹æ¦¨äº†åŒ—äº¬äººçš„ç”Ÿæ´»ç¯å¢ƒï¼Œè¯´è‡ªå·±å„¿å­å­¦ä¹ åˆ°å‡Œæ™¨3ç‚¹è¢«å¤–åœ°äººç«äº‰çš„ä¸€ä¸ªå¥½çš„å¤§å­¦éƒ½ä¸Šä¸äº†ã€‚æˆ‘ä»¬éƒ½æ˜¯è¿‡æ¥äººï¼Œå¦‚è‹¥çœŸçš„å¦‚æ­¤åŠªåŠ›ä¼šé…±ç´«ï¼Ÿç¬‘cry~~ä»å¦å¤–ä¸€ä¸ªæ–¹é¢æ¥è¯´ï¼Œè¿™ä½æ˜¯è¿‡åº¦è€ƒè™‘è‡ªå·±çš„å­©å­çš„æœªæ¥ä¹ˆã€‚&lt;/li&gt;
&lt;li&gt;11å·:ä¿å®‰ï¼Œè¿™ä¸ªè§’è‰²è®©äººä¼¤æ„Ÿå•Šã€‚æ˜¯ä¸€ä¸ªç«‹å¿—æˆä¸ºå…¬æ£€äººå‘˜çš„å¥½ä¿å®‰ï¼Ÿå› ä¸ºå·¥ä½œå…³ç³»çŸ¥é“åœ°é“çš„é•¿åº¦ï¼ŒçŸ¥é“é€Ÿåº¦ï¼Œå’‹å°±t=s/véƒ½ä¸é€ å‘¢&lt;/li&gt;
&lt;li&gt;12å·ï¼šå¢™å¤´è‰ï¼Ÿä»è¿™ä¸ªè§’è‰²æ¥çœ‹æŠ•ç¥¨åˆ¶åº¦å‘ç°è®¾ç½®ä¸­ç«‹é€‰é¡¹å¾ˆæœ‰å¿…è¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› ä¸ºæ•…äº‹è®²çš„å¥½ï¼Œåæ˜ çš„é—®é¢˜éå¸¸å¤šã€‚æ¯ä¸ªäººçœ‹è¿‡ä¹‹ååº”è¯¥éƒ½æœ‰é‚£ä¹ˆå‡ ä¸ªä¾§é‡ç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•™è‚²ï¼šæ•™è‚²çš„ç»“æœå°±æ˜¯ä¸€å¼ æ¯•ä¸šè¯ã€‚æ²¡æœ‰è¿™ä¸ªè¯å°±ä¸å¥½æ‰¾å·¥ä½œã€‚åäºŒä½ä¹Ÿæ˜¯ä¸ºäº†è¿™ä¸ªè¢«è¿«å‚åŠ è®¨è®ºï¼Œè¯è¯´è®©å®¶é•¿åœ¨é‚£ä¹ˆä¸ªç ´åºŸå¼ƒä»“åº“ç ”è®¨æœ‰ç‚¹è„±ç¦»å®é™…äº†ã€‚12æ¯”0æ­£å¥½ä¿ƒè¿›äº†æƒ…èŠ‚çš„å‘å±•ã€‚&lt;/li&gt;
&lt;li&gt;æ ‡ç­¾ï¼šäº†è§£ä¸€ä»¶äº‹æƒ…å¾ˆéš¾ï¼Œæ›´ä½•å†µä»…å‡­ä¸€é¢ä¹‹è¯ï¼Œæƒ³æƒ³æˆ‘ä»¬åœ¨ç½‘ä¸Šçœ‹åˆ°çš„ä¸€äº›ç½‘æ–‡ä¾¿è¿…é€Ÿç»™å‡ºå›å¤ã€‚è°å†™çš„ç…½æƒ…ï¼Œè°æ–‡ç¬”å¥½ï¼Œè°ç»™å‡ºå¯¹è‡ªå·±æœ‰åˆ©çš„è¯æ®èˆ†è®ºå¾€å¾€ä¼šåå‘æŸä¸€æ–¹ã€‚é»‘ç¤¾ä¼šå’Œå¯ŒäºŒä»£è¿™äº›æ ‡ç­¾éƒ½ä¼šè’™è”½äº†æˆ‘ä»¬çš„æ€è€ƒã€‚è‹è½¼è¯´æ¨ªçœ‹æˆå²­ä¾§æˆå³°ï¼Œè¿œè¿‘é«˜ä½å„ä¸åŒï¼Œä¸è¯†åºå±±çœŸé¢ç›®ï¼Œåªç¼˜èº«åœ¨æ­¤å±±ä¸­ã€‚å¯æƒœå’¯ï¼Œå¾€å¾€äº‹å®å‘ˆç°åœ¨æˆ‘ä»¬é¢å‰çš„åªæ˜¯å†°å±±ä¸€è§’ã€‚å½“äº‹äººçš„æ„Ÿå—æˆ‘ä»¬æ˜¯æ²¡æ³•ä½“ä¼šçš„ã€‚so,æˆ‘åº”è¯¥è¿œç¦»é‚£äº›æ— æ„ä¹‰çš„äº‰è®ºã€‚å˜å¾—æ›´åŠ ç†æ€§ä¸€äº›&lt;/li&gt;
&lt;li&gt;è¯è¯­ï¼šæœ€å¼€å§‹å¤§å®¶éƒ½ä¸æ„¿æ„è®¨è®ºï¼Œæœ‰ä»€ä¹ˆå¯è®¨è®ºçš„ï¼Œè®¨è®ºåˆæ²¡æœ‰ç”¨~~ã€‚æœ€å…¸å‹çš„æ˜¯å°è´©ã€‚ä¸€ä¸ªè‹¹æœæ¢ä¸€ä¸ªè‹¹æœæœ€åè¿˜æ˜¯ä¸€ä¸ªè‹¹æœï¼Œä¸€ä¸ªæƒ³æ³•æ¢å¦å¤–ä¸€ä¸ªæƒ³æ³•æœ€åæ˜¯ä¸¤ä¸ªæƒ³æ³•ã€‚å½“å¤§å®¶éƒ½ä¸æ„¿æ„ç›¸ä¿¡è‡ªå·±çš„è¯è¯­èƒ½å¤Ÿæ”¹å˜ä»€ä¹ˆå°±å˜å¾—ä¸æ„¿å»äº¤æ¢è‡ªå·±çœŸå®çš„æƒ³æ³•ï¼Œå› ä¸ºæ²¡ä»€ä¹ˆåµç”¨ã€‚å¯æ˜¯åšæŒæ­£ç¡®çš„å‘å£°æ€»æ˜¯å¥½çš„ï¼Œåˆç†è¡¨è¾¾å‡ºè‡ªå·±çš„è§‚ç‚¹ã€‚æœ€åå°è´©å¾—åˆ°äº†ä¿å®‰çš„å°Šé‡ï¼Œæ£€å¯Ÿå®˜çš„å„¿å­ä¹Ÿä¹°äº†å¥½å¤šå†°æ£ï¼Œå¤§å®¶å¯¹å¾…äº‹ç‰©éƒ½æœ‰äº†æ›´å¥½çš„çœ‹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;å°Šé‡ï¼šå¥½å§,æˆ‘ä¹Ÿå¯¹è¿™æ–¹é¢çŸ¥ä¹‹ç”šå°‘&lt;/li&gt;
&lt;li&gt;äº‹ä¸šï¼šæ­£å¦‚æˆ¿åœ°äº§å¼€å‘å•†æ‰€è¯´ï¼ˆè¿™è´§è¿˜çœŸå‘è¡¨äº†å¥½å¤šæœ‰æ„æ€çš„çœ‹æ³•å‘¢ï¼‰ï¼Œä¸è¦çœ‹åˆ°å¯Œäººå°±è§‰å¾—åˆ«äººèƒŒåœ°é‡Œå¹²äº†è§ä¸å¾—äººçš„å‹¾å½“ï¼Œè‡ªå·±ç©·åº”è¯¥åæ€è‡ªå·±æ²¡æœ¬äº‹ã€‚ç„¶åæ˜¯å¹²å¥³å„¿ï¼šå’±ä¸¤æ˜¯å¥”ç€ç»“å©šå»çš„&amp;amp;&amp;amp;çœ‹è§å¥½å¥³å­©ä»å¥½è½¦ä¸Šä¸‹æ¥å°±ç®¡äººå®¶å«å‚å¤§æ¬¾ï¼Œä½ é‚£æ˜¯å«‰å¦’ï¼é‚£æ˜¯å¯¹ä¸­å›½ä¼˜ç§€å¥³é’å¹´çš„ä¾®è¾±~~ï¼Œå…¶å®é‡Œé¢ç»å…¸å°è¯è¿˜æ˜¯æŒºå¤šçš„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»ç»“æ¥è¯´è¿™æ˜¯ä¸€éƒ¨æˆ‘èƒ½çœ‹2éçš„ç”µå½±ï¼Œèƒ½çœ‹2éçš„ç”µå½±å¯¹æˆ‘æ¥è¯´éƒ½æ˜¯æŒºæœ‰æ„æ€çš„ç”µå½±&lt;/p&gt;
&lt;h3 id=&quot;ã€Šå“†å•¦Aæ¢¦Â·ä¼´æˆ‘åŒè¡Œã€‹-15-5-30&quot;&gt;&lt;a href=&quot;#ã€Šå“†å•¦Aæ¢¦Â·ä¼´æˆ‘åŒè¡Œã€‹-15-5-30&quot; class=&quot;headerlink&quot; title=&quot;ã€Šå“†å•¦Aæ¢¦Â·ä¼´æˆ‘åŒè¡Œã€‹-15.5.30&quot;&gt;&lt;/a&gt;ã€Šå“†å•¦Aæ¢¦Â·ä¼´æˆ‘åŒè¡Œã€‹-15.5.30&lt;/h3&gt;&lt;p&gt;æœ¬ä»¥ä¸ºä¼šæœ‰å¾ˆå¤šå°å­©å­çš„ï¼Œç»“æœæ€ä¹ˆæ²¡å‡ ä¸ªå•Šå–‚~~æˆ–è®¸æ˜¯å› ä¸ºæˆ‘åŠ¨æ¼«çœ‹çš„ä¸å¤šçš„ç¼˜æ•…ï¼Œéå¸¸å–œæ¬¢è¿™ç§ç®€æ´æ¸…çˆ½çš„CGç”»é£ï¼Œæ„Ÿè§‰å¾ˆèˆ’æœ,ä¹Ÿå¾ˆç»†è‡´ã€‚è¿˜æ˜¯éå¸¸å°çš„æ—¶å€™çœ‹è¿‡ä¸€äº›æœºå™¨çŒ«ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è„‘æµ·ä¸­è®°å¾—çš„æ™¯è±¡å±…ç„¶æ˜¯å¤§é›„æ¯æ¬¡è€ƒè¯•è€ƒ0åˆ†ï¼Œæ€ä¹ˆæ²¡æœ‰å—åˆ°çˆ¸çˆ¸å¦ˆå¦ˆçš„ç”·å¥³æ··åˆåŒæ‰“å•Šï¼Œä¸€å®¶äººè¿˜å…¶ä¹èèã€‚ä¸è¿‡åœ¨æ•‘é™é¦™çš„æ—¶å€™èƒ½æƒ³åˆ°è®©è‡ªå·±çš„è®°å¿†ç©¿è¶Šæ—¶ç©ºä¼ é€’&lt;br&gt;ç»™æœªæ¥çš„è‡ªå·±æ™ºå•†è¿˜æ˜¯å¾ˆé«˜çš„å¥½ä¹ˆ~~å°å­©å­çœŸçš„ç‰¹åˆ«å¤©çœŸæ”¹å˜è‡ªå·±ä¹Ÿå¾ˆå¿«å“ˆã€‚å¥‹èµ·å­¦ä¹ æ˜¯åˆ†åˆ†é’Ÿçš„äº‹æƒ…(è¿˜çœŸä¸æ˜¯ä¸‰åˆ†é’Ÿçƒ­åº¦)ã€‚é¢å¯¹å¤±è´¥(åŠªåŠ›å­¦æ•°å­¦ç»“æœè¯­æ–‡è€ƒè¯•å¾—0åˆ†)ä¹Ÿå¯ä»¥åˆ†åˆ†é’Ÿæ”¾å¼ƒï¼Œåœ¨å›°éš¾çš„æ—¶å€™æœºå™¨çŒ«ç‚¹é†’äº†å¤§é›„æ˜¯å¤šä¹ˆçš„é‡è¦ã€‚å‰é¢çš„æ—¶å€™å¤§é›„ä¾é ç§ç§å¤–åŠ›ç»“æœåŸæ¥è¶Šè¿œï¼Œå…³é”®çš„æ—¶å€™è¿˜æ˜¯å¾—é è‡ªå·±æ˜¯ä¸ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åé™é¦™ä»–çˆ¸æ˜¯è¿™æ ·è¯„ä»·å¤§é›„çš„ï¼Œå› ä¸ºåˆ«äººå¼€å¿ƒè€Œå¼€å¿ƒï¼Œå› ä¸ºåˆ«äººçš„å¹¸ç¦è€Œå¹¸ç¦ï¼Œä»–ä¸€å®šä¼šç»™ä½ å¹¸ç¦çš„ã€‚æˆå¹´çš„å¤§é›„ä¾ç„¶ä¿æŒç€è¿™æ ·å–„è‰¯çš„å¿ƒã€‚æˆ‘å·²&lt;em&gt;æ— è¯­å‡å™ã€‚æ•…äº‹é‡Œå¤§é›„å’Œé™é¦™å¹¸ç¦çš„ç”Ÿæ´»åœ¨äº†ä¸€èµ·ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&quot;ã€Šæœ«æ—¥å´©å¡Œã€‹-2015-6-6&quot;&gt;&lt;a href=&quot;#ã€Šæœ«æ—¥å´©å¡Œã€‹-2015-6-6&quot; class=&quot;headerlink&quot; title=&quot;ã€Šæœ«æ—¥å´©å¡Œã€‹-2015.6.6&quot;&gt;&lt;/a&gt;ã€Šæœ«æ—¥å´©å¡Œã€‹-2015.6.6&lt;/h3&gt;&lt;p&gt;å“‡å“¦ï¼Œå†™è¿™ç¯‡å½±è¯„éƒ½æ˜¯ä¸¤å‘¨åäº†ï¼ŒçœŸæ˜¯æ‡’æ•£å•Š~~ï¼Œè¿™ç¯‡ç”µå½±ç»™æˆ‘çš„æ„Ÿè§‰å°±æ˜¯ä¸å¤ªå€¼å¾—ä¸€çœ‹&amp;gt;&lt;em&gt;&amp;lt;ã€‚ä»¥å‰æƒ³ç€è¦æ˜¯åœ°éœ‡çš„æ—¶å€™åœ¨å¤©ä¸Šå¼€é£æœºä¼šæ˜¯å’‹æ ·çš„å‘¢ï¼Œæ²¡æœ‰é£æœºè·³åˆ°æ²³é‡Œå»ä¼šæ˜¯å’‹æ ·çš„å‘¢ã€‚å§æ§½ï¼Œç»“æœåœ°éœ‡çš„æ—¶å€™ç”·ä¸»è¿˜çœŸçš„æ˜¯åœ¨å¼€é£æœºï¼Œæçš„æˆ‘éƒ½ä»¥ä¸ºå…¨ç‰‡ä¼šä¸€ç›´å¼€é£æœºå¼€åˆ°ç»“æŸçš„Orz~~æ•´ç‰‡å°±æ˜¯çœ‹ç‰¹æ•ˆçš„ã€‚å¤§æ¥¼æŠ–åŠ¨ï¼Œå¤§æ¥¼å‡ºç°è£‚çº¹ã€‚å¤§æ¥¼å€¾æ–œã€‚å¯èƒ½æ˜¯å¤§åœ°æ–­è£‚å•¥çš„ç‰¹æ•ˆè¡¨ç°æ•ˆæœä¸æ˜¯å¤ªå¥½åšï¼Œæ‰€ä»¥åœ°ç‚¹é€‰åœ¨äº†æ—§é‡‘å±±ã€‚å—¯&lt;br&gt;ä¹‹åå°±æ˜¯æ°´ç‰¹æ•ˆå•¦ã€‚å½“ç„¶ç‰¹æ•ˆæ•ˆæœçœŸçš„è¿˜æ˜¯æŒºä¸é”™çš„ã€‚å†è¯´è¿™æ˜¯ä¸€éƒ¨ä¸»è§’å…‰ç¯çˆ†æ»¡çš„ç”µå½±ã€‚å‘ç”Ÿåœ°éœ‡çš„æ—¶å€™ç”·ä¸»æœ‰é£æœºï¼Œé£æœºæ²¡æ²¹äº†ç”·ä¸»åˆ°äº†éåœ°éœ‡åŒºæœ‰æ±½è½¦ï¼Œæ˜æ˜¾å¦‚æœä¸€ç›´å¼€æ±½è½¦å¯¹è¿™ç§é•¿è·ç¦»æ—¶é—´æ˜¯å®Œå…¨ä¸å¤Ÿç”¨çš„ï¼Œäºæ˜¯ä¹ç”·ä¸»åˆå¼€ä¸Šäº†é£æœº(å¯æ˜¯ä¸ºå•¥æœ€ååœ¨å¤§æ¡¥é‚£é‡Œæœ‰çœ‹åˆ°äº†é‚£å¯¹å¹´è€çš„çˆ·çˆ·å¥¶å¥¶)ã€‚æœ€åé™è½åœ¨è¶³çƒåœºæ—¶å±•å¼€åŒè‡‚æ˜¯ä¸æ˜¯æœ‰äº›æ¨¡ä»¿äº†ã€Šæ³°å¦å°¼å…‹å·ã€‹çš„Jakeå’ŒRoseå‘¢ï¼ˆâ†’&lt;/em&gt;â†’ç»å…¸å·²æˆä¸€ä»£äººçš„å›å¿†æ— æ³•è¶…è¶Šï¼Œä¸è¿‡æ¨¡ä»¿çš„è¿˜æŒºä¸é”™ï¼‰ã€‚è¿«é™ä¹‹åç”·ä¸»åœ¨ä¸€ä¸ªå¸…æ°”çš„&lt;code&gt;ç”Ÿå‘½ä¸‰è§’&lt;/code&gt;æ‹¯æ•‘äº†å¥½å¤šäººæ€§å‘½ä¹‹åå¥‡è¿¹èˆ¬çš„æäº†ä¸€æ¡å¿«è‰‡ã€‚åœ¨è½®èˆ¹ç¿»çš„æ—¶å€™ä»èºæ—‹æ¡¨ä¸‹é¢æ“¦å¤´è€Œè¿‡(èºæ—‹æ¡¨çœŸçš„æ²¡æœ‰æ°”æµå—ï¼Œåœ¨é‚£ä¹ˆå¤§ä¸€è‰˜èˆ¹æ²‰æ²¡çš„æ—¶å€™æ²¡æœ‰æ¼©æ¶¡å—)ï¼Œè¯¸å¦‚æ­¤ç±»ï¼Œä¸»è§’å…‰ç¯è¿˜æ˜¯éœ€è¦æœ‰çš„ã€‚å¯æ˜¯æ— æ—¶æ— åˆ»ä½¿ç”¨å°±æ²¡å¤šå¤§æ„æ€äº†ã€‚å¦‚æœæ¸¸æˆå½“ä¸­èƒ½è¿ç»­ä¸åœçš„æš´å‡»é‚£ä¹ˆè°ä¼šå’Œä½ ç©è€å‘¢~~~å¯èƒ½æœ‰æ—¶å€™å°±ä¼šæƒ³ï¼Œè¿™çœŸçš„ä¸æ˜¯å¤©ä½‘ç”·ä¸»ä¹ˆOrz&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œç”·ä¸»çš„èº«æçœŸæ˜¯å¥½ï¼åœ¨ä¸€ä¸ªä¾§é¢çš„é•œå¤´çš„æ—¶å€™ç”·ä¸»çš„æ‰‹æ¡ä½å¥³ä¸»çš„åŒè‚©ã€‚åœ¨3Dçš„æ•ˆæœä¸‹å°±èµ¶è„šç”·ä¸»ä½“å½¢å®Œå…¨æ˜¯å¥³ä¸»2å€æœ‰ä½™å˜›ï¼Œç®€ç›´å®½åšä¼Ÿå²¸ï¼ï¼ä¿å®¶å«å›½ã€‚çœ‹~~å®¶æ˜¯åœ¨å‰é¢çš„ã€‚è¿è‡ªå·±çš„äº²äººéƒ½ä¿æŠ¤ä¸äº†å½“ä»€ä¹ˆé”®ç›˜å…šå»æ“ä¸­å—æµ·çš„å¿ƒå˜ã€‚ç»†æƒ³ä¸€ä¸‹è¿™è¦æ˜¯æˆ‘å…šçš„ç”µå½±å¯èƒ½å°±æ˜¯è¿™ä¸ªæ ·å­é¸Ÿã€‚å½“æ—¶å‘ç”Ÿåœ°éœ‡äº†ï¼Œç”·ä¸»åŒæ—¶æ¥åˆ°äº†æˆ˜å‹å’Œå¥³ä¸»çš„ç”µè¯ã€‚ç”·ä¸»æœæ–­è¯´äº†é˜¿é—¨ç„¶åæŠ•å…¥åˆ°äº†è‹±å‹‡çš„æ•‘ç¾å·¥ä½œä¸­ã€‚ç‰‡å°¾å¥³ä¸»å’Œå¥³å„¿å‡ºç°ä¸€å®¶å›¢èš~~ã€‚ç¾å‰§è™½ç„¶éƒ½æ˜¯ä¸ªäººè‹±é›„ä¸»ä¹‰ï¼Œç”¨åœ¨ä¿å®¶è¿™æ–¹é¢è¿˜çœŸæ˜¯æ¿€åŠ¨äººå¿ƒå‘¢~~&lt;/p&gt;
&lt;p&gt;å¦å¤–,æŸ¥äº†ä¸‹ç”·ä¸»å¼•ä»¥ä¸ºå‚²çš„â€™ç”Ÿå‘½ä¸‰è§’â€™ç½‘ä¸ŠæŒ‡å‡ºçæ‰¯ã€‚å®£æ‰¬é”™è¯¯çš„ç¾éš¾é¢„é˜²ç†å¿µçœŸæ˜¯å¿ƒå¡ã€‚è¿˜æœ‰ä½¿ç”¨æ‰‹æ‘‡ç”µè¯é‚£ä¸€èŠ‚ã€‚æ‰‹æ‘‡ç”µè¯ç”¨çš„æ˜¯å›ºåŒ–ç½‘ç»œï¼Œå›ºåŒ–ç½‘ç»œä¸ä¾èµ–åŸå¸‚ç”µç½‘å•¥çš„ã€‚åªæ˜¯å¤§åœ°éœ‡çš„æ—¶å€™å®ƒçœŸçš„ä¸ä¼šæ–­æ‰ä¹ˆã€‚é¢å¯¹åœ°éœ‡çš„æ—¶å€™è§‰å¾—ä¸æ˜¯å¯é çš„ï¼Œé¡¶å¤šä¹Ÿå°±æ¯”æ‰‹æœºé è°±ä¸€ç‚¹è€Œå·²ã€‚å¯¹äºç¾éš¾ï¼Œå‰§ä¸­å¤§å®¶è¡¨ç°çš„ç›¸å¯¹é•‡å®šã€‚å‘ç”ŸäºŒæ¬¡ä¼¤å®³çš„æƒ…å†µä¸å¤šã€‚ä¸çŸ¥é“çœŸæ­£é¢å¯¹è¿™ç§é‡å¤§ç¾éš¾ï¼Œéšæ—¶å¯èƒ½æ€§å‘½ä¸ä¿ä¼šæ˜¯ä»€ä¹ˆæ ·å­T_Tï¼Œå“¦&lt;br&gt;è¿˜æœ‰ä¸€ç‚¹ï¼Œæ˜¯ä¸æ˜¯å¯¹äºæ•™æˆè¿™ä¸ªè§’è‰²ï¼Œæ€»æ˜¯é€‚åˆå¤§è…¹ä¾¿ä¾¿æœ‰ç€ç»œè…®èƒ¡çš„äººæ¥æ¼”å‘¢&amp;gt;_&amp;lt;çœ‹èµ·æ¥æ¯”è¾ƒæœ‰å­¦è¯†å’©&lt;/p&gt;
&lt;p&gt;æœ€åæ€»ç»“ä¸€ä¸‹ã€‚è¿™æ˜¯ä¸€éƒ¨ä»¥å°çˆ±èƒœäºå¤§çˆ±ä¸ºä¸»é¢˜ï¼Œä»¥åœ°éœ‡ä¸ºèƒŒæ™¯æ¯«æ— è¡€è…¥ä¹Ÿä¸ç´§å¼ çš„ç‰¹æ•ˆç”µå½±~&lt;/p&gt;
&lt;h3 id=&quot;ã€Šä¾ç½—çºªä¸–ç•Œã€‹-2015-6-13&quot;&gt;&lt;a href=&quot;#ã€Šä¾ç½—çºªä¸–ç•Œã€‹-2015-6-13&quot; class=&quot;headerlink&quot; title=&quot;ã€Šä¾ç½—çºªä¸–ç•Œã€‹-2015.6.13&quot;&gt;&lt;/a&gt;ã€Šä¾ç½—çºªä¸–ç•Œã€‹-2015.6.13&lt;/h3&gt;&lt;p&gt;ä»¥å‰çœ‹è¿‡è¿™ä¸ªç³»åˆ—çš„æŸäº›ç”µå½±ã€‚å·²ç»æ²¡ä»€ä¹ˆå°è±¡äº†ï¼ŒçœŸæ˜¯ä¸€ç‚¹å°è±¡éƒ½æ²¡æœ‰~~å¯èƒ½å› ä¸ºä¸æ˜¯åœ¨ç”µå½±é™¢çœ‹çš„ï¼Ÿè¯è¯´å¯èƒ½æ˜¯æ–¯è’‚èŠ¬Â·æ–¯çš®å°”ä¼¯æ ¼è¿™å¿«é‡‘å­—æ‹›ç‰Œï¼Ÿç”µå½±ç»™äººçš„æ„Ÿè§‰éå¸¸æ£’ï¼Œæƒ³åˆ°æé¾™ä¼šä¸ä¼šè®©äººè§‰å¾—è¿™æ˜¯ä¸€éƒ¨ææ€–ç‰‡å‘¢ã€‚æˆ‘æƒ³çœŸçš„å¾ˆå®¹æ˜“æ‹æˆææ€–ç‰‡ã€‚å¯æ˜¯è¿™éƒ¨ç”µå½±ç»™äººçš„æ„Ÿè§‰ä¸æ¯«ä¸ææ€–~~éŸ³ä¹æ‹¿æçš„æ°åˆ°å¥½å¤„ï¼Œç´§å¼ åˆºæ¿€ä¸ææ€–~~ã€‚&lt;/p&gt;
&lt;p&gt;é—®æˆ‘åˆ«çš„ï¼Ÿåˆ«çš„ï¼Ÿå§æ§½&lt;br&gt;æˆ‘å°±æ„Ÿè§‰å¥½çœ‹äº†ã€‚ä½†æ˜¯å“ªé‡Œå¥½çœ‹æˆ‘è¿˜çœŸæƒ³ä¸èµ·æ¥ï¼Œæƒ³ä¸èµ·æ¥ï¼Œæƒ³ä¸èµ·æ¥&amp;gt;_&amp;lt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;æˆ‘çš„å½±è¯„æˆ‘åšä¸»-æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™-å°±æ˜¯è¿™ä¹ˆä»»æ€§&quot;&gt;&lt;a href=&quot;#æˆ‘çš„å½±è¯„æˆ‘åšä¸»-æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™-å°±æ˜¯è¿™ä¹ˆä»»æ€§&quot; class=&quot;headerlink&quot; title=&quot;æˆ‘çš„å½±è¯„æˆ‘åšä¸»,æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™,å°±æ˜¯è¿™ä¹ˆä»»æ€§~~~~&quot;&gt;&lt;/a&gt;æˆ‘çš„å½±è¯„æˆ‘åšä¸»,æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™,å°±æ˜¯è¿™ä¹ˆä»»æ€§~~~~&lt;/h4&gt;&lt;h4 id=&quot;ã€Š12å…¬æ°‘ã€‹-15-5-23&quot;&gt;&lt;a href=&quot;#ã€Š12å…¬æ°‘ã€‹-15-5-23&quot; class=&quot;headerlink&quot; title=&quot;ã€Š12å…¬æ°‘ã€‹-15.5.23&quot;&gt;&lt;/a&gt;ã€Š12å…¬æ°‘ã€‹-15.5.23&lt;/h4&gt;&lt;p&gt;æ®è¯´æ˜¯æ ¹æ®&lt;strong&gt;ã€Š12ç½—æ±‰ã€‹æ”¹ç¼–&lt;/strong&gt;ï¼Œæ²¡çœ‹è¿‡12ç½—æ±‰ï¼Œçœ‹è¿‡ä¹‹åæ„Ÿè§‰è¿™éƒ¨ç”µå½±è¿˜æŒºå¥½ã€‚å°æˆæœ¬çš„äººæ–‡ç‰‡æ•…äº‹è®²çš„å¥½ä¹ŸæŒºå€¼å¾—å›å‘³çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç”µå½±è®²è¿°çš„æ˜¯ä¸€ä¸ªç‰›é€¼æ£€å¯Ÿå®˜é€šè¿‡ä»–ç†æ€§çš„åˆ†æä¸€æ­¥æ­¥è¿˜åŸäº†â€œå¯ŒäºŒä»£æ‰‹åˆƒç”Ÿçˆ¶â€æ¡ˆä»¶çš„çœŸç›¸ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹12ä¸ªç”·ä¸»è§’(çªç„¶æƒ³åˆ°ä¸ºå˜›æ²¡å¥³çš„å‘¢ï¼Œç»ˆäºæƒ³åˆ°è¿™ä¹ˆå¤šå¹´æˆ‘å¥½åƒç¬¬ä¸€æ¬¡çœ‹åˆ°æ²¡æœ‰ç”·å¥³çŒªè„šfall&lt;br&gt;in loveçš„ç‰‡å­)ï¼š&lt;br&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://ficapy.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>å°†pycharmçš„è¿è¡Œé…ç½®è„šæœ¬è·¯å¾„ä¿®æ”¹ä¸ºå½“å‰é€‰ä¸­æ–‡ä»¶</title>
    <link href="http://ficapy.com/2015/03/18/change-pycharm-run-configurations-script-path-to-current-file/"/>
    <id>http://ficapy.com/2015/03/18/change-pycharm-run-configurations-script-path-to-current-file/</id>
    <published>2015-03-17T16:47:00.000Z</published>
    <updated>2016-03-03T09:13:17.000Z</updated>
    
    <content type="html">&lt;p&gt;è¿™æ ‡é¢˜çœ‹ç€éƒ½æŒºè®©äººè›‹ç–¼çš„ï¼Œå¯èƒ½å¾ˆå°‘äººä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯æˆ‘è§‰å¾—pycharmç”¨å¤šäº†åº”è¯¥æ˜¯ä¼šé‡åˆ°çš„~~~~~&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨pycharmçš„æ—¶å€™æ¯æ¬¡è¿è¡Œè„šæœ¬éƒ½ä¼šæœ‰ä¸€ä¸ª&lt;strong&gt;&lt;span
style=&quot;text-decoration: underline;&quot;&gt;&lt;em&gt;&lt;span
style=&quot;color: #ff0000; text-decoration: underline;&quot;&gt;åŸºäºé»˜è®¤è®¾ç½®çš„pythonè¿è¡Œç¯å¢ƒè®¾ç½®&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/strong&gt;ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/865uap38l.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ~~~~~~~~å¯¹ç€è¿™å¼ å›¾çœ‹äº†å¥½ä¹…&lt;br&gt;çªç„¶æ„è¯†åˆ°è¿™ç¯‡åšæ–‡éƒ½æ²¡å•¥å†™çš„å¿…è¦äº†ï¼Œæ˜¯ä¸å¹¸è¿˜æ˜¯å¹¸è¿å‘¢ã€‚åæ­£ä»¥å‰ä¹Ÿé—®è¿‡ä¸€äº›äººé—®é¢˜ä¸æ€ä¹ˆå¥½æè¿°éƒ½ä¸€ç›´æ²¡å¾—åˆ°æ–¹æ¡ˆï¼Œä¿ƒä½¿ä»Šå¤©è‡ªå·±å†™äº†ä¸ªå°è„šæœ¬ã€‚æƒ³æƒ³è§‰å¾—ä¹ŸæŒºæœ‰è¶£&lt;br&gt;è¿˜æ˜¯è®°å½•ä¸‹æ¥å§ ä¸´æ—¶å‘ç°è¿™ä¸ªä¹Ÿç®—æ˜¯ç¦æ°”å“‡~~&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡å³é”®ç‚¹å‡»å†æ‰§è¡Œæ–‡ä»¶çš„æ—¶å€™éƒ½ä¼šç”Ÿæˆä¸€ä¸ªpythonè¿è¡Œé…ç½®ï¼Œè¿™ä¸€æ­¥éª¤åªæ˜¯è¿è¡Œé…ç½®ä¸­çš„scripté¡¹æœ‰æ‰€æ”¹å˜ã€‚å‡å¦‚ä½ æœ‰å¾ˆå¤šä¸ªæ–‡ä»¶ã€‚é‚£ä¹ˆæ‰§è¡Œå¤šä¸ªæ–‡ä»¶åå°±å°†æœ‰å¤šä¸ªè¿è¡Œé…ç½®äº†ï¼Œçœ‹ç€çœŸæ˜¯ç›¸å½“ä¸çˆ½ï¼Œå¦‚æœä½ çŸ¥é“pycharmçš„external&lt;br&gt;toolï¼Œé‡Œé¢æœ‰insert&lt;br&gt;macrosï¼Œå…¶ä¸­\$FilePath\$å°±ä»£è¡¨å½“å‰é€‰æ‹©çš„æ–‡ä»¶ç»å¯¹è·¯å¾„ã€‚å¯æƒœè¯¥å‚æ•°æ— æ³•å¡«å…¥scripté¡¹ï¼Œå¦åˆ™å°±èƒ½å‡å°‘éå¸¸å¤špythonè¿è¡Œé…ç½®ï¼Œå¤§éƒ¨åˆ†é¡¹ç›®ä»…ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœé¡¹ç›®ä½¿ç”¨çš„æ˜¯æœ¬åœ°pythonè§£é‡Šå™¨&amp;amp;æ²¡æœ‰å¤æ‚çš„é…ç½®ï¼Œé‚£ä¹ˆç›´æ¥å³é”®ç‚¹å‡»å†æ‰§è¡Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªpythonè¿è¡Œé…ç½®å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œä¹Ÿå°±ä¸ä¼šæœ‰ä¿ºæœ€å¼€å§‹çš„è‹¦æ¼äº†ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯vagrantå¼€å‘ç¯å¢ƒï¼Œä»£ç æ˜¯ä»æœ¬æœºæ˜ å°„åˆ°è™šæ‹Ÿæœºä¸Šï¼Œæ‰€ä»¥ç›´æ¥æ‰§è¡Œä¼šæ˜¾ç¤ºè·¯å¾„é”™è¯¯~~~æˆ‘çš„å¤„ç†æµç¨‹æ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœ€å¼€å§‹é€‰æ‹©ç…§æ—§æ‰§è¡Œï¼ŒæŠ¥é”™åè¿›å…¥è¿è¡Œè®¾ç½®æ·»åŠ è·¯å¾„æ˜ å°„&lt;/li&gt;
&lt;li&gt;å¯æ˜¯ç‰¹å–µæ¯æ¬¡éƒ½æ·»åŠ æ˜ å°„å¥½çƒ¦å•Šï¼Œæ˜ å°„è·¯å¾„å¥½é•¿çš„å¥½å’©ï¼Œåæ­£å…¶ä»–çš„ä¸å˜ï¼Œä»…ä»…æ˜¯è¿è¡Œæ–‡ä»¶æ”¹å˜äº†ï¼Œäºæ˜¯ä¹é€‰æ‹©è¦è¿è¡Œçš„æ—¶å€™å°±å°†ä¸€ä¸ªå¥½çš„è¿è¡Œè®¾ç½®ä¿®æ”¹æ–‡ä»¶è·¯å¾„ä¸ºå½“å‰å°±å¥½äº†&lt;/li&gt;
&lt;li&gt;å°±æ˜¯ç°åœ¨äº†ï¼Œè§‰å¾—2ä¹Ÿå¥½çƒ¦ã€‚ã€‚ã€‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥ä¸Šçƒ¦æ¼å°±æ˜¯å› ä¸ºå¿˜è®°äº†é’ˆå¯¹æ¯ä¸€ä¸ªé¡¹ç›®éƒ½æœ‰é»˜è®¤çš„ç¯å¢ƒè®¾ç½®ï¼Œå…¶å®å°†é»˜è®¤çš„ç¯å¢ƒè®¾ç½®è®¾ç½®å¥½ä»¥åè‡ªåŠ¨ç»§æ‰¿å°±okäº†&amp;gt;_&amp;lt;å½“æƒ³åˆ°3çš„æ—¶å€™æ€»ä½“æ–¹é’ˆå°±æ˜¯è‡ªåŠ¨ä¿®æ”¹scriptå‚æ•°ä¸ºå½“å‰æ–‡ä»¶è·¯å¾„ã€‚æœ€å¼€å§‹æ˜¯æƒ³å†™è„šæœ¬æ‰¾å‡ºè¯¥é¡¹ç›®ä¸‹æ‰€æœ‰pyæ–‡ä»¶ä¸­æœ€åä¿®æ”¹çš„é‚£ä¸ªï¼Œç„¶åå°±æƒ³å¯èƒ½pycharmå¯¹äºæ¯ä¸ªé¡¹ç›®éƒ½æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­scriptçš„åœ°å€å°±å¥½äº†~~~å¯æ˜¯æœ€åæ²¡æ‰¾åˆ°ã€‚æœ€åå°±æƒ³åˆ°äº†æ¨¡æ‹Ÿç‚¹å‡»åˆ°è®¾ç½®é¡µé¢ä¿®æ”¹äº†ã€‚ç„¶åå°±è¯•äº†ä»¥ä¸‹å‡ ä¸ªsikulixã€aauto(å¿«æ‰‹)ã€æŒ‰é”®ç²¾çµã€Automaã€‚ç¬¬ä¸€å››ä¸ªä¸€çœ‹ä¾¿å¯ä¸Šæ‰‹ï¼Œå°±å’Œä¸Šæ‰‹pythonçš„åº“é‚£ä¹ˆç®€å•ï¼Œå°±å‡ ä¸ªç‰¹å¥½ç†è§£çš„å‡½æ•°ï¼ŒäºŒçœ‹äº†ä¸€ä¸‹è™½æœ‰autoä½†ä¸é€‚åˆåšæ¨¡æ‹Ÿç‚¹å‡»ï¼Œè€Œä¸”æƒ³ç«‹é©¬ä½¿ç”¨ä¹Ÿæ˜¯æ²¡å¤šå¤§å¯èƒ½çš„ï¼ŒæŒ‰é”®ç²¾çµæˆ‘å’‹çœ‹ç€æƒ³åå‘¢ï¼Œå®å¯å»èƒŒå‡ ä¸ªå‡½æ•°ä¹Ÿä¸æƒ³æ’å…¥æ’å…¥æ’å…¥ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åè¿˜æ˜¯äº®ä¸Šç”¨sikulixå’Œautomaå†™çš„ä»£ç å§ï¼Œç‚’é¸¡ç®€å•&lt;a href=&quot;https://github.com/aec4d/ScriptLet/tree/master/pycharm\_script\_path\_autochange&quot;&gt;https://github.com/aec4d/ScriptLet/tree/master/pycharm\_script\_path\_autochange&lt;/a&gt;&lt;br&gt;éœ€è¦æ³¨æ„çš„æ˜¯éœ€æŒ‰ç…§å®˜ç½‘æç¤ºé…ç½®å¥½ç¯å¢ƒã€‚2ä¸ªéƒ½æ˜¯ä½¿ç”¨ç»å¯¹åæ ‡å®šä½ç„¶åç‚¹å‡»ï¼Œå±å¹•åˆ†è¾¨ç‡1366*768ï¼Œpycharmç‰ˆæœ¬4.0.5&lt;/p&gt;
&lt;p&gt;bingo~~~~~~~~~~~~`&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ ‡é¢˜çœ‹ç€éƒ½æŒºè®©äººè›‹ç–¼çš„ï¼Œå¯èƒ½å¾ˆå°‘äººä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯æˆ‘è§‰å¾—pycharmç”¨å¤šäº†åº”è¯¥æ˜¯ä¼šé‡åˆ°çš„~~~~~&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨pycharmçš„æ—¶å€™æ¯æ¬¡è¿è¡Œè„šæœ¬éƒ½ä¼šæœ‰ä¸€ä¸ª&lt;strong&gt;&lt;span
style=&quot;text-decoration: underline;&quot;&gt;&lt;em&gt;&lt;span
style=&quot;color: #ff0000; text-decoration: underline;&quot;&gt;åŸºäºé»˜è®¤è®¾ç½®çš„pythonè¿è¡Œç¯å¢ƒè®¾ç½®&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/strong&gt;ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/865uap38l.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ~~~~~~~~å¯¹ç€è¿™å¼ å›¾çœ‹äº†å¥½ä¹…&lt;br&gt;çªç„¶æ„è¯†åˆ°è¿™ç¯‡åšæ–‡éƒ½æ²¡å•¥å†™çš„å¿…è¦äº†ï¼Œæ˜¯ä¸å¹¸è¿˜æ˜¯å¹¸è¿å‘¢ã€‚åæ­£ä»¥å‰ä¹Ÿé—®è¿‡ä¸€äº›äººé—®é¢˜ä¸æ€ä¹ˆå¥½æè¿°éƒ½ä¸€ç›´æ²¡å¾—åˆ°æ–¹æ¡ˆï¼Œä¿ƒä½¿ä»Šå¤©è‡ªå·±å†™äº†ä¸ªå°è„šæœ¬ã€‚æƒ³æƒ³è§‰å¾—ä¹ŸæŒºæœ‰è¶£&lt;br&gt;è¿˜æ˜¯è®°å½•ä¸‹æ¥å§ ä¸´æ—¶å‘ç°è¿™ä¸ªä¹Ÿç®—æ˜¯ç¦æ°”å“‡~~&lt;br&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://ficapy.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>Linodeç´§æ€¥æ¨¡å¼ä¿®æ”¹å¯†ç </title>
    <link href="http://ficapy.com/2015/03/09/linode-rescue-mode-reset-root-password/"/>
    <id>http://ficapy.com/2015/03/09/linode-rescue-mode-reset-root-password/</id>
    <published>2015-03-09T01:45:00.000Z</published>
    <updated>2016-06-29T03:48:26.000Z</updated>
    
    <content type="html">&lt;p&gt;VPSè¿è¡Œå¤ªä¹…äº†ï¼Œä¹Ÿæ²¡æ€ä¹ˆä¸Šå»çœ‹ã€‚å‰äº›å¤©é‡è£…ç”µè„‘æ²¡ä¿å­˜VPSçš„ç™»é™†ä¿¡æ¯ã€‚ç­‰éœ€è¦ä¸Šå»çœ‹çš„æ—¶å€™æ‰çŸ¥é“&lt;strong&gt;ç²—å¤§äº‹äº†ï¼&lt;/strong&gt;ç™»é™†ä¸ä¸Šå»äº†&lt;/p&gt;
&lt;p&gt;æˆ‘å‰æœŸå› ä¸ºå®‰å…¨éœ€è¦è®¾ç½®äº†ç¦ç”¨å¯†ç ç™»é™†ï¼Œæ”¹ç”¨å¯†åŒ™ï¼Œä¿®æ”¹äº†ç«¯å£ï¼Œæ— å¥ˆå»é—®Linodeå®¢æœï¼Œå¾—åˆ°ç­”å¤å¦‚ä¸‹&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Hello;&amp;#10;&amp;#10;You can reset your root password by following the following steps:&amp;#10;&amp;#10;1) Go to your Linode&amp;#39;s dashboard  &amp;#10;2) Shut down your Linode  &amp;#10;3) Go to the &amp;#34;Rescue&amp;#34; tab of the Linode&amp;#39;s dashboard  &amp;#10;4) Type the new password in the &amp;#34;Reset Root Password&amp;#34; field  &amp;#10;5) Reset  &amp;#10;6) Wait for the process to finish (you&amp;#39;ll see it in your host job&amp;#10;queue)  &amp;#10;7) Boot your Linode&amp;#10;&amp;#10;Best regards,&amp;#10;&amp;#10;Dave Russell Jr  &amp;#10;Linode Support Specialist&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;ç»§ç»­é—®ï¼Œæˆ‘ä¿®æ”¹äº†ç™»é™†ç«¯å£ï¼Œè€Œä¸”å¸Œæœ›ä¿®æ”¹å¯†ç æœºå™¨ä¸é‡å¯å¯ä»¥ä¹ˆï¼Œç­”æ›°æ²¡æœ‰åŠæ³•ã€‚æœ€ååªèƒ½è¯´è¿™ä¸ª&lt;strong&gt;&lt;em&gt;å®˜æ–¹å¤åˆ¶çš„å›å¤å‘çˆ¹è‡³æ&lt;/em&gt;&lt;/strong&gt;ã€‚&lt;br&gt;æ­£ç¡®æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿›å…¥Remote Accessé¡µé¢è·å–Lisa via sshä»£ç &lt;/li&gt;
&lt;li&gt;ä½¿ç”¨SSHå®¢æˆ·ç«¯è¿æ¥ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯cmderã€‚è¯¥æ­¥éª¤è¦æ±‚ä½ è¾“å…¥å¯†ç ï¼Œå¯†ç ä¸ºæ³¨å†ŒLinodeçš„å¯†ç ï¼Œévpsç™»é™†å¯†ç &lt;/li&gt;
&lt;li&gt;è¿›å…¥åä¼šå‡ºç°å¦‚ä¸‹å­—ç¬¦localhost&lt;br&gt;login:è¦æ±‚ä½ è¾“å…¥è´¦å·å¯†ç ï¼Œæ­¤æ—¶æ‰æ˜¯ä½ çš„VPSç™»é™†å¯†ç ï¼ŒéLinodeè´¦å·å¯†ç ï¼ˆæˆ‘å°±æ˜¯åœ¨è¿™é‡Œå¡äº†å¥½ä¹…ã€‚ã€‚ã€‚æ²¡ååº”è¿‡æ¥ï¼‰&lt;/li&gt;
&lt;li&gt;åˆ°è¿™é‡Œå°±æ˜¯ä¸Šé¢å®˜æ–¹å®¢æœçš„æ­¥éª¤äº†ï¼Œ1.å…ˆå…³é—­VPSã€‚2.è¿›å…¥rescueé¡µé¢æœ€ä¸‹æ–¹é‡ç½®rootå¯†ç ã€‚3.å¼€æœº&lt;/li&gt;
&lt;li&gt;ç”¨ä¸Šé¢ä¿®æ”¹çš„rootå¯†ç é”®å…¥æ­¥éª¤ä¸‰&lt;/li&gt;
&lt;li&gt;æœ€åä¿®æ”¹/etc/ssh/sshd_configé…ç½®service ssh restart&lt;/li&gt;
&lt;li&gt;bingoï¼Œé‡ç½®å¯†ç å®Œæˆ~~~~~~~~~Â·&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¡¥å›¾2å¼ &lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/UbP8Dv52.png&quot; alt=&quot;Linode\_reset\_password\_1&quot;&gt;&lt;br&gt;&lt;img src=&quot;https://ficapy.b0.upaiyun.com/blogimg/FGm3768z.png&quot; alt=&quot;Linode\_reset\_password\_2&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;VPSè¿è¡Œå¤ªä¹…äº†ï¼Œä¹Ÿæ²¡æ€ä¹ˆä¸Šå»çœ‹ã€‚å‰äº›å¤©é‡è£…ç”µè„‘æ²¡ä¿å­˜VPSçš„ç™»é™†ä¿¡æ¯ã€‚ç­‰éœ€è¦ä¸Šå»çœ‹çš„æ—¶å€™æ‰çŸ¥é“&lt;strong&gt;ç²—å¤§äº‹äº†ï¼&lt;/strong&gt;ç™»é™†ä¸ä¸Šå»äº†&lt;/p&gt;
&lt;p&gt;æˆ‘å‰æœŸå› ä¸ºå®‰å…¨éœ€è¦è®¾ç½®äº†ç¦ç”¨å¯†ç ç™»é™†ï¼Œæ”¹ç”¨å¯†åŒ™ï¼Œä¿®æ”¹äº†ç«¯å£ï¼Œæ— å¥ˆå»é—®Linodeå®¢æœï¼Œå¾—åˆ°ç­”å¤å¦‚ä¸‹&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Hello;&amp;#10;&amp;#10;You can reset your root password by following the following steps:&amp;#10;&amp;#10;1) Go to your Linode&amp;#39;s dashboard  &amp;#10;2) Shut down your Linode  &amp;#10;3) Go to the &amp;#34;Rescue&amp;#34; tab of the Linode&amp;#39;s dashboard  &amp;#10;4) Type the new password in the &amp;#34;Reset Root Password&amp;#34; field  &amp;#10;5) Reset  &amp;#10;6) Wait for the process to finish (you&amp;#39;ll see it in your host job&amp;#10;queue)  &amp;#10;7) Boot your Linode&amp;#10;&amp;#10;Best regards,&amp;#10;&amp;#10;Dave Russell Jr  &amp;#10;Linode Support Specialist&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://ficapy.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="Linode" scheme="http://ficapy.com/tags/Linode/"/>
    
      <category term="Lish" scheme="http://ficapy.com/tags/Lish/"/>
    
  </entry>
  
</feed>
